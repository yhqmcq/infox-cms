/**
* jQuery EasyUI 1.3.5
* Copyright (c) 2009-2013 www.jeasyui.com. All rights reserved.
*
* Licensed under the GPL or commercial licenses
* To use it on other terms please contact author: info@jeasyui.com
* http://www.gnu.org/licenses/gpl.txt
* http://www.jeasyui.com/license_commercial.php
*
* jQuery EasyUI Plugins Library 1.0 beta
* jQuery EasyUI 插件库
* jeasyui.extensions.all.min.js
* 二次开发 流云
* 最近更新：2013-12-06
*
* 依赖项：
*   1、jquery-1.9.1.js late
*   2、jquery-easyui 1.3.4 late
*   3、jquery.jdirk.js v1.0 beta late
*
* Copyright (c) 2013 ChenJianwei personal All rights reserved.
* http://www.chenjianwei.org
*/
// 1,jeasyui.extensions.js
!function(a,b){var e,f,g,h,i,j,k,l,c={},d=function(){return a.apply(this,arguments)};d.fn=d.prototype={},d.easyui=c,c.getTopEasyuiMessager=function(){return a.util.isTopMost?a.messager:a.util.$&&a.util.$.messager?a.util.$.messager:a.messager},c.messager=c.getTopEasyuiMessager(),c.getTopEasyuiTooltip=function(){return a.util.isTopMost?a.fn.tooltip:a.util.$&&a.util.$.fn&&a.util.$.fn.tooltip?a.util.$.fn.tooltip:a.fn.tooltip},c.tooltip=a.fn.tooltip,c.tooltip.init=function(b,c){var d=a.util.parseJquery(b);d.mouseover(function(){d.tooltip(a.extend({trackMouse:!0},c,{onHide:function(){a.isFunction(c.onHide)&&c.onHide.apply(this,arguments),d.tooltip("destroy")}})).tooltip("show")})},e={error:"messager-error",info:"messager-info",question:"messager-question",warning:"messager-warning"},f=a.messager.show,g=a.messager.alert,h=a.messager.confirm,i=a.messager.prompt,j={title:"操作提醒",confirm:"您确认要进行该操作？",prompt:"请输入相应内容：",icon:"info",loading:"正在加载，请稍等..."},a.messager.show=function(b){var d,g,h,i,c=a.util.isString(b)||a.util.isBoolean(b)||a.isNumeric(b);return c?1==arguments.length?a.messager.show({msg:String(b)}):a.messager.show({title:b,msg:arguments[1],icon:arguments[2],position:arguments[3]}):(d=a.extend({},a.messager.defaults,{title:"操作提醒",timeout:4e3,showType:"slide"}),g={topLeft:{right:"",left:0,top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""},topCenter:{right:"",top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""},topRight:{left:"",right:0,top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""},centerLeft:{left:0,right:"",bottom:""},center:{right:"",bottom:""},centerRight:{left:"",right:0,bottom:""},bottomLeft:{left:0,right:"",top:"",bottom:-document.body.scrollTop-document.documentElement.scrollTop},bottomCenter:{right:"",top:"",bottom:-document.body.scrollTop-document.documentElement.scrollTop},bottomRight:{left:"",right:0,top:"",bottom:-document.body.scrollTop-document.documentElement.scrollTop}},h=a.extend({},d,b),h.style=g[b.position]?g[b.position]:g.topCenter,i=e[h.icon]?e[h.icon]:e.info,h.msg="<div class='messager-icon "+i+"'></div>"+"<div>"+h.msg+"</div>",f(h))},a.union(a.messager.show,f),a.messager.alert=function(){return 1==arguments.length?g(j.title,arguments[0],j.icon):2==arguments.length?a.isFunction(arguments[1])?g(j.title,arguments[0],j.icon,arguments[1]):arguments[1]in e?g(j.title,arguments[0],arguments[1]):g.apply(this,arguments):3==arguments.length?a.isFunction(arguments[2])?arguments[1]in e?g(j.title,arguments[0],arguments[1],arguments[2]):g(arguments[0],arguments[1],j.icon,arguments[2]):g.apply(this,arguments):g.apply(this,arguments)},a.messager.confirm=function(){return 1==arguments.length?a.isFunction(arguments[0])?h(j.title,j.confirm,arguments[0]):h(j.title,arguments[0]):2==arguments.length?a.isFunction(arguments[1])?h(j.title,arguments[0],arguments[1]):h(arguments[0],arguments[1]):h.apply(this,arguments)},a.messager.solicit=function(){var k,f=a.extend({},2==arguments.length?{title:j.title,msg:arguments[0],fn:arguments[1]}:{title:arguments[0],msg:arguments[1],fn:arguments[2]}),g=a.messager.confirm(f.title,f.msg,f.fn),h=g.window("options"),i=h.onClose;return h.onClose=function(){a.isFunction(i)&&i.apply(this,arguments),a.isFunction(f.fn)&&f.fn.call(this,b)},k=g.find(">div.messager-button").empty(),a("<a></a>").linkbutton({text:"是"}).css("margin-left","10px").click(function(){h.onClose=i,g.window("close"),a.isFunction(f.fn)&&f.fn.call(this,!0)}).appendTo(k),a("<a></a>").linkbutton({text:"否"}).css("margin-left","10px").click(function(){h.onClose=i,g.window("close"),a.isFunction(f.fn)&&f.fn.call(this,!1)}).appendTo(k),a("<a></a>").linkbutton({text:"取消"}).css("margin-left","10px").click(function(){h.onClose=i,g.window("close"),a.isFunction(f.fn)&&f.fn.call(this,b)}).appendTo(k),g},a.messager.prompt=function(){return 1==arguments.length?a.isFunction(arguments[0])?i(j.title,j.prompt,arguments[0]):i(j.title,j.prompt):2==arguments.length?a.isFunction(arguments[1])?i(j.title,arguments[0],arguments[1]):i(arguments[0],arguments[1]):i.apply(this,arguments)},c.loading=function(b){var d,e,f,g,h,i,c={msg:j.loading,locale:"body",topMost:!1};return b=b||{},a.extend(c,b),d=c.topMost?a.util.$:a,e=d.util.parseJquery(c.locale),f=e.children().map(function(){var b=a(this).css("z-index");return a.isNumeric(b)?parseInt(b):0}),g=a.array.max(f),e.addClass("mask-container"),h=d("<div></div>").addClass("datagrid-mask").css({display:"block","z-index":++g}).appendTo(e),i=d("<div></div>").addClass("datagrid-mask-msg").css({display:"block",left:"50%","z-index":++g}).html(c.msg).appendTo(e),i.css("marginLeft",-i.outerWidth()/2),h.add(i)},c.loaded=function(b){var e,d={locale:"body",topMost:!1};1==arguments.length&&(a.isPlainObject(arguments[0])?a.extend(d,arguments[0]):a.util.isBoolean(arguments[0])?d.topMost=arguments[0]:d.locale=arguments[0]),2==arguments.length&&(a.util.isBoolean(arguments[0])?a.extend(d,{locale:arguments[1],topMost:arguments[0]}):a.extend(d,{locale:arguments[0],topMost:arguments[1]})),e=d.topMost?a.util.$:a,b=e.util.parseJquery(d.locale),b.removeClass("mask-container"),b.children("div.datagrid-mask-msg,div.datagrid-mask").remove()},a.extend(a.fn.panel.defaults,{loadingMessage:j.loading}),a.extend(a.fn.window.defaults,{loadingMessage:j.loading}),a.extend(a.fn.dialog.defaults,{loadingMessage:j.loading}),a.extend(a.fn.combo.defaults,{missingMessage:a.fn.validatebox.defaults.missingMessage}),c.ajaxError=function(b){return arguments.length?(a.fn.form.defaults.onLoadError=b,a.fn.combobox.defaults.onLoadError=b,a.fn.combotree.defaults.onLoadError=b,a.fn.combogrid.defaults.onLoadError=b,a.fn.datagrid.defaults.onLoadError=b,a.fn.propertygrid.defaults.onLoadError=b,a.fn.tree.defaults.onLoadError=b,a.fn.treegrid.defaults.onLoadError=b,a.ajaxSetup({error:b}),void 0):a.fn.form.defaults.onLoadError},k=function(b){var f,g,i,j,k;a.messager.progress("close"),c.messager!=a.messager&&c.messager.progress("close"),f=b&&!a.string.isNullOrWhiteSpace(b.responseText)?"如果该问题重复出现，请联系您的系统管理员并反馈该故障。<br />错误号："+b.status+"("+b.statusText+")；<hr />"+b.responseText:"系统出现了一个未指明的错误，如果该问题重复出现，请联系您的系统管理员并反馈该故障。",g=c.messager.alert("错误提醒",f,"error"),g.window("options"),i=g.window("panel"),j=i.outerWidth(),k=i.outerHeight(),(j>800||k>800)&&g.window("resize",{width:j>800?800:j,height:k>800?800:k}),g.window("center")},c.ajaxError(k),a.ajaxSetup({dataFilter:function(b,c){return a.util.isString(c)&&"json"==c.toLowerCase(c)?a.string.toJSONString(b):b}}),d.fn.isEasyUI=function(b){if(a.array.contains(a.parser.plugins,b)||a.error(a.string.format("传入的参数 pluginName: {0} 不是 easyui 插件名。")),!this.length)return!1;var c=a.data(this[0],b);return c&&c.options?!0:!1},c.isEasyUI=function(b,c){return a.util.parseJquery(b).isEasyUI(c)},d.fn.currentPagination=function(){for(var b=this.closest(".pagination");b.length&&!a.data(b[0],"pagination");)b=b.parent().closest(".pagination");return b},d.fn.currentProgressbar=function(){for(var b=this.closest(".progressbar");b.length&&!a.data(b[0],"progressbar");)b=b.parent().closest(".progressbar");return b},d.fn.currentPanel=function(){for(var b=this.closest(".panel-body");b.length&&!a.data(b[0],"panel");)b=b.parent().closest(".panel-body");return b},d.fn.currentTabPanel=function(){for(var b=this.closest(".panel-body"),c=b.parent(),d=c.parent(),e=d.parent();b.length&&!(a.data(b[0],"panel")&&c.hasClass("panel")&&d.hasClass("tabs-panels")&&e.hasClass("tabs-container"));)b=b.parent().closest(".panel-body"),c=b.parent(),d=c.parent(),e=d.parent();return b},d.fn.currentTabIndex=function(){var a=this.currentTabPanel();return a.length?a.panel("panel").index():-1},d.fn.currentTabs=function(){for(var b=this.closest(".tabs-container");b.length&&!a.data(b[0],"tabs");)b=b.parent().closest(".tabs-container");return b},d.fn.currentAccordion=function(){for(var b=this.closest(".accordion");b.length&&!a.data(b[0],"accordion");)b=b.parent().closest(".accordion");return b},d.fn.currentAccPanel=function(){for(var b=this.closest(".panel-body"),c=b.parent(),d=panels.parent();b.length&&!(a.data(b[0],"panel")&&c.hasClass("panel")&&d.hasClass("accordion")&&a.data(d[0],"accordion"));)b=b.parent().closest(".panel-body"),c=b.parent(),d=panels.parent();return b},d.fn.currentLayout=function(){for(var b=this.closest(".layout");b.length&&!a.data(b[0],"layout");)b=b.closest(".layout");return b},d.fn.currentRegion=function(){for(var b=this.closest(".panel.layout-panel"),c=b.parent(),d=b.children(".panel-body");b.length&&(!c.hasClass("layout")||!a.data(d[0],"panel"));)b=b.parent().closest(".panel.layout-panel"),c=b.parent(),d=b.children(".panel-body");return d},d.fn.currentLinkbutton=function(){for(var b=this.closest(".l-btn");b.length&&!a.data(b[0],"linkbutton");)b=b.parent().closest(".layout");return b},d.fn.currentCalendar=function(){for(var b=this.closest(".calendar");b.length&&!a.data(b[0],"calendar");)b=b.parent().closest(".calendar");return b},d.fn.currentWindow=function(){for(var b=this.closest(".panel-body.window-body");b.length&&!a.data(b[0],"window");)b=b.parent().closest(".panel-body.window-body");return b},d.fn.currentDialog=function(){for(var b=this.closest(".panel-body.window-body");b.length&&!a.data(b[0],"dialog");)b=b.parent().closest(".panel-body.window-body");return b},d.fn.currentDatagrid=function(){for(var b=this.closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");b.length&&!a.data(c[0],"datagrid");)b=b.parent().closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");return c},d.fn.currentPropertygrid=function(){for(var b=this.closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");b.length&&!a.data(c[0],"propertygrid");)b=b.parent().closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");return c},d.fn.currentTree=function(){for(var b=this.closest(".tree");b.length&&!a.data(b[0],"tree");)b=b.parent().closest(".tree");return b},d.fn.currentTreegrid=function(){for(var b=this.closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");b.length&&!a.data(c[0],"treegrid");)b=b.parent().closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");return c},a.union(d),a.fn.union(d.fn),l=".mask-container { position: relative; }",a.util.addCss(l)}(jQuery);

// 2,jeasyui.extensions.theme.js
!function(a){function b(b){b=b||a;var c=b("link[href$='easyui.css']"),d=c.attr("href"),e=d.split("/");return e.length>1?e[e.length-2]:e[e.length-1]}function c(a,c,d,f){var g=b(a),h=a("link[href$='easyui.css']"),i=h.attr("href"),j=i.split("/");arguments.length>1?j[j.length-2]=c:a.array.insert(j,0,c),h.attr("href",j.join("/")),e(d,g,c,f)}function d(a,f,g,h){var i=b(a);c(a,f),a("iframe,iframe").each(function(){try{a.util&&a.util.isWindow(this.contentWindow)&&a.util.isObject(this.contentWindow.document)&&a.isFunction(this.contentWindow.$)&&this.contentWindow.$.easyui&&this.contentWindow.$.easyui.theme&&d(this.contentWindow.$,f)}catch(b){}}),e(g,i,f,h)}function e(b,c,d,e){if(a.isFunction(b)){var f=a.array.first(a.easyui.theme.dataSource,function(a){return a.path==c}),g=a.array.first(a.easyui.theme.dataSource,function(a){return a.path==d});f&&(c=f),g&&(d=g),a.util.exec(function(){b.call(e,d,c)})}}a.util.namespace("$.easyui"),a.easyui.theme=function(e,f,g,h){return 0==arguments.length?b(a):1==arguments.length&&"boolean"==typeof e?e?b(a.util.$):b(a):e===!0?d(a.util.$,f,g,h):e===!1?c(a,f,g,h):c(a,e,f,g)},a.easyui.theme.dataSource=[{id:1,name:"默认（银色,推荐）",path:"bootstrap"},{id:2,name:"天空蓝（推荐）",path:"default"},{id:3,name:"灰霾（推荐）",path:"gray"},{id:4,name:"磁贴（标准）",path:"metro-standard"}]}(jQuery);

// 3,jeasyui.extensions.linkbutton.js
!function(a){function c(b){var c=a.util.parseJquery(b),d=c.linkbutton("options"),e=d.extensions?d.extensions:d.extensions={};e._initialized||(g(b,d.style),e._initialized=!0)}function d(b,c){var d=a.util.parseJquery(b),e=d.linkbutton("options"),f=d.find("span.l-btn-empty"),g=f.length?!0:!1;g||(f=d.find("span.l-btn-text")),f.removeClass(e.iconCls).addClass(c),e.iconCls=c}function e(b,c){var d=a.util.parseJquery(b),e=d.linkbutton("options"),f=d.find("span.l-btn-text");c?f.empty().removeClass("l-btn-icon-left l-btn-icon-right").addClass("l-btn-text l-btn-icon-"+e.iconAlign).addClass(e.iconCls).text(c):(f.empty().removeClass("l-btn-icon-left l-btn-icon-right").removeClass(e.iconCls),a("<span class='l-btn-empty'>&nbsp;</span>").addClass(e.iconCls).appendTo(f)),e.text=c}function f(b,c){var d=a.util.parseJquery(b),e=d.linkbutton("options");d.find("span.l-btn-empty").length||a.util.exec(function(){d.find("span.l-btn-text").removeClass("l-btn-icon-left l-btn-icon-right").addClass("l-btn-icon-"+e.iconAlign)}),e.iconAlign=c}function g(b,c){c&&a.util.parseJquery(b).css(c)}function h(b,c){var d=a.util.parseJquery(b),e=d.linkbutton("options");c=c?!0:!1,d[c?"addClass":"removeClass"]("l-btn-plain"),e.plain=c}var i,j,k;a.fn.linkbutton.extensions={},i=a.fn.linkbutton,a.fn.linkbutton=function(a){return"string"==typeof a?i.apply(this,arguments):i.apply(this,arguments).each(function(){c(this)})},a.union(a.fn.linkbutton,i),j=a.fn.linkbutton.extensions.defaults={style:null},k=a.fn.linkbutton.extensions.methods={setIcon:function(a,b){return a.each(function(){d(this,b)})},setText:function(a,b){return a.each(function(){e(this,b)})},setIconAlign:function(a,b){return a.each(function(){f(this,b)})},setStyle:function(a,b){return a.each(function(){g(this,b)})},setPlain:function(a,b){return a.each(function(){h(this,b)})}},a.extend(a.fn.linkbutton.defaults,j),a.extend(a.fn.linkbutton.methods,k)}(jQuery);

// 4,jeasyui.extensions.validatebox.js
!function(a,b){function d(b){var c=a.util.parseJquery(b),d=c.validatebox("options");d._initialized||(e(b,d.prompt,d),d.autoFocus&&a.util.exec(function(){c.focus()}),d._initialized=!0)}function e(b,c,d){var e=a.util.parseJquery(b);d=d||e.validatebox("options"),d.prompt=c,a.html5.testProp("placeholder",e[0].nodeName)?e.attr("placeholder",c):(a.isFunction(!d.promptFocus)||(d.promptFocus=function(){e.hasClass("validatebox-prompt")&&(e.removeClass("validatebox-prompt"),e.val()==d.prompt&&e.val(""))},e.focus(d.promptFocus)),a.isFunction(!d.promptBlur)||(d.promptBlur=function(){a.string.isNullOrEmpty(e.val())&&e.addClass("validatebox-prompt").val(d.prompt)},e.blur(d.promptBlur)),a.string.isNullOrEmpty(e.val())&&e.addClass("validatebox-prompt").val(d.prompt))}function g(b){var c=a.util.parseJquery(b);return c.hasClass("validatebox-prompt")&&c.removeClass("validatebox-prompt").val(""),f.call(c,c)}var c,f,h,i,j,k,l;a.fn.validatebox.extensions={},c={engNum:{validator:function(a){return/^[0-9a-zA-Z]*$/.test(a)},message:"请输入英文字母或数字"},chsEngNum:{validator:function(a){return/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9])*$/.test(a)},message:"只允许汉字、英文字母或数字。"},code:{validator:function(a){return/^[\u0391-\uFFE5\w]+$/.test(a)},message:"只允许汉字、英文字母、数字及下划线."},name:{validator:function(a){return a.isUserName()},message:"用户名不合法(字母开头，允许6-16字节，允许字母数字下划线)"},minLength:{validator:function(a,b){return c.length.validator(a,[b[0]])},message:"最少输入 {0} 个字符."},maxLength:{validator:function(a,b){return c.length.validator(a,[0,b[0]])},message:"最多输入 {0} 个字符."},length:{validator:function(b,c){var d=a.trim(b).length,e=c[0],f=c[1];return(!e||d>=e)&&(!f||f>=d)},message:"输入内容长度必须介于 {0} 和 {1} 个字符数之间."},contains:{validator:function(b,c){return a.string.contains(b,c[0])},message:"输入的内容必须包含 {0}."},startsWith:{validator:function(b,c){return a.string.startsWith(b,c[0])},message:"输入的内容必须以 {0} 作为起始字符."},endsWith:{validator:function(b,c){return a.string.endsWith(b,c[0])},message:"输入的内容必须以 {0} 作为起始字符."},longDate:{validator:function(b){return a.string.isLongDate(b)},message:"输入的内容必须是长日期时间(yyyy-MM-dd hh:mm:ss)格式."},shortDate:{validator:function(b){return a.string.isShortDate(b)},message:"输入的内容必须是短日期(yyyy-MM-dd)格式."},date:{validator:function(b){return a.string.isDate(b)},message:"输入的内容必须是长日期时间(yyyy-MM-dd hh:mm:ss)或短日期(yyyy-MM-dd)格式."},tel:{validator:function(b){return a.string.isTel(b)},message:"输入的内容必须是电话号码(中国)格式."},mobile:{validator:function(b){return a.string.isTel(b)},message:"输入的内容必须是移动电话号码(中国)格式."},telOrMobile:{validator:function(b){return a.string.isTelOrMobile(b)},message:"输入的内容必须是电话号码(中国)或移动电话号码(中国)格式."},fax:{validator:function(b){return a.string.isFax(b)},message:"输入的内容必须是传真号码(中国)格式."},email:{validator:function(b){return a.string.isEmail(b)},message:"输入的内容必须是电子邮箱(Email)地址格式."},zipCode:{validator:function(b){return a.string.isZipCode(b)},message:"输入的内容必须是邮政编码(中国)格式."},existChinese:{validator:function(b){return a.string.existChinese(b)},message:"输入的内容必须是包含中文汉字."},chinese:{validator:function(b){return a.string.isChinese(b)},message:"输入的内容必须是纯中文汉字."},english:{validator:function(b){return a.string.isEnglish(b)},message:"输入的内容必须是纯英文字母."},fileName:{validator:function(b){return a.string.isFileName(b)},message:'输入的内容必须是合法的文件名(不能包含字符 \\/:*?"<>|).'},ipv4:{validator:function(b){return a.string.isIPv4(b)},message:"输入的内容必须是正确的 IP地址v4 格式."},url:{validator:function(b){return a.string.isUrl(b)},message:"输入的内容必须是正确的 url 格式."},ipv4url:{validator:function(b){return a.string.isUrlOrIPv4(b)},message:"输入的内容必须是正确的 IP地址v4 或 url 格式."},currency:{validator:function(b){return a.string.isCurrency(b)},message:"输入的内容必须是正确的货币金额(阿拉伯数字表示法)格式."},qq:{validator:function(b){return a.string.isQQ(b)},message:"输入的内容必须是正确 QQ 号码格式."},msn:{validator:function(b){return a.string.isMSN(b)},message:"输入的内容必须是正确 MSN 账户名格式."},unNormal:{validator:function(b){return a.string.isUnNormal(b)},message:"输入的内容必须是不包含空格和非法字符Z."},carNo:{validator:function(b){return a.string.isCarNo(b)},message:"输入的内容必须是合法的汽车车牌号码格式."},carEngineNo:{validator:function(b){return a.string.isCarEngineNo(b)},message:"输入的内容必须是合法的汽车发动机序列号格式."},idCard:{validator:function(b){return a.string.isIDCard(b)},message:"输入的内容必须是合法的身份证号码(中国)格式."},integer:{validator:function(b){return a.string.isInteger(b)},message:"输入的内容必须是合法的整数格式."},integerRange:{validator:function(b,c){return a.string.isInteger(b)&&(c[0]||b>=c[0])&&(c[1]||b<=c[1])},message:"输入的内容必须是合法的整数格式且值介于 {0} 与 {1} 之间."},numeric:{validator:function(c,d){return a.string.isNumeric(c,d?d[0]:b)},message:"输入的内容必须是指定类型的数字格式."},numericRange:{validator:function(c,d){return a.string.isNumeric(c,d?d[2]:b)&&(d[0]||c>=d[0])&&(d[1]||c<=d[1])},message:"输入的内容必须是指定类型的数字格式且介于 {0} 与 {1} 之间."},color:{validator:function(b){return a.string.isColor(b)},message:"输入的内容必须是正确的 颜色(#FFFFFF形式) 格式."},password:{validator:function(b){return a.string.isSafePassword(b)},message:"输入的内容必须是安全的密码字符(由字符和数字组成，至少 6 位)格式."},equals:{validator:function(b,c){var d=c[0],e=c[1];if(e)switch(String(e).toLowerCase()){case"jquery":case"dom":d=a.util.parseJquery(d).val();break;case"id":d=a.util.parseJquery("#"+d).val();break;case"string":}return b===d},message:"输入的内容不匹配."}},a.extend(a.fn.validatebox.defaults.rules,c),f=a.fn.validatebox.methods.isValid,h=a.fn.validatebox,a.fn.validatebox=function(b){return"string"==typeof b?h.apply(this,arguments):(b=b||{},this.each(function(){var c=a.util.parseJquery(this),e=a.extend({},a.fn.validatebox.parseOptions(this),b);h.call(c,e),d(this)}))},a.union(a.fn.validatebox,h),i=a.fn.validatebox.extensions.methods={setPrompt:function(a,b){return a.each(function(){e(this,b)})},validate:function(a){return a.each(function(){g(this)})},isValid:function(a){return g(a[0])}},j=a.fn.validatebox.extensions.defaults={prompt:null,autoFocus:!1},a.extend(a.fn.validatebox.defaults,j),a.extend(a.fn.validatebox.methods,i),k=".validatebox-prompt{ color: #ccc; }",a.util.addCss(k),l=a.fn.val,a.fn.val=function(b){var c,d;if(this.length>0&&this.is(".validatebox-text.validatebox-prompt")&&!a.html5.testProp("placeholder",this[0].nodeName)){if(d=this.validatebox("options"),0==arguments.length)return c=l.apply(this,arguments),c==d.prompt?"":c;b&&b!=d.prompt&&this.removeClass("validatebox-prompt")}return l.apply(this,arguments)}}(jQuery);

// 5,jeasyui.extensions.combo.js
!function(a){function c(b,c){var d=a.util.parseJquery(b),e=d.combo("options"),f=d.combo("textbox");e.prompt=c,f.validatebox("setPrompt",c)}function d(b,c){var d=a.util.parseJquery(b),e=a.data(b,"combo"),f=e.combo,g=f.find("span.combo-arrow").removeAttr("class").addClass("combo-arrow");c&&g.addClass(c),d.combo("options").iconCls=c}function e(b,c){var d=a.util.parseJquery(b),e=d.combo("options"),f=d.combo("textbox");e.required=f.validatebox("options").required=c}function g(b){var c=a(b),d=c.combo("options");a.isFunction(d.onBeforeDestroy)&&0==d.onBeforeDestroy.call(b)||(f.call(b,c),a.isFunction(d.onDestroy)&&d.onDestroy.call(b))}function h(b){return a.data(b,"combo").combo}function i(b){var c=a.util.parseJquery(b),d=a.data(b,"combo"),e=c.combo("options"),f=d.panel,g=d.combo,h=g.find(".combo-arrow"),i=e.extensions?e.extensions:e.extensions={};i._initialized||(c.combo("textbox").focus(function(){e.autoShowPanel&&f.is(":hidden")&&c.combo("showPanel")}),h.unbind("click.combo").bind("click.combo",function(){f.is(":visible")?c.combo("hidePanel"):(a("div.combo-panel:visible").panel("close"),c.combo("showPanel"),c.combo("textbox").focus())}),e.iconCls&&c.combo("setIcon",e.iconCls),a.util.browser.msie&&g._outerWidth()!=e.width&&a.util.exec(function(){c.combo("resize",e.width)}),i._initialized=!0)}var f,j,k,l;a.fn.combo.extensions={},f=a.fn.combo.methods.destroy,j=a.fn.combo,a.fn.combo=function(a){return"string"==typeof a?j.apply(this,arguments):j.apply(this,arguments).each(function(){i(this)})},a.union(a.fn.combo,j),k=a.fn.combo.extensions.defaults={iconCls:null,autoShowPanel:!0,onBeforeDestroy:function(){},onDestroy:function(){}},l=a.fn.combo.extensions.methods={setIcon:function(a,b){return a.each(function(){d(this,b)})},setRequired:function(a,b){return a.each(function(){e(this,b)})},setPrompt:function(a,b){return a.each(function(){c(this,b)})},destroy:function(a){return a.each(function(){g(this)})},combo:function(a){return h(a[0])}},a.extend(a.fn.combo.defaults,k),a.extend(a.fn.combo.methods,l)}(jQuery);

// 6,jeasyui.extensions.combobox.js
!function(a){function c(b){var c=a.util.parseJquery(b),d=c.combobox("options"),e=c.combobox("getValue"),f=c.combobox("getData");return a.array.first(f,function(a){return a[d.valueField]==e})}function d(b){var c=a.util.parseJquery(b),d=c.combobox("options"),e=c.combobox("getValues"),f=c.combobox("getData");return a.array.filter(f,function(b){return a.array.contains(e,b[d.valueField])})}function f(b,c){var e,d=a.util.parseJquery(b);if(c){if("string"==typeof c)return d.combobox("reload",c);e=d.combobox("options"),e.queryParams=c,d.combobox("reload")}}var e,g,h;a.fn.combobox.extensions={},e=function(b,c,d){var f,e=a(this).combobox("options");return e.url?(e.queryParams&&(f=a.util.parseMapFunction(e.queryParams),b=a.extend({},b,f)),a.ajax({type:e.method,url:e.url,data:b,dataType:"json",success:function(a){c(a)},error:function(){d.apply(this,arguments)}}),void 0):!1},g=a.fn.combobox.extensions.defaults={queryParams:null,loader:e},h=a.fn.combobox.extensions.methods={load:function(a,b){return a.each(function(){f(this,b)})},getItem:function(a){return c(a[0])},getItems:function(a){return d(a[0])}},a.extend(a.fn.combobox.defaults,g),a.extend(a.fn.combobox.methods,h)}(jQuery);

// 7,jeasyui.extensions.form.js
!function(a){var c,d,e,f,g,h;a.fn.form.extensions={},c=function(b,c){var d=a.util.parseJquery(b);return d.serializeObject(c)},d=a.fn.form.methods.submit,e=function(b,c){var f,g,e=a.util.parseJquery(b);return/^(?:form)$/i.test(this.nodeName)?d.call(e,e,c):(f=a.extend({},a.fn.form.defaults,c||{}),f.onSubmit&&0==f.onSubmit.call(b,g)||f.url&&(g=e.form("getData"),a.post(f.url,g,function(a){f.success&&f.success(a)})),void 0)},f=function(b,c){function g(c){var f,g,j,k;for(f in c)g=c[f],j=h(f,g),j.length||(k=d.find('input[numberboxName="'+f+'"]'),k.length?k.numberbox("setValue",g):(a('input[name="'+f+'"]',d).val(g),a('textarea[name="'+f+'"]',d).val(g),a('select[name="'+f+'"]',d).val(g),a('span[name="'+f+'"]',d).text(g),a('label[name="'+f+'"]',d).text(g),a('div[name="'+f+'"]',d).text(g))),i(f,g);e.onLoadSuccess.call(b,c),d.form("validate")}function h(b,c){var e=d.find('input[name="'+b+'"][type=radio], input[name="'+b+'"][type=checkbox]');return e._propAttr("checked",!1),e.each(function(){var b=a(this);(b.val()==String(c)||a.inArray(b.val(),c)>=0)&&b._propAttr("checked",!0)}),e}function i(b,c){var g,h,e=a.fn.form.comboList,f=d.find('[comboName="'+b+'"]');if(f.length)for(g=0;g<e.length;g++)if(h=e[g],f.hasClass(h+"-f"))return f[h]("options").multiple?f[h]("setValues",c):f[h]("setValue",c),void 0}var e,f,d=a.util.parseJquery(b);if(a.data(b,"form")||a.data(b,"form",{options:a.extend({},a.fn.form.defaults)}),e=a.data(b,"form").options,"string"==typeof c){if(f={},0==e.onBeforeLoad.call(b,f))return;a.ajax({url:c,data:f,dataType:"json",success:function(a){g(a)},error:function(){e.onLoadError.apply(b,arguments)}})}else g(c)},g=a.fn.form.extensions.methods={getData:function(a,b){return c(a[0],b)},submit:function(a,b){return a.each(function(){e(this,b)})},load:function(a,b){return a.each(function(){f(this,b)})}},h=a.fn.form.extensions.defaults={},a.extend(a.fn.form.defaults,h),a.extend(a.fn.form.methods,g),a.fn.form.comboList=["combobox","combotree","combogrid","datetimebox","datebox","combo"]}(jQuery);

// 8,jeasyui.extensions.menu.js
!function($,undefined){function init(a){function e(b){var c=[];return b.addClass("menu"),c.push(b),b.hasClass("menu-content")||b.children("div").each(function(){var d,b=$(this).children("div");b.length&&(b.insertAfter(a),this.submenu=b,d=e(b),c=c.concat(d))}),c}function f(b){var c=$.parser.parseOptions(b[0],["width"]).width;b.hasClass("menu-content")?b[0].originalWidth=c||b._outerWidth():(b[0].originalWidth=c||0,b.children("div").each(function(){var c,d,b=$(this);b.hasClass("menu-sep")||(c=$.extend({hideOnClick:!0},$.parser.parseOptions(this,["name","iconCls","href",{hideOnClick:"boolean"}]),{disabled:b.attr("disabled")?!0:undefined}),b[0].itemName=c.name||"",b[0].itemHref=c.href||"",b[0].hideOnClick=c.hideOnClick==undefined||null==c.hideOnClick?!0:c.hideOnClick,d=b.addClass("menu-item").html(),b.empty().append($('<div class="menu-text"></div>').html(d)),c.iconCls&&$('<div class="menu-icon"></div>').addClass(c.iconCls).appendTo(b),c.disabled&&setDisabled(a,b[0],!0),b[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(b),bindMenuItemEvent(a,b))}),$('<div class="menu-line"></div>').prependTo(b)),setMenuWidth(a,b),b.hide(),bindMenuEvent(a,b)}var c,d,b=$(a).appendTo("body").addClass("menu-top");for($(document).unbind(".menu").bind("mousedown.menu",function(a){var b=$("body>div.menu:visible"),c=$(a.target).closest("div.menu",b);c.length||$("body>div.menu-top:visible").menu("hide")}),c=e(b),d=0;d<c.length;d++)f(c[d])}function setMenuWidth(a,b){var e,c=$.data(a,"menu").options,d=b.css("display");b.css({display:"block",left:-1e4}),e=0,b.find("div.menu-text").each(function(){var a=$(this);e<a._outerWidth()&&(e=a._outerWidth()),a.closest("div.menu-item")._outerHeight(a._outerHeight()+2)}),e+=45,b._outerWidth(Math.max(b[0].originalWidth||0,e,c.minWidth)),b.css("display",d)}function bindMenuEvent(a,b){var c=$.data(a,"menu"),d=c.options;d.hideOnUnhover&&b.unbind(".menu").bind("mouseenter.menu",function(){c.timer&&(clearTimeout(c.timer),c.timer=null)}).bind("mouseleave.menu",function(){c.timer=setTimeout(function(){hideAll(a)},100)})}function bindMenuItemEvent(a,b){b.unbind(".menu"),b.bind("click.menu",function(){var c,d,b=$(this);b.hasClass("menu-item-disabled")||(this.submenu||(this.hideOnClick&&hideAll(a),c=b.attr("href"),c&&(location.href=c)),d=$(a).menu("getItem",this),$.data(a,"menu").options.onClick.call(a,d))}).bind("mouseenter.menu",function(){if(b.siblings().each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}),b.addClass("menu-active"),$(this).hasClass("menu-item-disabled"))return b.addClass("menu-active-disabled"),void 0;var d=b[0].submenu;d&&$(a).menu("show",{menu:d,parent:b})}).bind("mouseleave.menu",function(a){b.removeClass("menu-active menu-active-disabled");var c=b[0].submenu;c?a.pageX>=parseInt(c.css("left"))?b.addClass("menu-active"):hideMenu(c):b.removeClass("menu-active")})}function hideAll(a){var b=$.data(a,"menu");return b&&$(a).is(":visible")&&(hideMenu($(a)),b.options.onHide.call(a)),!1}function showMenu(a,b){var c,d,e,f,g,h;b=b||{},e=$(b.menu||a),e.hasClass("menu-top")?(f=$.data(a,"menu").options,$.extend(f,b),c=f.left,d=f.top,f.alignTo&&(g=$(f.alignTo),c=g.offset().left,d=g.offset().top+g._outerHeight()),c+e.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&(c=$(window)._outerWidth()+$(document).scrollLeft()-e.outerWidth()-5),d+e.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(d-=e.outerHeight())):(h=b.parent,c=h.offset().left+h.outerWidth()-2,c+e.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(c=h.offset().left-e.outerWidth()+2),d=h.offset().top-3,d+e.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(d=$(window)._outerHeight()+$(document).scrollTop()-e.outerHeight()-5)),e.css({left:c,top:d}),e.show(0,function(){e[0].shadow||(e[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(e)),e[0].shadow.css({display:"block",zIndex:$.fn.menu.defaults.zIndex++,left:e.css("left"),top:e.css("top"),width:e.outerWidth(),height:e.outerHeight()}),e.css("z-index",$.fn.menu.defaults.zIndex++),e.hasClass("menu-top")&&$.data(e[0],"menu").options.onShow.call(e[0])})}function hideMenu(a){function b(a){a.stop(!0,!0),a[0].shadow&&a[0].shadow.hide(),a.hide()}a&&(b(a),a.find("div.menu-item").each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}))}function findItem(a,b){function e(f){f.children("div.menu-item").each(function(){var f=$(a).menu("getItem",this),g=d.empty().html(f.text).text();b==$.trim(g)?c=f:this.submenu&&!c&&e(this.submenu)})}var c=null,d=$("<div></div>");return e($(a)),d.remove(),c}function setDisabled(a,b,c){var d=$(b);c?(d.addClass("menu-item-disabled"),b.onclick&&(b.onclick1=b.onclick,b.onclick=null)):(d.removeClass("menu-item-disabled"),b.onclick1&&(b.onclick=b.onclick1,b.onclick1=null))}function appendItem(target,param){var submenu,item,menu=$(target);param.parent&&(param.parent.submenu||(submenu=$('<div class="menu"><div class="menu-line"></div></div>').appendTo("body"),submenu.hide(),param.parent.submenu=submenu,$('<div class="menu-rightarrow"></div>').appendTo(param.parent)),menu=param.parent.submenu),item=$('<div class="menu-item"></div>').appendTo(menu),$('<div class="menu-text"></div>').html(param.text).appendTo(item),param.iconCls&&$('<div class="menu-icon"></div>').addClass(param.iconCls).appendTo(item),param.id&&item.attr("id",param.id),param.name&&(item[0].itemName=param.name),param.href&&(item[0].itemHref=param.href),param.onclick&&("string"==typeof param.onclick?item.attr("onclick",param.onclick):item[0].onclick=eval(param.onclick)),param.handler&&(item[0].onclick=eval(param.handler)),bindMenuItemEvent(target,item),param.disabled&&setDisabled(target,item[0],!0),bindMenuEvent(target,menu),setMenuWidth(target,menu)}function removeItem(a,b){function c(a){if(a.submenu){a.submenu.children("div.menu-item").each(function(){c(this)});var b=a.submenu[0].shadow;b&&b.remove(),a.submenu.remove()}$(a).remove()}c(b)}function destroyMenu(a){$(a).children("div.menu-item").each(function(){removeItem(a,this)}),a.shadow&&a.shadow.remove(),$(a).remove()}var buildMenu,appendItemToMenu;$.fn.menu=function(a,b){return"string"==typeof a?$.fn.menu.methods[a](this,b):(a=a||{},this.each(function(){var b=$.data(this,"menu");b?$.extend(b.options,a):(b=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),a)}),init(this)),$(this).css({left:b.options.left,top:b.options.top})}))},$.fn.menu.methods={options:function(a){return $.data(a[0],"menu").options},show:function(a,b){return a.each(function(){showMenu(this,b)})},hide:function(a){return a.each(function(){hideAll(this)})},destroy:function(a){return a.each(function(){destroyMenu(this)})},setText:function(a,b){return a.each(function(){$(b.target).children("div.menu-text").html(b.text)})},setIcon:function(a,b){return a.each(function(){var a=$(this).menu("getItem",b.target);a.iconCls?$(a.target).children("div.menu-icon").removeClass(a.iconCls).addClass(b.iconCls):$('<div class="menu-icon"></div>').addClass(b.iconCls).appendTo(b.target)})},getItem:function(a,b){var f,g,h,c=$(b),d={target:b,id:c.attr("id"),text:$.trim(c.children("div.menu-text").html()),disabled:c.hasClass("menu-item-disabled"),name:b.itemName,href:b.itemHref,hideOnClick:b.hideOnClick,onclick:b.onclick},e=c.children("div.menu-icon");if(e.length){for(f=[],g=e.attr("class").split(" "),h=0;h<g.length;h++)"menu-icon"!=g[h]&&f.push(g[h]);d.iconCls=f.join(" ")}return d},findItem:function(a,b){return findItem(a[0],b)},appendItem:function(a,b){return a.each(function(){appendItem(this,b)})},removeItem:function(a,b){return a.each(function(){removeItem(this,b)})},enableItem:function(a,b){return a.each(function(){setDisabled(this,b,!1)})},disableItem:function(a,b){return a.each(function(){setDisabled(this,b,!0)})}},$.fn.menu.parseOptions=function(a){return $.extend({},$.parser.parseOptions(a,["left","top",{minWidth:"number",hideOnMouseLeave:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,minWidth:120,onShow:function(){},onHide:function(){},onClick:function(){},hideOnMouseLeave:!0},buildMenu=function(a){var f,b=$.util.guid("N",12),c="easyui_menu_id_"+b,d="easyui_menu_name_"+b,e=$.extend({},$.fn.menu.defaults,{id:c,name:d,left:window.event?window.event.clientX:0,top:window.event?window.event.clientY:0,items:null,hideDisabledMenu:!1,hideOnMouseLeave:!1,minWidth:140},a||{});return e.items=$.array.isArray(e.items)?e.items:[],f=$("<div></div>").attr({id:c,name:d}).appendTo("body"),e.items.length||e.items.push({text:"当前无菜单项",disabled:!0}),$.each(e.items,function(a,b){e.hideDisabledMenu&&b.disabled||appendItemToMenu(f,b,c,f)}),{menu:f,options:e}},appendItemToMenu=function(a,b,c,d){var e,f,g,h,i,j,k,l;return $.util.isString(b)&&"-"==$.trim(b)?($("<div></div>").addClass("menu-sep").appendTo(a),void 0):(e=$.util.guid("N",12),f=c+"_"+e,b=b||{},b=$.extend({id:f,text:"",iconCls:null,href:null,disabled:!1,onclick:null,handler:null,bold:!1,style:null,children:null,hideDisabledMenu:!1,hideOnClick:!0},b),g=b.onclick,h=b.handler,b.onclick=undefined,b.handler=undefined,b=$.util.parseMapFunction(b),b.onclick=g,b.handler=h,b.hideDisabledMenu&&b.disabled||(i=$("<div></div>").attr({id:b.id,iconCls:b.iconCls,href:b.href,disabled:b.disabled,hideOnClick:b.hideOnClick}).appendTo(a),b.style&&i.css(b.style),$.isFunction(b.handler)&&(h=b.handler,b.onclick=function(a,b,c){h.call(this,a,b,c)}),$.isFunction(b.onclick)&&i.click(function(a){i.hasClass("menu-item-disabled")||b.onclick.call(this,a,b,d)}),j=b.children&&b.children.length?!0:!1,k=$("<span></span>").text(b.text).appendTo(i),b.bold&&k.css("font-weight","bold"),j&&(l=$("<div></div>").appendTo(i),$.each(b.children,function(a,c){var e=$.util.isString(c)&&"-"==$.trim(c)?c:$.extend({hideDisabledMenu:b.hideDisabledMenu},c);appendItemToMenu(l,e,f,d)}))),void 0)},$.extend($.easyui,{createMenu:buildMenu,showMenu:function(a){var e,b=a||{},c=$.fn.menu.defaults.onHide,d=b.onHide;return b.onHide=function(){var a=$.util.parseJquery(this);$.isFunction(c)&&c.apply(this,arguments),$.isFunction(d)&&d.apply(this,arguments),$.util.exec(function(){a.menu("destroy")})},e=buildMenu(b),e.menu.menu(e.options).menu("show",{left:e.options.left,top:e.options.top}),e.menu}})}(jQuery);

// 9,jeasyui.extensions.panel.js
!function(a){function m(a){a._extensionsPanel={href:a.href,content:a.content},a.iniframe&&(a.href=null,a.content=null)}function n(b){var c=a(b),d=c.panel("options"),e=d._extensionsPanel?d._extensionsPanel:d._extensionsPanel={href:d.href,content:d.content};d.href=e.href,d.content=e.content,d.iniframe&&q(b,d.href)}function q(b,c){var f,d=a.util.parseJquery(b),e=d.panel("options");c=c?e.href=c:e.href,e.iniframe?(f=e._extensionsPanel?e._extensionsPanel:e._extensionsPanel={href:e.href,content:e.content},f.href=e.href,f.content=e.content,e.href=null,e.content="<iframe class='panel-iframe' frameborder='0' width='100%' height='100%' marginwidth='0px' marginheight='0px' scrolling='auto'></iframe>",p.call(d,d),e.href=f.href,e.content=f.content,a.util.exec(function(){r(b).attr("src",c)})):p.call(d,d,c)}function r(b){var c=a.util.parseJquery(b),d=c.panel("body");return d.children("iframe.panel-iframe")}function t(b){var d,e,f,c=a.util.parseJquery(b);return i(b)?(d=c.panel("panel"),e=d.index(),f=d.closest(".tabs-container"),f.find(">div.tabs-header>div.tabs-wrap>ul.tabs>li").eq(e)):s.call(c,c)}function v(b,c){var e,f,d=a.util.parseJquery(b);return i(b)?(c&&(e=d.panel("options"),f=d.panel("header"),e.title=c,f.find(">a.tabs-inner>span.tabs-title").text(c)),void 0):u.call(d,d,c)}var c,d,e,f,g,h,i,j,k,l,o,p,s,u,w,x,y;a.fn.panel.extensions={},c=function(){a("iframe,frame",this).each(function(){try{this.contentWindow&&this.contentWindow.document&&this.contentWindow.close&&(this.contentWindow.document.write(""),this.contentWindow.close()),a.isFunction(window.CollectGarbage)&&window.CollectGarbage()}catch(b){}}).remove()},a.fn.panel.defaults.onBeforeDestroy=c,a.fn.window.defaults.onBeforeDestroy=c,a.fn.dialog.defaults.onBeforeDestroy=c,a.fn.datagrid.defaults.onBeforeDestroy=c,a.fn.propertygrid.defaults.onBeforeDestroy=c,a.fn.treegrid.defaults.onBeforeDestroy=c,d={panel:a.fn.panel.defaults.onResize,window:a.fn.window.defaults.onResize,dialog:a.fn.dialog.defaults.onResize},e=function(b,c){var j,k,e=a.util.parseJquery(this),f=e.panel("isWindow"),g=e.panel("isDialog"),h=g?"dialog":f?"window":"panel",i=d[h];a.isFunction(i)&&i.apply(this,arguments),e.panel("inLayout")||(j=e.panel("options"),j.minWidth=a.isNumeric(j.minWidth)?j.minWidth:x.minHeight,j.maxWidth=a.isNumeric(j.maxWidth)?j.maxWidth:x.maxWidth,j.minHeight=a.isNumeric(j.minHeight)?j.minHeight:x.minHeight,j.maxHeight=a.isNumeric(j.maxHeight)?j.maxHeight:x.maxHeight,k=!1,b>j.maxWidth&&(b=j.maxWidth,k=!0),b<j.minWidth&&(b=j.minWidth,k=!0),c>j.maxHeight&&(c=j.maxHeight,k=!0),c<j.minHeight&&(c=j.minHeight,k=!0),k&&!j.fit&&e[h]("resize",{width:b,height:c}))},f={panel:a.fn.panel.defaults.onMove,window:a.fn.window.defaults.onMove,dialog:a.fn.dialog.defaults.onMove},g=function(b,c){var k,l,m,n,o,p,q,d=a.util.parseJquery(this),e=d.panel("isWindow"),g=d.panel("isDialog"),h=g?"dialog":e?"window":"panel",i=f[h],j=d.panel("options");return a.isFunction(i)&&i.apply(this,arguments),j.maximized?d[h]("restore"):j.inContainer?(k=d.panel("panel"),l=k.parent(),m=l.is("body"),n=a.extend({},m?a.util.windowSize():{width:l.innerWidth(),height:l.innerHeight()}),o=a.isNumeric(j.width)?j.width:k.outerWidth(),p=a.isNumeric(j.height)?j.height:k.outerHeight(),q=!1,0>b&&(b=0,q=!0),0>c&&(c=0,q=!0),q?d[h]("move",{left:b,top:c}):(b+o>n.width&&b>0&&(b=n.width-o,q=!0),c+p>n.height&&c>0&&(c=n.height-p,q=!0),q?d[h]("move",{left:b,top:c}):void 0)):void 0},h=function(b){var c=a.util.parseJquery(b),d=c.panel("body"),e=c.panel("panel");return d.hasClass("layout-body")&&e.hasClass("layout-panel")},i=function(b){var c=a.util.parseJquery(b),d=c.panel("panel"),e=d.parent(),f=e.parent();return e.hasClass("tabs-panels")&&f.hasClass("tabs-container")},j=function(b){var c=a.util.parseJquery(b),d=c.panel("panel"),e=d.parent();return e.hasClass("accordion")&&a.data(e[0],"accordion")?!0:!1},k=function(b){var c=a.util.parseJquery(b),d=c.panel("body");return d.hasClass("window-body")&&d.parent().hasClass("window")},l=function(b){var c=a.util.parseJquery(b),d=c.panel("body");return k(b)&&(d.children("div.panel").children("div.panel-body.dialog-content").length?!0:!1)},o=a.fn.panel,a.fn.panel=function(b){return"string"==typeof b?o.apply(this,arguments):(b=b||{},this.each(function(){var c=a.util.parseJquery(this),d=a.extend({},a.fn.panel.parseOptions(this),b);m(d),o.call(c,d),n(this)}))},a.union(a.fn.panel,o),p=a.fn.panel.methods.refresh,s=a.fn.panel.methods.header,u=a.fn.panel.methods.setTitle,w=a.fn.panel.extensions.methods={inLayout:function(a){return h(a[0])},inTabs:function(a){return i(a[0])},inAccordion:function(a){return j(a[0])},isWindow:function(a){return k(a[0])},isDialog:function(a){return l(a[0])},iframe:function(a){return r(a[0])},refresh:function(a,b){return a.each(function(){q(this,b)})},header:function(a){return t(a[0])},setTitle:function(a,b){return a.each(function(){v(this,b)})}},x=a.fn.panel.extensions.defaults={iniframe:!1,minWidth:10,maxWidth:1e4,minHeight:10,maxHeight:1e4,onResize:e,inContainer:!0,onMove:g},a.extend(a.fn.panel.defaults,x),a.extend(a.fn.panel.methods,w),y="iframe.panel-iframe { margin: 0px; padding: 0px; width: 100%; height: 100%; border: 0px; overflow: auto; }",a.util.addCss(y)}(jQuery);

//10,jeasyui.extensions.window.js
!function(a){function d(b,c,e){return a.array.map(c,function(c){if(!c||a.util.isString(c))return c;var g=a.extend({},c);return g.id=a.isFunction(c.id)?c.id.call(g,b,e):c.id,g.text=a.isFunction(c.text)?c.text.call(g,b,e):c.text,g.iconCls=a.isFunction(c.iconCls)?c.iconCls.call(g,b,e):c.iconCls,g.disabled=a.isFunction(c.disabled)?c.disabled.call(g,b,e):c.disabled,g.hideOnClick=a.isFunction(c.hideOnClick)?c.hideOnClick.call(g,b,e):c.hideOnClick,g.onclick=a.isFunction(c.onclick)?function(a,b,d){c.onclick.call(this,a,e,b,d)}:c.onclick,g.handler=a.isFunction(c.handler)?function(a,b,d){c.handler.call(this,a,e,b,d)}:c.handler,g.children&&g.children.length&&(g.children=d(b,g.children,e)),g})}var c,e,f,g,h;a.fn.window.extensions={},c=function(b){var g,h,i,c=a.util.parseJquery(b),e=a.data(b,"window"),f=c.window("options");f._initialized||(c.window("header").on({dblclick:function(){var a=c.window("options");a.autoRestore&&(a.maximized?c.window("restore"):a.maximizable&&c.window("maximize"))},contextmenu:function(b){var f,g,e=c.window("options");e.enableHeaderContextMenu&&(b.preventDefault(),f=[{text:"最大化",iconCls:"panel-tool-max",disabled:!e.maximized&&e.maximizable?!1:!0,onclick:function(){c.window("maximize")}},{text:"恢复",iconCls:"panel-tool-restore",disabled:e.maximized?!1:!0,onclick:function(){c.window("restore")}},"-",{text:"关闭",iconCls:"panel-tool-close",disabled:!e.closable,onclick:function(){c.window("close")}}],g=a.array.likeArray(e.headerContextMenu)?e.headerContextMenu:[],g.length&&a.array.insertRange(f,0,a.util.merge([],g,"-")),f=d(b,f,c),a.easyui.showMenu({items:f,left:b.pageX,top:b.pageY}))}}),f._initialized=!0),f.draggable&&(g=e.window.draggable("options"),h=g.onStartDrag,i=g.onStopDrag,g.onStartDrag=function(){h.apply(this,arguments),c.window("body").addClass("window-body-hidden").children().addClass("window-body-hidden-proxy")},g.onStopDrag=function(){i.apply(this,arguments),c.window("body").removeClass("window-body-hidden").children().removeClass("window-body-hidden-proxy")})},e=a.fn.window,a.fn.window=function(b){return"string"==typeof b?e.apply(this,arguments):(b=b||{},this.each(function(){var d=a.util.parseJquery(this);e.call(d,b),c(this)}))},a.union(a.fn.window,e),f=a.fn.window.extensions.methods={},g=a.fn.window.extensions.defaults=a.extend({},a.fn.panel.extensions.defaults,{autoHCenter:!0,autoVCenter:!0,autoCloseOnEsc:!0,autoRestore:!0,enableHeaderContextMenu:!0,headerContextMenu:null}),a.extend(a.fn.window.defaults,g),a.extend(a.fn.window.methods,f),a(function(){a(window).resize(function(){a(".panel-body.window-body").each(function(){var d,b=a(this),c=b.window("options");c&&c.draggable&&(c.autoHCenter||c.autoVCenter?(d=c.autoHCenter&&c.autoVCenter?"center":c.autoHCenter?"hcenter":"vcenter",b.window(d)):c.inContainer&&b.window("move"))})}),a(document).keydown(function(b){27==b.which&&a("div.window-mask:last").prevAll("div.panel.window:first").children(".panel-body.window-body").each(function(){var b=a(this),c=b.window("options");c&&c.closable&&c.autoCloseOnEsc&&!b.window("header").find(".panel-tool a").attr("disabled")&&a.util.exec(function(){b.window("close")})})}),a("body").on("click","div.window-mask:last",function(){a(this).prevAll("div.panel.window:first").shine()})}),h=".window-body-hidden { background-color: #95b8e7; filter: alpha(opacity=60); opacity: 0.6; }.window-body-hidden-proxy { visibility: hidden; }.window-proxy { background-color: #0e2d5f; filter: alpha(opacity=60); opacity: 0.6; }",a.util.addCss(h)}(jQuery);

//11,jeasyui.extensions.dialog.js
!function(a,b){function e(b){for(var c=a.array.filter(d,function(a){return a.current==b}),e=c.length;e--;)a.array.remove(d,c[e])}function h(b,c){var d=a.util.parseJquery(b),e=d.dialog("options"),f=d.dialog("contentPanel"),g=f.panel("options");c=c?e.href=c:e.href,g.iniframe=e.iniframe,f.panel("refresh",c)}function i(b){var c=a.data(b,"dialog");return c?c.contentPanel:null}function j(a){var b=i(a);return b.panel("iframe")}function k(a){a._extensionsDialog={href:a.href,content:a.content,iniframe:a.iniframe},a.iniframe&&(a.href=null,a.content=null,a.iniframe=!1)}function l(b){var c=a.util.parseJquery(b),d=c.dialog("options"),e=d._extensionsDialog?d._extensionsDialog:d._extensionsDialog={href:d.href,content:d.content,iniframe:d.iniframe};d.href=e.href,d.content=e.content,d.iniframe=e.iniframe,d.iniframe&&h(b,d.href)}var c,d,f,m,n,o;a.fn.dialog.extensions={},c=a.util.$.easyui?a.util.$.easyui:a.easyui,d=c.frameMapCache?c.frameMapCache:c.frameMapCache=[],f=function(){var c,b=a.util.currentFrame;return b?(c=a.array.first(d,function(a){return a.current==b}),c&&c.parent&&c.parent.contentWindow?c.parent.contentWindow:a.util.parent):a.util.top},a.easyui.parent=f(),a.easyui.parent.closeDialog=a.easyui.closeCurrentDialog=function(){a.util.isTopMost||a.easyui.parent.$(a.util.currentFrame).closest("div.window-body").dialog("close")},a.easyui._showDialog=function(c,f){var g,h,i,j,k,l,m,n,o,p,q,r;return(null==c.onApply||c.onApply==b)&&(c.onApply=c.onSave),(null==c.onSave||c.onSave==b)&&(c.onSave=c.onApply),g=c.onClose,c.onClose=function(){a.isFunction(g)&&g.apply(this,arguments),c.autoDestroy&&a(this).dialog("destroy")},h=c.onBeforeDestroy,c.onBeforeDestroy=function(){if(c.iniframe){var b=a(this).dialog("iframe");e(b[0])}a.isFunction(h)&&h.apply(this,arguments)},c.locale&&(c.inline=!0),i=a("<div></div>").appendTo(c.locale?c.locale:"body"),a.util.likeArray(c.toolbar)||(c.toolbar=[]),a.isArray(c.toolbar)&&(a.each(c.toolbar,function(){var b=this.handler;a.isFunction(b)&&(this.handler=function(){b.call(i,i)})}),c.toolbar.length||(c.toolbar=null)),j=[],1==c.enableApplyButton&&(k={text:c.applyButtonText,iconCls:c.applyButtonIconCls,handler:function(b){a.isFunction(c.onApply)&&c.onApply.call(b,b)}},j.push(k)),1==c.enableSaveButton&&(l={text:c.saveButtonText,iconCls:c.saveButtonIconCls,handler:function(b){var d=a.isFunction(c.onSave);(!d||d&&c.onSave.call(b,b)!==!1)&&a.util.exec(function(){b.dialog("close")})}},j.push(l)),1==c.enableCloseButton&&(m={text:c.closeButtonText,iconCls:c.closeButtonIconCls,handler:function(a){a.dialog("close")}},j.push(m)),(!a.util.likeArray(c.buttons)||a.util.isString(c.buttons))&&(c.buttons=[]),a.array.merge(c.buttons,j),a.each(c.buttons,function(){var b=this.handler;a.isFunction(b)&&(this.handler=function(){b.call(i,i)})}),c.buttons.length||(c.buttons=null),c=i.dialog(c).dialog("options"),n=i.dialog("body").children(".dialog-button").each(function(){var b=i.css("border-bottom-color");a(this).addClass("calendar-header").css({height:"auto","border-top-color":b})}),c.iniframe||c.href&&(o=i.dialog("header").find(".panel-tool a"),p=n.children("a"),o.attr("disabled","disabled"),p.linkbutton("disable"),q=c.onLoad,c.onLoad=function(){a.isFunction(q)&&q.apply(this,arguments),a.util.exec(function(){o.removeAttr("disabled"),p.linkbutton("enable")})}),r=i.dialog("iframe"),r.length&&d.push({current:r[0],parent:f}),i},a.easyui.showDialog=function(b){var d,e,c=a.extend({},a.easyui.showDialog.defaults,b);return c.locale&&(c.topMost=!1),d=a.util.currentFrame,e=c.topMost?a.util.$.easyui._showDialog:a.easyui._showDialog,e(c,d)},a.easyui.showOption=function(b,c){var d,e,f,g,h;if(b=b||"无数据显示。",c=c||{},d=a.extend({topMost:a.easyui.showDialog.defaults.topMost},c),e=d.topMost?a.util.$:a,f=e("<table></table>").css({padding:"10px",width:"100%"}),g=e.type(b),a.array.contains(["array","object","function"],g))for(h in b)f.append("<tr><td style='text-align: right; width: 100px;'>"+h+":</td><td>"+b[h]+"</td></tr>");else f.append("<tr><td style='text-align: right; width: 100px;'>options:</td><td>"+String(b)+"</td></tr>");return a.extend(d,{title:"显示 options 值",width:480,height:260,content:f,autoVCenter:!1,autoHCenter:!1,enableSaveButton:!1,enableApplyButton:!1}),a.easyui.showDialog(d)},a.fn.dialog.methods.refresh,m=a.fn.dialog,a.fn.dialog=function(b){return"string"==typeof b?m.apply(this,arguments):(b=b||{},this.each(function(){var c=a.util.parseJquery(this),d=a.extend({},a.fn.dialog.parseOptions(this),b);k(d),m.call(c,d),l(this)}))},a.union(a.fn.dialog,m),n=a.fn.dialog.extensions.methods={options:function(b){var c=a.data(b[0],"dialog"),d=c.options,e=b.panel("options");return a.extend(d,{closed:e.closed,collapsed:e.collapsed,minimized:e.minimized,maximized:e.maximized,width:e.width,height:e.height}),d},contentPanel:function(a){return i(a[0])},iframe:function(a){return j(a[0])},refresh:function(a,b){return a.each(function(){h(this,b)})}},o=a.fn.dialog.extensions.defaults=a.extend({},a.fn.window.extensions.defaults,{}),a.extend(a.fn.dialog.defaults,o),a.extend(a.fn.dialog.methods,n),a.easyui.showDialog.defaults={title:"新建对话框",iconCls:"icon-standard-application-form",width:600,height:360,modal:!0,collapsible:!1,maximizable:!1,closable:!0,draggable:!0,resizable:!0,shadow:!0,minimizable:!1,href:null,autoDestroy:!0,locale:null,topMost:!0,iniframe:!1,enableSaveButton:!0,enableApplyButton:!0,enableCloseButton:!0,onSave:null,onApply:null,onClose:null,saveButtonText:"保存",applyButtonText:"应用",closeButtonText:"关闭",saveButtonIconCls:"icon-save",applyButtonIconCls:"icon-ok",closeButtonIconCls:"icon-cancel"}}(jQuery);

//12,jeasyui.extensions.layout.js
!function(a){function c(b){var c=a(b);return a.array.reduce(["north","west","east","center","south"],function(a,b){var e=c.layout("panel",b);return e&&e.length&&a.push({region:b,panel:e}),a},[])}function d(a,b){var d,c=a.layout("panel",b);c&&c.length&&(d=c.panel("options"),d.collapsed||a.layout("collapse",b))}function e(b){var c=a(b);d(c,"north"),d(c,"west"),d(c,"east"),d(c,"south"),a.util.exec(function(){c.layout("resize")},a.fn.layout.extensions.resizeDelay)}function f(a,b){var d,c=a.layout("panel",b);c&&c.length&&(d=c.panel("options"),d.collapsed&&a.layout("expand",b))}function g(b){var c=a(b);f(c,"north"),f(c,"west"),f(c,"east"),f(c,"south"),a.util.exec(function(){c.layout("resize")},a.fn.layout.extensions.resizeDelay)}function h(b,c){var d,e,f;a.array.contains(["north","west","east","center","south"],c)&&(d=a(b),e=d.layout("panel",c),e&&e.length&&(f=e.panel("options"),f.collapsed?d.layout("expand",c):d.layout("collapse",c)))}function i(b,c){function h(){a.each(e,function(b,c){d.layout("toggle",c),a.util.exec(function(){d.layout("resize")},a.fn.layout.extensions.resizeDelay)})}a.array.contains(["collapse","expand","toggle"],c)||(c="toggle");var d=a(b),e=["north","west","east","south"],f=a.array.some(e,function(a){var c,b=d.layout("panel",a);return b&&b.length?(c=b.panel("options"),c.collapsed?!0:!1):!1}),g=a.array.some(e,function(a){var c,b=d.layout("panel",a);return b&&b.length?(c=b.panel("options"),c.collapsed?!1:!0):!1});switch(c){case"collapse":g?d.layout("collapseAll"):d.layout("expandAll");break;case"expand":f?d.layout("expandAll"):d.layout("collapseAll");break;case"toggle":h();break;default:h()}}var j,k;a.fn.layout.extensions={resizeDelay:500},j=a.fn.layout.extensions.defaults={},k=a.fn.layout.extensions.methods={panels:function(a){return c(a[0])},collapseAll:function(a){return a.each(function(){e(this)})},expandAll:function(a){return a.each(function(){g(this)})},toggle:function(a,b){return a.each(function(){h(this,b)})},toggleAll:function(a,b){return a.each(function(){i(this,b)})}},a.extend(a.fn.layout.defaults,j),a.extend(a.fn.layout.methods,k)}(jQuery);

//13,jeasyui.extensions.tree.js
!function(a,b){function c(b,c){var d=a.util.parseJquery(b);return c=a.util.parseJquery(c)[0],a.array.contains(d.tree("getRoots"),c,function(a,b){return a.target==b})}function d(b,c){var e,f,d=a.util.parseJquery(b);c?(c=a.util.parseJquery(c)[0],e=d.tree("getNode",c),f=a.util.parseJquery(c).offset()):(e=d.tree("options"),f=d.offset()),a.extend(f,{left:f.left+25,top:f.top+15}),a.easyui.showOption(e,f)}function e(b,c){var d=a.util.parseJquery(b),e=a.util.parseJquery(c);return d[0]&&e[0]&&e.is(".tree-node[node-id]")&&a.contains(d[0],e[0])?e.parentsUntil("ul.tree","ul").length+1:0}function f(b,c){var d,e,f;if(c&&c.source&&c.target&&c.point&&(a.array.contains(["append","top","bottom"],c.point)||(c.point="append"),c.source=a.util.parseJquery(c.source)[0],c.target=a.util.parseJquery(c.target)[0],c.source!=c.target&&(d=a.util.parseJquery(b),e=d.tree("options"),!(a.isFunction(e.onBeforeDrop)&&0==e.onBeforeDrop.call(b,c.target,c.source,c.point)||d.tree("isParent",{target1:c.source,target2:c.target}))))){switch(f=d.tree("pop",c.source),c.point){case"append":d.tree("append",{parent:c.target,data:[f]});break;case"top":d.tree("insert",{before:c.target,data:f});break;case"bottom":d.tree("insert",{after:c.target,data:f});break;default:d.tree("append",{parent:c.target,data:[f]})}f&&a.isFunction(e.onDrop)&&e.onDrop.call(b,c.target,c.source,c.point)}}function g(b,c){if(c&&c.target&&c.point&&a.array.contains(["up","upLevel","down","downLevel"],c.point)){c.target=a.util.parseJquery(c.target)[0];var f,d=a.util.parseJquery(b),e=c.target;switch(c.point){case"up":f=d.tree("prev",e);break;case"upLevel":f=d.tree("getParent",e);break;case"down":f=d.tree("next",e);break;case"downLevel":f=d.tree("prev",e)}f&&d.tree("move",{source:e,target:f.target,point:"up"==c.point?"top":"downLevel"==c.point?"append":"bottom"})}}function h(a,b){return i(a,b)?"child":j(a,b)?"parent":k(a,b)?"sibling":"normal"}function i(b,c){var d=a.util.parseJquery(b),e=a.util.parseJquery(c.target1)[0],f=a.util.parseJquery(c.target2)[0],g=d.tree("getChildren",f);return a.array.some(g,function(a){return a.target==e})}function j(b,c){var d=a.util.parseJquery(b),e=a.util.parseJquery(c.target1)[0],f=a.util.parseJquery(c.target2)[0],g=d.tree("getChildren",e);return a.array.some(g,function(a){return a.target==f})}function k(b,c){var d=a.util.parseJquery(b),e=a.util.parseJquery(c.target1)[0],f=a.util.parseJquery(c.target2)[0],g=d.tree("getParent",e),h=d.tree("getParent",f);return g.target==h.target}function l(b,c){var e,d=a.util.parseJquery(c);return d.hasClass("tree-node")?(c=d[0],e=d.closest("li").next().children("div.tree-node"),e.length?e.length?a.util.parseJquery(b).tree("getNode",e[0]):null:null):null}function m(b,c){var e,d=a.util.parseJquery(c);return d.hasClass("tree-node")?(c=d[0],e=d.closest("li").prev().children("div.tree-node"),e.length?e.length?a.util.parseJquery(b).tree("getNode",e[0]):null:null):null}function n(b,c){var d=a.util.parseJquery(b);return c=a.util.parseJquery(c),a.contains(d[0],c[0])&&c.is("div.tree-node")?c.closest("ul").find("li>div.tree-node").map(function(){return d.tree("getNode",this)}):null}function o(b,c){var d=a.util.parseJquery(b);return c=a.util.parseJquery(c),a.contains(d[0],c[0])&&c.is("div.tree-node")?c.siblings("ul").find("li>div.tree-node").map(function(){return d.tree("getNode",this)}):null}function p(b,c){a.util.parseJquery(c).removeClass("tree-node-selected")}function q(b,c){var e,f,d=a.util.parseJquery(b);return c?"string"==typeof c?(d.tree("options").url=c,q(b,{})):(e=d.tree("options"),f=e.queryParams,e.queryParams=a.extend({},f,c),d.tree("reload"),void 0):d.tree("reload")}function r(b,c){c&&c.target&&c.iconCls&&a(b).tree("update",{target:c.target,iconCls:c.iconCls})}function s(b,c){c&&c.target&&c.text&&a(b).tree("update",{target:c.target,text:c.text})}function t(b,c,d){d.onClickBak=c.onClick,c.onClick=function(e){a.isFunction(d.onClickBak)&&d.onClickBak.apply(this,arguments),c.toggleOnClick&&b.tree("toggle",e.target)}}function u(b,c,d){d.onContextMenuBak=c.onContextMenu,c.onContextMenu=function(e,f){if(a.isFunction(d.onContextMenuBak)&&d.onContextMenuBak.apply(this,arguments),c.selectOnContextMenu&&b.tree("select",f.target),c.enableContextMenu){e.preventDefault();var g=w(b,c,e,f);c.autoBindDblClick&&c.dblClickMenuIndex>=0&&a.util.likeArray(c.contextMenu)&&!a.util.isString(c.contextMenu)&&c.contextMenu.length>c.dblClickMenuIndex&&(g[c.dblClickMenuIndex].bold=!0),a.easyui.showMenu({items:g,left:e.pageX,top:e.pageY})}}}function v(b,c,d){a.array.likeArray(c.contextMenu)&&!a.util.isString(c.contextMenu)&&c.contextMenu.length&&c.autoBindDblClick&&(c.onDblClickBak=c.onDblClick,c.onDblClick=function(e){var f,g,h;a.isFunction(d.onDblClickBak)&&d.onDblClickBak.apply(this,arguments),f=w(b,c,null,e),c.dblClickMenuIndex>=0&&f.length>c.dblClickMenuIndex&&(g=f[c.dblClickMenuIndex],h=g.handler||g||onclick,h(null,e,b,g,null))})}function w(b,c,d,e){var h,i,j,k,l,m,n,o,p,q,r,s,f=c.toggleMenu,g=c.moveMenu;return"object"==typeof f&&(f=a.extend({},{expand:!0,expandAll:!0,collapse:!0,collapseAll:!0,submenu:!1},f)),"object"==typeof g&&(g=a.extend({},{up:!1,upLevel:!1,down:!1,downLevel:!1,submenu:!1},g)),h={text:"展开当前所有",iconCls:"icon-metro-expand",disabled:!(1==f||1==f.expandAll),handler:function(){b.tree("expandAll",e.target)}},i={text:"展开当前",iconCls:"icon-metro-expand2",disabled:!(1==f||1==f.expand),handler:function(){b.tree("expand",e.target)}},j={text:"折叠当前",iconCls:"icon-metro-contract2",disabled:!(1==f||1==f.collapse),handler:function(){b.tree("collapse",e.target)}},k={text:"折叠当前所有",iconCls:"icon-metro-contract",disabled:!(1==f||1==f.collapseAll),handler:function(){b.tree("collapseAll",e.target)}},l={text:"上移一级",iconCls:"icon-standard-arrow-up",disabled:!(1==g||1==g.upLevel),handler:function(){b.tree("shift",{point:"upLevel",target:e.target})}},m={text:"上移",iconCls:"icon-standard-up",disabled:!(1==g||1==g.up),handler:function(){b.tree("shift",{point:"up",target:e.target})}},n={text:"下移",iconCls:"icon-standard-down",disabled:!(1==g||1==g.down),handler:function(){b.tree("shift",{point:"down",target:e.target})}},o={text:"下移一级",iconCls:"icon-standard-arrow-down",disabled:!(1==g||1==g.downLevel),handler:function(){b.tree("shift",{point:"downLevel",target:e.target})}},p={text:"显示 Option",iconCls:"icon-standard-application-form",disabled:!c.showOption,children:[{text:"树控件 Option",iconCls:"icon-hamburg-category",handler:function(){b.tree("showOption")}},{text:"该节点 Option",iconCls:"tree-icon tree-file",handler:function(){b.tree("showOption",e.target)}}]},q=[],r=[h,i,j,k],s=[l,m,n,o],b.tree("isRoot",e.target)&&a.array.insertRange(r,0,[{text:"展开所有",iconCls:"icon-standard-arrow-out",handler:function(){b.tree("expandAll")}},{text:"折叠所有",iconCls:"icon-standard-arrow-in",handler:function(){b.tree("collapseAll")}},"-"]),a.array.likeArray(c.contextMenu)&&a.array.merge(q,c.contextMenu,"-"),c.showOption&&a.array.merge(q,p,"-"),a.array.merge(q,"object"!=typeof f||f.submenu?[{text:"展开/折叠",iconCls:"",disabled:!f,children:r},"-"]:a.array.merge(r,"-")),a.array.merge(q,"object"!=typeof g||g.submenu?{text:"上/下移(级)",iconCls:"",disabled:!g,children:s}:s),x(d,e,q,b)}function x(b,c,d,e){return a.array.map(d,function(d){if(!d||a.util.isString(d))return d;var f=a.extend({},d);return f.id=a.isFunction(d.id)?d.id.call(f,b,c,e):d.id,f.text=a.isFunction(d.text)?d.text.call(f,b,c,e):d.text,f.iconCls=a.isFunction(d.iconCls)?d.iconCls.call(f,b,c,e):d.iconCls,f.disabled=a.isFunction(d.disabled)?d.disabled.call(f,b,c,e):d.disabled,f.hideOnClick=a.isFunction(d.hideOnClick)?d.hideOnClick.call(f,b,c,e):d.hideOnClick,f.onclick=a.isFunction(d.onclick)?function(a,b,f){d.onclick.call(this,a,c,e,b,f)}:d.onclick,f.handler=a.isFunction(d.handler)?function(a,b,f){d.handler.call(this,a,c,e,b,f)}:d.handler,f.children&&f.children.length&&(f.children=x(b,c,f.children,e)),f})}var y,z,A,B,C,D,E,F,G;a.fn.tree.extensions={},y=a.fn.tree.extensions.initExtensions=function(a,b){var c=b._extensions?b._extensions:b._extensions={};c._initialized||(t(a,b,c),u(a,b,c),v(a,b,c),c._initialized=!0)},z=a.fn.tree.extensions.parseQueryParams=function(b,c){var d=a.extend({},c,b.queryParams);return a.util.parseMapFunction(d)},A=a.fn.tree.extensions.loader=function(b,c,d){var e=a.util.parseJquery(this),f=e.tree("options");return y(e,f),f.url?(b=z(f,b),a.ajax({type:f.method,url:f.url,data:b,dataType:"json",success:function(a){c(a)},error:function(){d.apply(this,arguments)}}),void 0):!1},B=a.fn.tree.defaults.onExpand,C=a.fn.tree.extensions.onExpand=function(b){var c,d,e,f;a.isFunction(B)&&B.apply(this,arguments),c=a.util.parseJquery(this),d=c.tree("options"),d.onlyNodeExpand&&(e=c.tree("getNears",b.target),f=d.animate,d.animate=!1,a.each(a.array.filter(e,function(a){return a.target!=b.target&&"open"==a.state}),function(){c.tree("collapse",this.target)}),d.animate=f)},D=a.fn.tree.defaults.loadFilter,E=a.fn.tree.extensions.loadFilter=function(b){if(a.isFunction(D)&&(b=D.apply(this,arguments)),b=a.array.likeArray(b)&&!a.util.isString(b)?b:[],!b.length)return b;var d=a.util.parseJquery(this),e=d.tree("options");return e.smooth?a.fn.tree.extensions.smoothConverter(b,e):b},a.fn.tree.extensions.smoothConverter=function(c,d){var e,f,g,h,i;return c=c||[],e=c,f=d.idField||"id",g=d.parentField||"pid",d.smooth&&(h=a.array.filter(c,function(d){return null==d[g]||d[g]==b?!0:!a.array.some(c,function(a){return d[g]==a[f]})}),i=function(c,d){var e=a.array.filter(c,function(a){return null==a[g]||a[g]==b?!1:a[g]==d[f]});return a.array.map(e,function(b){var d=i(c,b);return d.length&&(b.children=a.array.likeArray(b.children)&&!a.util.isString(b.children)?b.children:[],a.array.merge(b.children,d)),b})},e=a.array.map(h,function(b){var d=i(c,b);return d.length&&(b.children=a.array.likeArray(b.children)&&!a.util.isString(b.children)?b.children:[],a.array.merge(b.children,d)),b})),e},F=a.fn.tree.extensions.methods={isRoot:function(a,b){return c(a[0],b)},showOption:function(a,b){return a.each(function(){d(this,b)})},getLevel:function(a,b){return e(a[0],b)},move:function(a,b){return a.each(function(){f(this,b)})},shift:function(a,b){return a.each(function(){g(this,b)})},compare:function(a,b){return h(a[0],b)},isChild:function(a,b){return i(a[0],b)},isParent:function(a,b){return j(a[0],b)},isSibling:function(a,b){return k(a[0],b)},next:function(a,b){return l(a[0],b)},prev:function(a,b){return m(a[0],b)},getNears:function(a,b){return n(a[0],b)},getNearChildren:function(a,b){return o(a[0],b)},unselect:function(a,b){return a.each(function(){p(this,b)})},load:function(a,b){return a.each(function(){q(this,b)})},setIcon:function(a,b){return a.each(function(){r(this,b)})},setText:function(a,b){return a.each(function(){s(this,b)})}},G=a.fn.tree.extensions.defaults={autoBindDblClick:!0,dblClickMenuIndex:0,smooth:!1,selectOnContextMenu:!1,toggleOnClick:!1,onlyNodeExpand:!1,enableContextMenu:!0,contextMenu:null,toggleMenu:!0,moveMenu:!1,showOption:!1,queryParams:{},loader:A,loadFilter:E,onExpand:C},a.extend(a.fn.tree.defaults,G),a.extend(a.fn.tree.methods,F)}(jQuery);

//14,jeasyui.extensions.datagrid.js
!function(a,b){function mb(b,c,d){var e,f,g,h,i,j,k,n;d=d||(c._extensionsDatagrid?c._extensionsDatagrid:c._extensionsDatagrid={}),kb(b,d),e=b.datagrid("getData"),f=d.oldData,e!=f&&(d.filterData=[]),nb(b,c),c.columnFilter&&(d.oldData=e,g=b.datagrid("getPanel").find("div.datagrid-view div.datagrid-header"),h=g.find("table.datagrid-htable tr.datagrid-header-row"),i=h.find("td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),j=c.columnFilter=a.extend({panelHeight:100,position:"top"},c.columnFilter),k=a.array.contains(["top","bottom"],j.position)?j.position:"top",j.panelHeight=a.isNumeric(j.panelHeight)&&j.panelHeight>=60?j.panelHeight:60,g.height(),n=b.datagrid("getRows"),i.each(function(){var e=a(this).addClass("datagrid-header-filter").removeClass("datagrid-header-filter-top datagrid-header-filter-bottom"),g=(e.find("div.datagrid-cell").addClass("datagrid-header-filter-cell"),e.attr("field")),h=b.datagrid("getColumnOption",g),l=h.width,o=(a("<hr />").addClass("datagrid-header-filter-line")["top"==k?"prependTo":"appendTo"](this),a("<div></div>").attr("field",g).addClass("datagrid-header-filter-container").css({height:j.panelHeight,width:l})["top"==k?"prependTo":"appendTo"](this));e.addClass("top"==k?"datagrid-header-filter-top":"datagrid-header-filter-bottom"),g&&ob(b,c,d,o,h,n,i)}),d.filterData&&d.filterData.length?b.datagrid("hideRows",d.filterData):tb(b,c,d,n,i))}function nb(b,c){var d,e;c.columnFilter&&(d=b.datagrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),d.removeClass("datagrid-header-filter datagrid-header-filter-top datagrid-header-filter-bottom").find("div.datagrid-cell").removeClass("datagrid-header-filter-cell"),d.find("hr.datagrid-header-filter-line,div.datagrid-header-filter-container").remove(),e=b.datagrid("getColumnFields","all"),b.datagrid("fixColumnSize",e[e.length-1]))}function ob(b,c,d,e,f,g,h){if(f.filterable){var i=f.field,j=b.datagrid("getDistinctColumnData",i),k=a.array.contains(["checkbox","livebox","caps","lower","none"],f.filter)?f.filter:"checkbox",l=f.precision,m=f.step;switch(k){case"checkbox":pb(b,d,e,i,g,j);break;case"livebox":qb(b,e,i,g);break;case"caps":rb(b,e,i,m,l,g,j,"<=",c.columnFilter.panelHeight,h);break;case"lower":rb(b,e,i,m,l,g,j,">=",c.columnFilter.panelHeight,h);break;case"none":}}}function pb(b,c,d,e,f,g){a.each(g,function(g,h){var i=a("<div></div>").addClass("datagrid-header-filter-item").attr("text",h).appendTo(d),l=(a("<div></div>").addClass("datagrid-header-filter-item-text").text(h).appendTo(i),a("<div></div>").addClass("datagrid-header-filter-item-icon").appendTo(i),function(){var d=a.array.filter(f,function(a){return a[e]==h}),g=a.array.filter(c.filterData,function(a){return a[e]==h});b.datagrid(g.length?"showRows":"hideRows",d)});i.click(l)})}function qb(b,c,d,e){var f,g;a("<div></div>").addClass("datagrid-header-filter-livebox-text").text("模糊过滤：").appendTo(c),f=a("<input />").addClass("datagrid-header-filter-livebox").appendTo(c),g=a("<a />").linkbutton({plain:!0,iconCls:"icon-search"}).appendTo(c).click(function(){var c,g;return b.datagrid("showRows",!0),c=f.val(),a.string.isNullOrEmpty(c)?(f.focus(),void 0):(g=a.array.filter(e,function(a){return-1==String(a[d]).indexOf(c)}),b.datagrid("hideRows",g),f.focus(),void 0)}),a("<a />").linkbutton({plain:!0,iconCls:"icon-undo"}).appendTo(c).click(function(){var a=f.val();a?(f.val("").focus(),g.click()):f.focus()}),f.keypress(function(a){13==a.which&&g.click()})}function rb(b,c,d,e,f,g,h,i,j,k){var l=a.array.map(h,function(b){return b=parseFloat(b),a.isNumeric(b)?b:0}),m=l.length?a.array.min(l):0,n=l.length?a.array.max(l):0,o=l.length?a.array.max(l,function(b,c){return a.util.compare(a.number.precision(b),a.number.precision(c))}):0,p=l.length?a.number.precision(o):0,q=j-45,r=a("<div></div>").addClass("datagrid-header-filter-itemwrap").text(i).appendTo(c),s=a("<div></div>").addClass("datagrid-header-filter-sliderwrap").css({height:q+10})["<="==i?"appendTo":"prependTo"](c),t=a("<input />").addClass("datagrid-header-filter-numeric").appendTo(r),u=a("<input />").addClass("datagrid-header-filter-slider").appendTo(s),v=function(a){sb(b,d,g,a,i,t,u,k)};t.numberbox({value:"<="==i?n:m,min:m,max:n,precision:f,onChange:v}),t.keypress(function(b){if(13==b.which){var c=t.val();t.numberbox("setValue",a.isNumeric(c)?c:0)}}),u.slider({height:q,mode:"v",showTip:!0,value:"<="==i?n:m,min:m,max:n,rule:[m,"|",n],step:e,onSlideEnd:v,tipFormatter:function(b){return a.number.round(b||0,p)}})}function sb(b,c,d,e,f,g,h,i){var l,j=i||b.datagrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),k=j.filter(function(){return a(this).attr("field")==c});g=g?g:k.find(".datagrid-header-filter-numeric"),h=h?h:k.find(".datagrid-header-filter-slider"),l=a.array.filter(d,function(b){return b=parseFloat(b[c]),b=a.isNumeric(b)?b:0,">="==f?e>b:b>e}),b.datagrid("showRows",!0).datagrid("hideRows",l),g.numberbox("setValue",e),h.slider("setValue",e)}function tb(b,c,d,e,f){c.columnFilter&&(f=f||b.datagrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),f.each(function(){var c=a(this),f=c.attr("field");ub(b,d,e,c,f)}))}function ub(b,c,d,e,f){var g=g=b.datagrid("getColumnOption",f),i=(g.precision,a.array.contains(["checkbox","livebox","caps","lower","none"],g.filter)?g.filter:"checkbox");switch(i){case"checkbox":vb(b,c,d,e,f);break;case"livebox":xb(b,c,d,e,f);break;case"caps":yb(b,c,d,e,f);break;case"lower":zb(b,c,d,e,f);break;case"none":}}function vb(b,c,d,e,f){e.find("div.datagrid-header-filter-item").each(function(){var b=a(this),e=b.attr("text"),g=b.find("div.datagrid-header-filter-item-icon"),h=a.array.sum(d,function(a){return a[f]==e?1:0}),i=a.array.sum(c.filterData,function(a){return a[f]==e?1:0}),j=0==i?"tree-checkbox1":i>=h?"tree-checkbox0":"tree-checkbox2";a.easyui.tooltip.init(b,{content:(a.string.isNullOrEmpty(e)?"空白":e)+": 共"+h+"个元素"}),wb(g,j)})}function wb(a,b){a.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2").addClass(b)}function xb(){}function yb(){}function zb(){}function Ab(b,c,d){d.onHeaderContextMenuBak=c.onHeaderContextMenu,c.onHeaderContextMenu=function(e,f){if(a.isFunction(d.onHeaderContextMenuBak)&&d.onHeaderContextMenuBak.apply(this,arguments),c.enableHeaderContextMenu){var g=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),h=Fb(b,c,d,e,f,g);a.easyui.showMenu({items:h,left:e.pageX,top:e.pageY,hideDisabledMenu:c.hideDisabledMenu}),e.preventDefault()}}}function Bb(b,c,d){d.onRowContextMenuBak=c.onRowContextMenu,c.onRowContextMenu=function(e,f,g){if(a.isFunction(d.onRowContextMenuBak)&&d.onRowContextMenuBak.apply(this,arguments),c.selectOnRowContextMenu&&b.datagrid("selectRow",f),c.enableRowContextMenu){var h=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),i=Gb(b,c,d,e,f,g,h);c.autoBindDblClickRow&&c.dblClickRowMenuIndex>=0&&a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)&&c.rowContextMenu.length>c.dblClickRowMenuIndex&&(i[c.dblClickRowMenuIndex].bold=!0),a.easyui.showMenu({items:i,left:e.pageX,top:e.pageY,hideDisabledMenu:c.hideDisabledMenu}),e.preventDefault()}}}function Cb(b,c,d){c.enableHeaderClickMenu&&b.datagrid("getPanel").find(".datagrid-view .datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}).find("div.datagrid-cell").each(function(){Db(b,c,d,this)})}function Db(b,c,d,e){e=a.util.parseJquery(e),e.off(".hoverArrow");var f=a("<span class='s-btn-downarrow datagrid-header-cell-arrow'>&nbsp;</span>").click(function(e){var g=a(this),h=g.offset(),i=g.outerHeight(),j=g.parent().parent().attr("field"),k=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),l=Fb(b,c,d,e,j,k),m=a.easyui.showMenu({items:l,left:h.left,top:h.top+i}),n=m.menu("options"),o=n.onHide;return f.hidable=!1,n.onHide=function(){f.hidable=!0,f.removeClass("datagrid-header-cell-arrow-show"),o.apply(this,arguments)},!1}).prependTo(e);e.on({"mouseenter.hoverArrow":function(){f.addClass("datagrid-header-cell-arrow-show")},"mouseleave.hoverArrow":function(){(!a.util.isBoolean(f.hidable)||f.hidable)&&f.removeClass("datagrid-header-cell-arrow-show")}})}function Eb(b,c,d){d.onDblClickRowBak=c.onDblClickRow,c.onDblClickRow=function(e,f){var g,h,i;return a.isFunction(d.onDblClickRowBak)&&d.onDblClickRowBak.apply(this,arguments),g=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,null),items=Gb(b,c,d,null,e,f,g),c.autoBindDblClickRow&&c.dblClickRowMenuIndex>=0&&a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)&&c.rowContextMenu.length>c.dblClickRowMenuIndex?(h=items[c.dblClickRowMenuIndex],i=h.handler||h.onclick,i(null,e,f,g,b,h,null)):(c.autoEditing&&b.datagrid("beginEdit",e),void 0)}}function Fb(b,c,d,e,f,g){var j,h=[],i=a.util.likeArray(c.headerContextMenu)&&!a.util.isString(c.headerContextMenu)?c.headerContextMenu:[];return i.length&&a.array.merge(h,i),j=Hb(b,c,d,e,f,g),j.length&&a.array.merge(h,"-",j),h=a.fn.datagrid.extensions.parseHeaderContextMenuMap(e,f,g,h,b),"-"==h[0]&&a.array.removeAt(h,0),h}function Gb(b,c,d,e,f,g,h){var k,i=[],j=a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)?c.rowContextMenu:[];return j.length&&a.array.merge(i,j),k=Kb(b,c,d,e,f,g,h),k.length&&a.array.merge(i,"-",k),i=a.fn.datagrid.extensions.parseRowContextMenuMap(e,f,g,h,i,b),"-"==i[0]&&a.array.removeAt(i,0),i}function Hb(b,c,d,e,f,g){var l,m,n,o,p,q,r,h=[],i=c.exportMenu,j=b.datagrid("getColumnOption",f),k=b.datagrid("getColumnOption",f).sortable;return"object"==typeof i&&(i=a.extend({current:!1,all:!1,submenu:!0},i)),l={text:"升序",iconCls:"icon-standard-hmenu-asc",disabled:1!=k,handler:function(){return b.datagrid("sort",{sortName:f,sortOrder:"asc"})}},m={text:"降序",iconCls:"icon-standard-hmenu-desc",disabled:1!=k,handler:function(){return b.datagrid("sort",{sortName:f,sortOrder:"desc"})}},n={text:"显示/隐藏列",iconCls:"icon-standard-application-view-columns",disabled:!1,children:[{text:"显示全部列",iconCls:function(){var b=d.fields?d.fields.length:0,c=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1});return c>=b?"tree-checkbox1":0==c?"tree-checkbox0":"tree-checkbox2"},hideOnClick:!1,handler:function(b,c,e,f,g,h){a.each(d.fields,function(){f.datagrid("showColumn",this)}),a(this).parent().children("div.menu-item:not(:eq(1))").each(function(){h.menu("setIcon",{target:this,iconCls:"tree-checkbox1"}),h.menu("enableItem",this)})}},{text:"还原默认",iconCls:"icon-standard-application-view-tile",hideOnClick:!1,handler:function(b,c,e,f,g,h){a.each(d.fieldOptionsBackup,function(){f.datagrid(1==this.hidden?"hideColumn":"showColumn",this.field)});var i=a(this).parent();i.children("div.menu-item:gt(1)").each(function(){var b=a(this).text(),c=a.array.first(d.fieldOptions,function(a){return a.title==b});c&&h.menu("setIcon",{target:this,iconCls:c.hidden?"tree-checkbox0":"tree-checkbox1"}),h.menu("enableItem",this)}),i.children("div.menu-item:first").each(function(){var b=d.fields?d.fields.length:0,c=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1});h.menu("setIcon",{target:this,iconCls:c>=b?"tree-checkbox1":0==c?"tree-checkbox0":"tree-checkbox2"})})}},"-"]},o={text:"过滤/显示",iconCls:"icon-standard-application-view-list",disabled:!j.filterable,children:[]},p={text:"导出当前页",iconCls:"icon-standard-page-white-put",disabled:!(1==i||1==i.current),handler:function(){return b.datagrid("exportExcel",!1)}},q={text:"导出全部",iconCls:"icon-standard-page-white-stack",disabled:!(1==i||1==i.all),handler:function(){return b.datagrid("exportExcel",!0)}},a.util.merge(n.children,Ib(b,c,d,e,f,g)),j.filterable&&a.util.merge(o.children,Jb(b,c,d,e,f,g)),a.util.merge(h,[l,m,"-",n,o]),r=[p,q],i&&a.array.merge(h,"-","object"!=typeof i||i.submenu?{text:"导出数据",iconCls:"icon-standard-page-save",children:r}:r),h}function Ib(b,c,d){return a.array.map(d.fieldOptions,function(b){var c=function(c,e,f,g,h,i){var l,m,j=a.util.parseJquery(this),k=j.parent().find(".menu-item:gt(1) .tree-checkbox1").length;(1!=k||b.hidden)&&b.hidable&&(g.datagrid(b.hidden?"showColumn":"hideColumn",b.field),i.menu("setIcon",{target:this,iconCls:b.hidden?"tree-checkbox0":"tree-checkbox1"}),k=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1}),l=d.fields?d.fields.length:0,i.menu("setIcon",{target:j.parent().children("div.menu-item:first"),iconCls:k>=l?"tree-checkbox1":0==k?"tree-checkbox0":"tree-checkbox2"}),m=j.parent().find(".menu-item:gt(1)").filter(function(){return a(".tree-checkbox1",this).length?!0:!1}),m.each(function(){i.menu(m.length>1?"enableItem":"disableItem",this)}))};return{text:b.title||b.field,iconCls:b.hidden?"tree-checkbox0":"tree-checkbox1",hideOnClick:!1,disabled:b.hidable?!1:!0,handler:c}})}function Jb(b,c,d,e,f){var n,o,p,h=b.datagrid("getRows"),i=b.datagrid("getDistinctColumnData",f),j=[{text:"全部",hideOnClick:!1,iconCls:d.filterData&&d.filterData.length?d.filterData.length>=h.length?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1",handler:function(b,c,e,f,g,h){d.filterData&&d.filterData.length?f.datagrid("showRows",!0):f.datagrid("hideRows",!0),a(this).parent().children("div.menu-item[hideOnClick=false]").each(function(){h.menu("setIcon",{target:this,iconCls:d.filterData&&d.filterData.length?"tree-checkbox0":"tree-checkbox1"})})}},"-"],k=i.length>=15,l=k?a.array.left(i,10):i,m=a.array.map(l,function(b){var c=a.array.filter(h,function(a){return a[f]==b}),e=c.length,g=a.array.sum(d.filterData,function(a){return a[f]==b?1:0}),i=g?g>=e?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1",j=function(e,f,g,i,j,k){var l=a.array.sum(d.filterData,function(a){return a[f]==b?1:0});i.datagrid(l?"showRows":"hideRows",c),k.menu("setIcon",{target:this,iconCls:l?"tree-checkbox1":"tree-checkbox0"}),a(this).parent().children("div.menu-item:first").each(function(){k.menu("setIcon",{target:this,iconCls:d.filterData&&d.filterData.length?d.filterData.length>=h.length?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1"})})};return{text:b,iconCls:i,hideOnClick:!1,handler:j}});return a.array.merge(j,m),k&&(n=b.datagrid("getColumnOption",f),o=n.title?n.title:n.field,p=function(){var c=a("<input />").attr({type:"button",value:"全部选择"}).click(function(){b.datagrid("showRows",!0),a(this).parent().find(":checkbox").each(function(){this.checked=!0})}),g=a("<input />").attr({type:"button",value:"全部不选"}).click(function(){b.datagrid("hideRows",!0),a(this).parent().find(":checkbox").each(function(){this.checked=!1})});a("<div></div>").append("<div>列："+o+"，共"+i.length+"项</div><hr />").css({padding:"10px"}).append(c).append(g).append("<hr />").each(function(){var c=a(this),e=a("<ul></ul>").css({"list-style-type":"decimal","padding-left":"40px","line-height":"18px"}).appendTo(c);a.each(i,function(c,g){var i="itemCheckbox_"+a.util.guid("N"),j=!a.array.some(d.filterData,function(a){return a[f]==g}),k=a("<li></li>").appendTo(e),l=a("<input />").attr({type:"checkbox",id:i,checked:j}).appendTo(k),n=(a("<label></label>").attr("for",i).text(g).appendTo(k),function(){var c=a.array.filter(h,function(a){return a[f]==g}),e=a.array.sum(d.filterData,function(a){return a[f]==g?1:0});b.datagrid(e?"showRows":"hideRows",c)});l.click(n)})}).dialog({title:"过滤/显示",iconCls:"icon-standard-application-view-detail",height:260,width:220,left:e.pageX,top:e.pageY,collapsible:!1,minimizable:!1,maximizable:!1,closable:!0,modal:!0,resizable:!0,onClose:function(){a.util.parseJquery(this).dialog("destroy")}}).dialog("open")},a.array.merge(j,["-",{text:"处理更多(共"+i.length+"项)...",iconCls:"icon-standard-application-view-detail",handler:p}])),j}function Kb(b,c,d,e,f,g,h){var m,n,o,p,q,r,s,t,u,v,w,x,y,z,i=[],j=c.pagingMenu,k=c.moveMenu,l=c.exportMenu;return"object"==typeof j&&(j=a.extend({disabled:!1,submenu:!0},j)),"object"==typeof k&&(k=a.extend({up:!1,down:!1,submenu:!0},k)),"object"==typeof l&&(l=a.extend({current:!1,all:!1,submenu:!0},l)),m={text:"刷新当前页",iconCls:"pagination-load",disabled:!c.refreshMenu,handler:function(){b.datagrid("reload")}},n={text:"首页",iconCls:"pagination-first",disabled:function(){return!c.pagination||h.page<=1},handler:function(){h.page>1&&h.pager.pagination("select",1)}},o={text:"上一页",iconCls:"pagination-prev",disabled:function(){return!c.pagination||h.page<=1},handler:function(){h.page>1&&h.pager.pagination("select",h.page-1)}},p={text:"下一页",iconCls:"pagination-next",disabled:function(){return!c.pagination||h.page>=h.pageCount},handler:function(){h.page<h.pageCount&&h.pager.pagination("select",h.page+1)}},q={text:"末页",iconCls:"pagination-last",disabled:function(){return!c.pagination||h.page>=h.pageCount},handler:function(){h.page<h.pageCount&&h.pager.pagination("select",h.pageCount)}},r={text:"移至最上",iconCls:"icon-standard-arrow-up",disabled:!(1==k||1==k.top),handler:function(){b.datagrid("moveRow",{source:f,target:0,point:"top"})}},s={text:"上移",iconCls:"icon-standard-up",disabled:!(1==k||1==k.up),handler:function(){b.datagrid("shiftRow",{point:"up",index:f})}},t={text:"下移",iconCls:"icon-standard-down",disabled:!(1==k||1==k.down),handler:function(){b.datagrid("shiftRow",{point:"down",index:f})}},u={text:"移至最下",iconCls:"icon-standard-arrow-down",disabled:!(1==k||1==k.bottom),handler:function(){var a=b.datagrid("getRows");b.datagrid("moveRow",{source:f,target:a.length-1,point:"bottom"})}},v={text:"导出当前页",iconCls:"icon-standard-page-white-put",disabled:!(1==l||1==l.current),handler:function(){return b.datagrid("exportExcel",!1)}},w={text:"导出全部",iconCls:"icon-standard-page-white-stack",disabled:!(1==l||1==l.all),handler:function(){return b.datagrid("exportExcel",!0)}},i.push(m),x=[n,o,p,q],y=[r,s,"-",t,u],z=[v,w],j&&a.array.merge(i,"-","object"!=typeof j||j.submenu?{text:"翻页",iconCls:"",disabled:!(1==j||!j.disabled),children:x}:x),k&&a.array.merge(i,"-","object"!=typeof k||k.submenu?{text:"上/下移动",iconCls:"",disabled:!k,children:y}:y),l&&a.array.merge(i,"-","object"!=typeof l||l.submenu?{text:"导出数据",iconCls:"icon-standard-page-save",disabled:!l,children:z}:z),i}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc;a.fn.datagrid.extensions={},c=a.fn.datagrid.methods.updateRow,d=a.fn.datagrid.methods.appendRow,e=a.fn.datagrid.methods.insertRow,f=function(b,d){if(d&&d.row&&a.isNumeric(d.index)){var e=a.util.parseJquery(b),f=e.datagrid("options");a.isFunction(f.onBeforeUpdateRow)&&0==f.onBeforeUpdateRow.call(b,d.index,d.row)||(c.call(e,e,d),mb(e,f),lb(e,f),Mb(e,f,d.index,d.row),a.isFunction(f.onUpdateRow)&&f.onUpdateRow.call(b,d.index,d.row))}},g=function(b,c){var e,f,g,h;c&&(e=a.util.parseJquery(b),f=e.datagrid("options"),a.isFunction(f.onBeforeAppendRow)&&0==f.onBeforeAppendRow.call(b,c)||(d.call(e,e,c),g=e.datagrid("getRows"),h=g.length-1,mb(e,f),lb(e,f),Mb(e,f,h,c),a.isFunction(f.onAppendRow)&&f.onAppendRow.call(b,c)))},h=function(b,c){if(c&&c.row&&a.isNumeric(c.index)){var d=a.util.parseJquery(b),f=d.datagrid("options");a.isFunction(f.onBeforeInsertRow)&&0==f.onBeforeInsertRow.call(b,c.index,c.row)||(e.call(d,d,c),mb(d,f),lb(d,f),Mb(d,f,c.index,c.row),a.isFunction(f.onInsertRow)&&f.onInsertRow.call(b,c.index,c.row))}},i=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getChecked"),f=a.array.map(e,function(a){return d.datagrid("getRowIndex",a)});return a.array.contains(f,c)},j=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getSelections"),f=a.array.map(e,function(a){return d.datagrid("getRowIndex",a)});return a.array.contains(f,c)},k=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getColumnFields"),f=d.datagrid("getColumnFields",!0);f&&f.length&&a.array.contains(e,c)&&!a.array.contains(f,c)&&d.datagrid("moveColumn",{source:c,target:f[f.length-1],point:"after"})},l=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getColumnFields"),f=d.datagrid("getColumnFields",!0);e&&e.length&&!a.array.contains(e,c)&&a.array.contains(f,c)&&d.datagrid("moveColumn",{source:c,target:e[0],point:"before"})},m=function(b,c){var d,e,f,g,h,i,j;if(c&&a.isNumeric(c.source)&&a.isNumeric(c.target)&&c.source!=c.target&&c.point&&(a.array.contains(["top","bottom"],c.point)||(c.point="top"),d=a.util.parseJquery(b),e=d.datagrid("options"),f=d.datagrid("getRows"),g=f[c.source],h=f[c.target],g&&h&&(!a.isFunction(e.onBeforeDrop)||0!=e.onBeforeDrop.call(b,h,g,c.point)))){switch(i=d.datagrid("popRow",c.source),j=d.datagrid("getRowIndex",h),f=d.datagrid("getRows"),c.point){case"top":d.datagrid("insertRow",{index:j,row:i});break;case"bottom":j++>=f.length?d.datagrid("appendRow",i):d.datagrid("insertRow",{index:j,row:i})}i&&a.isFunction(e.onDrop)&&e.onDrop.call(b,h,g,c.point)}},n=function(b,c){if(c&&a.isNumeric(c.index)&&c.point&&a.array.contains(["up","down"],c.point)){var d=a.util.parseJquery(b),f=(d.datagrid("options"),"up"==c.point?c.index-1:c.index+1),g="up"==c.point?"top":"bottom";d.datagrid("moveRow",{source:c.index,target:f,point:g})}},o=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getRows"),f=c+1;return e[f]?e[f]:null},p=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getRows"),f=c-1;return e[f]?e[f]:null},q=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getRows"),f=e[c];return f?(d.datagrid("deleteRow",c),f):null},r=function(b){function e(a,b){var c=a.draggable("proxy").find("span.tree-dnd-icon");c.removeClass("tree-dnd-yes tree-dnd-no").addClass(b?"tree-dnd-yes":"tree-dnd-no")}var c=a.util.parseJquery(b),d=c.datagrid("options");c.datagrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable({disabled:!1,revert:!0,cursor:"default",deltaX:10,deltaY:5,proxy:function(b){var h,d=a.util.parseJquery(b),e=parseInt(d.attr("datagrid-row-index")),f=c.datagrid("getRowDom",e).clone(),g=a("<tr></tr>").addClass("datagrid-row datagrid-row-selected");return a("<td><span class='tree-dnd-icon tree-dnd-no' ></span></td>").appendTo(g),h=f.find("td").each(function(a){6>a&&g.append(this)}),h.length>6&&a("<td>...</td>").css("width","40px").appendTo(g),a("<table></table>").addClass("tree-node-proxy").appendTo("body").append(g).hide()},onBeforeDrag:function(e){var f=a.util.parseJquery(this),g=parseInt(f.attr("datagrid-row-index")),h=c.datagrid("getRowData",g);return a.isFunction(d.onBeforeDrag)&&0==d.onBeforeDrag.call(b,g,h)?!1:1!=e.which?!1:"checkbox"==e.target.type?!1:void 0},onStartDrag:function(){var e=a.util.parseJquery(this),f=parseInt(e.attr("datagrid-row-index")),g=c.datagrid("getRowData",f);e.draggable("proxy").css({left:-1e4,top:-1e4}),a.isFunction(d.onBeforeDrag)&&d.onStartDrag.call(b,f,g)},onStopDrag:function(){var e=a.util.parseJquery(this),f=parseInt(e.attr("datagrid-row-index")),g=c.datagrid("getRowData",f);a.isFunction(d.onStopDrag)&&d.onStopDrag.call(b,f,g)},onDrag:function(b){var c=b.pageX,d=b.pageY,e=b.data.startX,f=b.data.startY,g=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f));g>15&&a(this).draggable("proxy").show(),this.pageY=b.pageY}}).droppable({accept:"tr.datagrid-row",onDragEnter:function(f,g){var h=a.util.parseJquery(this),i=a.util.parseJquery(g),j=parseInt(h.attr("datagrid-row-index")),k=parseInt(i.attr("datagrid-row-index")),l=c.datagrid("getRowData",j),m=c.datagrid("getRowData",k),n=c.datagrid("getRowDom",j),o=n.find("td"),p=h.data("dnd"),q={droper:h,drager:i,droperIndex:j,dragerIndex:k,droperRow:l,dragerRow:m,droperRowDom:n,mark:o};p?a.extend(p,q):h.data("dnd",q),a.isFunction(d.onDragEnter)&&0==d.onDragEnter.call(b,l,m)&&(e(i,!1),o.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),h.droppable("disable"))},onDragOver:function(c,f){var m,n,o,g=a.util.parseJquery(this),h=g.data("dnd"),i=h.drager,j=h.droperRow,k=h.dragerRow,l=h.mark;g.droppable("options").disabled||(m=f.pageY,n=g.offset().top,o=n+g.outerHeight(),e(i,!0),l.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),m>n+(o-n)/2?l.addClass("datagrid-header-cell-bottom"):l.addClass("datagrid-header-cell-top"),0==d.onDragOver.call(b,j,k)&&(e(i,!1),l.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),g.droppable("disable")))},onDragLeave:function(){var g=a.util.parseJquery(this),h=g.data("dnd"),i=h.drager,j=h.droperRow,k=h.dragerRow,l=h.mark;e(i,!1),l.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),a.isFunction(d.onDragLeave)&&d.onDragLeave.call(b,j,k)},onDrop:function(){var e=a.util.parseJquery(this),f=e.data("dnd"),g=f.droperIndex,h=f.dragerIndex,i=f.mark,j=i.hasClass("datagrid-header-cell-top")?"top":"bottom";c.datagrid("moveRow",{target:g,source:h,point:j}),i.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom")}}),d.dndRow=!0},s=function(b){var c=a.util.parseJquery(b),d=c.datagrid("options");c.datagrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable("disable"),d.dndRow=!1},t=function(b,c){var d=a.util.parseJquery(b),e=a.array.merge([],d.datagrid("getColumnFields",!0),d.datagrid("getColumnFields",!1)),f=a.array.indexOf(e,c);return-1==f||f+1>=e.length?null:d.datagrid("getColumnOption",e[f+1])},u=function(b,c){var d=a.util.parseJquery(b),e=a.array.merge([],d.datagrid("getColumnFields",!0),d.datagrid("getColumnFields",!1)),f=a.array.indexOf(e,c);return 1>f?null:d.datagrid("getColumnOption",e[f-1])},v=function(c,d){var e,g,h,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;d&&d.source&&d.target&&d.source!=d.target&&d.point&&(a.array.contains(["before","after"],d.point)||(d.point="before"),e=a.util.parseJquery(c),e.datagrid("hasMuliRowHeader")||(f=e.datagrid("options"),i=e.datagrid("getColumnFields"),j=e.datagrid("getColumnFields",!0),a.array.contains(i,d.source)&&(g=!1),g==b&&a.array.contains(j,d.source)&&(g=!0),a.array.contains(i,d.target)&&(h=!1),h==b&&a.array.contains(j,d.target)&&(h=!0),g!=b&&h!=b&&(a.isFunction(f.onBeforeMoveColumn)&&0==f.onBeforeMoveColumn.call(c,d.source,d.target,d.point)||(k=e.datagrid("getPanel"),l=k.find("div.datagrid-view"),m=l.find("div.datagrid-view1"),n=l.find("div.datagrid-view2"),o=m.find("table.datagrid-htable tr.datagrid-header-row"),p=n.find("table.datagrid-htable tr.datagrid-header-row"),q=m.find("table.datagrid-btable tr.datagrid-row"),r=n.find("table.datagrid-btable tr.datagrid-row"),s=g?o.find("td[field="+d.source+"]"):p.find("td[field="+d.source+"]"),t=h?o.find("td[field="+d.target+"]"):p.find("td[field="+d.target+"]"),u=g?q:r,v=h?q:r,u.length==v.length&&(t[d.point](s),v.each(function(b){var e=a(this).find("td[field="+d.target+"]"),f=a(u[b]).find("td[field="+d.source+"]");e[d.point](f)}),w=e.datagrid("getColumnOption",d.source),x=e.datagrid("getColumnOption",d.target),y=g?f.frozenColumns[0]:f.columns[0],z=h?f.frozenColumns[0]:f.columns[0],A=f._extensionsDatagrid?f._extensionsDatagrid:f._extensionsDatagrid={},a.array.remove(y,w),B=a.array.indexOf(z,x),B>-1&&a.array.insert(z,"before"==d.point?B:B+1,w),e.datagrid("fixColumnSize"),g&&(h||(B=a.array.indexOf(A.fields,d.target),a.array.insert(A.fields,"before"==d.point?B:B+1,d.source),a.array.insert(A.fieldOptions,"before"==d.point?B:B+1,w),a.array.insert(A.fieldOptionsBackup,"before"==d.point?B:B+1,a.extend({},w)))),g||(B=a.array.indexOf(A.fields,d.source),h?(a.array.removeAt(A.fields,B),a.array.removeAt(A.fieldOptions,B),a.array.removeAt(A.fieldOptionsBackup,B)):(C=A.fieldOptions[B],D=A.fieldOptionsBackup[B],a.array.removeAt(A.fields,B),a.array.removeAt(A.fieldOptions,B),a.array.removeAt(A.fieldOptionsBackup,B),B=a.array.indexOf(A.fields,d.target),a.array.insert(A.fields,"before"==d.point?B:B+1,d.source),a.array.insert(A.fieldOptions,"before"==d.point?B:B+1,C),a.array.insert(A.fieldOptionsBackup,"before"==d.point?B:B+1,D))),a.isFunction(f.onMoveColumn)&&f.onMoveColumn.call(c,d.source,d.target,d.point))))))},w=function(b,c){var d,e,f;c&&c.field&&c.point&&(a.array.contains(["before","after"],c.point)||(c.point="before"),d=a.util.parseJquery(b),e=d.datagrid("getColumnFields","all"),f=a.array.indexOf(e,c.field),-1==f||"before"==c.point&&0==f||"after"==c.point&&f==e.length-1||(b=e["before"==c.point?f-1:f+1],d.datagrid("moveColumn",{source:c.field,target:b,point:c.point})))},x=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("options"),f=e._extensionsDatagrid?e._extensionsDatagrid:e._extensionsDatagrid={};a.isFunction(e.onBeforeDeleteColumn)&&0==e.onBeforeDeleteColumn.call(b,c)||(z(e,c,f),d.datagrid("getColumnDom",{field:c,header:!0}).remove(),a.isFunction(e.onDeleteColumn)&&e.onDeleteColumn.call(b,c))},y=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getColumnOption",c);return e&&d.datagrid("deleteColumn",c),e},z=a.fn.datagrid.extensions.removeField=function(c,d,e){var f,g,h=-1,i=-1;a.array.likeArray(c.frozenColumns)&&(a.each(c.frozenColumns,function(b,c){if(a.array.likeArray(this))a.each(this,function(a,b){return b.field==d?(i=a,!1):void 0});else if(c.field==d)return i=b,!1;return i>-1?(h=b,!1):void 0}),i>-1&&(g=!0)),g==b&&a.array.likeArray(c.columns)&&(a.each(c.columns,function(b,c){if(a.array.likeArray(this))a.each(this,function(a,b){return b.field==d?(i=a,!1):void 0});else if(c.field==d)return i=b,!1;return i>-1?(h=b,!1):void 0}),i>-1&&(g=!1)),i>-1&&(f=g?c.frozenColumns:c.columns,f=h>-1?f[h]:f,a.array.removeAt(f,i),index=a.array.indexOf(e.fields,d),a.array.remove(e.fields,d),a.array.removeAt(e.fieldOptions,index),a.array.removeAt(e.fieldOptionsBackup,index))},A=function(b){var c=a.util.parseJquery(b),d=c.datagrid("options");return d.columns&&d.columns.length>1&&d.columns[1].length>0||d.frozenColumns&&d.frozenColumns.length>1&&d.frozenColumns[1].length>0},B=function(c,d){var g,e=a.util.parseJquery(c),f=e.datagrid("getRows");return a.isFunction(d)?g=a.array.filter(f,d):a.array.likeArray(d)&&!a.util.isString(d)?(g=a.array.map(d,function(a){return C(c,a,e,f)}),g=a.array.filter(g,function(a){return a!=b&&null!=a})):g=[C(c,d,e,f)],g},C=function(b,c,d,e){var f=d||a.util.parseJquery(b),g=e||f.datagrid("getRows"),h=f.datagrid("options");return a.array.first(g,a.isFunction(c)?c:function(a){return a[h.idField]==c})},D=a.fn.datagrid.methods.deleteRow,E=function(b,c){var f,g,h,d=a.util.parseJquery(b),e=a.isFunction(c);e?(g=d.datagrid("getRows"),h=a.array.first(g,c),h&&D.call(d,d,h)):(f=a.isNumeric(c)?c:d.datagrid("getRowIndex",c),a.isNumeric(f)&&f>-1&&D.call(d,d,f))},F=function(b,c){var e,f,d=a.array.likeArray(c)&&!a.util.isString(c);return d?(a.each(c,function(a,c){E(b,c)}),void 0):(a.isFunction(c)&&(e=a.util.parseJquery(b),f=e.datagrid("getRows"),a.each(f,function(a){if(1==c.call(this,this,a,f)){var d=e.datagrid("getRowIndex",this);D.call(e,e,d)}})),void 0)},G=function(b,c){if(c&&c.field&&c.title){var d=a.util.parseJquery(b),e=d.datagrid("getColumnOption",c.field),f=c.field,g=c.title,h=d.datagrid("getPanel"),i=h.find("div.datagrid-view div.datagrid-header tr.datagrid-header-row td[field="+f+"]");i.length&&(i.find("div.datagrid-cell span:first").html(g),e.title=g)}},H=function(c,d){var f,g,h,i,j,k,l;d&&d.field&&d.width&&a.isNumeric(d.width)&&(a.data(c,"datagrid"),f=a.util.parseJquery(c),g=f.datagrid("options"),h=f.datagrid("getColumnOption",d.field),i=d.field,j=d.width,k=f.datagrid("getPanel").find("div.datagrid-view div.datagrid-header tr.datagrid-header-row td[field="+i+"] div.datagrid-cell"),k.length&&(l=k._outerWidth()-parseInt(k[0].style.width),k.css("height",""),h.width=j,h.boxWidth=j-l,h.auto=b,k.width(h.boxWidth),f.datagrid("fixColumnSize",i),f.datagrid("fitColumns"),g.onResizeColumn.call(c,i,j)))},I=function(b,c){var d,e,f,g,h,i,j,k;c=c||{},c=a.extend({sortName:null,sortOrder:"asc"},c),d=a.util.parseJquery(b),e=a.data(b,"datagrid"),f=d.datagrid("options"),g=d.datagrid("getColumnOption",c.sortName),g&&!a.isEmptyObject(g)&&g.sortable&&!e.resizing&&(f.sortName=c.sortName,f.sortOrder=c.sortOrder,h="datagrid-sort-"+f.sortOrder,i=d.datagrid("getPanel").find(".datagrid-view .datagrid-header td div.datagrid-cell"),j=d.datagrid("getPanel").find(".datagrid-view .datagrid-header td[field='"+c.sortName+"'] div.datagrid-cell"),i.length&&j.length&&(i.removeClass("datagrid-sort-asc datagrid-sort-desc"),j.addClass(h),f.remoteSort?d.datagrid("reload"):(k=a.data(b,"datagrid").data,d.datagrid("loadData",k)),f.onSortColumn.call(b,f.sortName,f.sortOrder)))},a.fn.datagrid.extensions.parseOffset=function(b){var c={enable:b?!0:!1};return c.enable&&a.extend(c,b),c.width=a.isNumeric(c.width)?c.width:0,c.height=a.isNumeric(c.height)?c.height:0,c},J=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("options"),f=e._extensionsDatagrid?e._extensionsDatagrid:e._extensionsDatagrid={};e.offset=f.offset=a.fn.datagrid.extensions.parseOffset(c),f.offset&&f.offset.enable&&(a.isFunction(f.offsetFunction)||(f.offsetFunction=function(){if(f.offset.enable){var b=a.util.windowSize();d.datagrid("resize",{width:b.width+f.offset.width,height:b.height+f.offset.height})}},a(window).resize(f.offsetFunction)),f.offsetFunction())},K=function(b,c){if(a.string.isNullOrEmpty(c))return a();var d=a.util.parseJquery(b),e=d.datagrid("getPanel"),f=!a.string.isString(c),g=f?c.field:c,h=f?c.header:!1,i=e.find("div.datagrid-view tr.datagrid-row td[field="+g+"]");return h&&(i=i.add(e.find("div.datagrid-view tr.datagrid-header-row td[field="+g+"]"))),i},L=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getRows");return a.array.map(e,function(a){return a[c]})},M=function(b,c){if(!a.isNumeric(c)||0>c)return a();var d=a.util.parseJquery(b),e=d.datagrid("getPanel");return e.find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row[datagrid-row-index="+c+"]")},N=function(c,d){if(!a.isNumeric(d)||0>d)return b;var e=a.util.parseJquery(c),f=e.datagrid("getRows");return f[d]},O=function(b,c){if(!c||!c.field||!a.isNumeric(c.index)||c.index<0)return a();var d=a.util.parseJquery(b),e=d.datagrid("getRowDom",c.index);return e.find("td[field="+c.field+"] .datagrid-cell")},P=function(b,c){if(c&&c.field&&a.isNumeric(c.index)&&!(c.index<0)){var d=a.util.parseJquery(b),e=d.datagrid("getRowData",c.index);return e[c.field]}},Q=function(c,d){var e=a.util.parseJquery(c),f=e.datagrid("getCellDom",d);return f&&f.length?f.text():b},R=a.fn.datagrid.methods.getColumnFields,S=function(c,d){var e=a.util.parseJquery(c);return null==d||d==b||a.util.isBoolean(d)?R.call(e,e,d):a.util.isString(d)?a.array.merge([],R.call(e,e,!0),R.call(e,e,!1)):void 0},T=function(b,c){var f,g,d=a.util.parseJquery(b),e=d.datagrid("getColumnFields","all");return a.array.contains(e,c)?(f=d.datagrid("getRows"),g=a.array.clone(f),a.array.distinct(g,function(a,b){return a[c]==b[c]}),g):[]},U=function(b,c){var f,d=a.util.parseJquery(b),e=d.datagrid("getColumnFields","all");return a.array.contains(e,c)?(f=d.datagrid("getColumnData",c),a.array.distinct(f,function(a,b){return a==b}),f):[]},V=function(b,c){var d=a.util.parseJquery(b),e=S(b,c);return a.array.map(e,function(a){return d.datagrid("getColumnOption",a)})},W=function(b,c){var d=V(b,c);return a.array.filter(d,function(a){return a.hidden?!0:!1})},X=function(b,c){var d=V(b,c);return a.array.filter(d,function(a){return a.hidden?!1:!0})},Y=function(b,c){var d=W(b,c);return a.array.map(d,function(a){return a.field})},Z=function(b,c){var d=X(b,c);return a.array.map(d,function(a){return a.field})},$=function(c,d,e,f,g,h,i){var n,o,p,j=e||a.util.parseJquery(c),k=g||j.datagrid("getRows"),l=a.isFunction(d)?C(c,d,j,k):d,m=j.datagrid("getRowIndex",l);i=null==i||i==b||1==i?!0:!1,m>-1&&(n=f||j.datagrid("options"),o=j.datagrid("getRowData",m),p=h||(n._extensionsDatagrid?n._extensionsDatagrid:n._extensionsDatagrid={}),p.filterData=a.isArray(p.filterData)?p.filterData:p.filterData=[],j.datagrid("getRowDom",m).show(),a.array.remove(p.filterData,o),i&&tb(j,n,p,k))},_=function(c,d,e,f,g,h,i){var n,o,p,j=e||a.util.parseJquery(c),k=g||j.datagrid("getRows"),l=a.isFunction(d)?C(c,d,j,k):d,m=j.datagrid("getRowIndex",l);i=null==i||i==b||1==i?!0:!1,m>-1&&(n=f||j.datagrid("options"),o=j.datagrid("getRowData",m),p=h||(n._extensionsDatagrid?n._extensionsDatagrid:n._extensionsDatagrid={}),p.filterData=a.isArray(p.filterData)?p.filterData:[],j.datagrid("unselectRow",m).datagrid("uncheckRow",m).datagrid("getRowDom",m).hide(),a.array.attach(p.filterData,o),i&&tb(j,n,p,k))},ab=function(b,c){var g,i,j,d=a.util.parseJquery(b),e=d.datagrid("options"),f=d.datagrid("getRows"),h=e._extensionsDatagrid?e._extensionsDatagrid:e._extensionsDatagrid={};c===!0?(h.filterData=[],i=d.datagrid("getPanel"),j=i.find("div.datagrid-header-filter-item-icon"),i.find(".datagrid-view .datagrid-body tr.datagrid-row").show(),wb(j,"tree-checkbox1")):g=a.isFunction(c)?a.array.filter(f,c):a.array.likeArray(c)&&!a.util.isString(c)?c:[c],g&&(a.each(g,function(a,c){$(b,c,d,e,f,h,!1)}),tb(d,e,h,f))},bb=function(b,c){var g,i,j,d=a.util.parseJquery(b),e=d.datagrid("options"),f=d.datagrid("getRows"),h=e._extensionsDatagrid?e._extensionsDatagrid:e._extensionsDatagrid={};c===!0?(d.datagrid("unselectAll").datagrid("uncheckAll"),h.filterData=a.array.clone(f),i=d.datagrid("getPanel"),j=i.find("div.datagrid-header-filter-item-icon"),i.find(".datagrid-view .datagrid-body tr.datagrid-row").hide(),wb(j,"tree-checkbox0")):g=a.isFunction(c)?a.array.filter(f,c):a.array.likeArray(c)&&!a.util.isString(c)?c:[c],g&&(a.each(g,function(a,c){_(b,c,d,e,f,h,!1)}),tb(d,e,h,f))},cb=function(b){var c=a.util.parseJquery(b),d=c.datagrid("options"),e=d._extensionsDatagrid?d._extensionsDatagrid:d._extensionsDatagrid={};return e.filterData},db=function(b){var c=a.util.parseJquery(b),d=c.datagrid("options"),e=c.datagrid("getRows"),f=d._extensionsDatagrid?d._extensionsDatagrid:d._extensionsDatagrid={},g=a.isArray(f.filterData)?f.filterData:[];return a.array.filter(e,function(b){return a.array.contains(g,b)?!1:!0})},eb=function(b,c){var i,j,k,d=a.util.parseJquery(b),e=d.datagrid("options"),f=e._extensionsDatagrid?e._extensionsDatagrid:e._extensionsDatagrid={},g=d.datagrid("getPanel"),h="div.datagrid-view div.datagrid-header tr.datagrid-header-row div.datagrid-header-filter-container";c?(e.columnFilter=c,mb(d,e,f),a.util.exec(function(){g.find(h).hide().slideDown("slow")})):(i=g.find(h),j=i.length,k=0,i.slideUp("slow",function(){++k==j&&(nb(d,e),e.columnFilter=c)}))},fb=function(b,c){var e,f,g,h,i,d=a.util.parseJquery(b);return a.util.isBoolean(c)?(d.datagrid(c?"showRows":"hideRows",!0),void 0):(c&&c.field&&(e=c.field,f=c.value,g=a.array.likeArray(f)&&!a.util.isString(f),h=g?function(b){return a.array.contains(f,b[e])}:function(a){return f==a[e]},i=d.datagrid("findRows",h),d.datagrid(c.selected?"showRows":"hideRows",i)),void 0)},gb=function(b,c){var d=a.util.parseJquery(b),e=a.data(d[0],"datagrid");e.options,e.highlightField&&d.datagrid("getColumnDom",{field:e.highlightField,header:!0}).removeClass("datagrid-row-over"),d.datagrid("getColumnDom",{field:c,header:!0}).filter(function(){return!a(this).parent().hasClass("datagrid-row-selected")}).addClass("datagrid-row-over"),e.highlightField=c},hb=function(b,c){var f,g,k,d=a.util.parseJquery(b),e=d.datagrid("getPanel"),h=c,i=!1,j=!0;a.isPlainObject(c)?(h=c.value,g=c.field,i=c.regular,j=c.ignoreCase,f=e.find("div.datagrid-body tr.datagrid-row td["+(g?"field="+g:"field")+"] div.datagrid-cell")):f=e.find("div.datagrid-body tr.datagrid-row td[field] div.datagrid-cell"),k=i?new RegExp(h,j?"gm":"igm"):h,f.each(function(){var c,b=a(this);b.find("span.datagrid-cell-hightlight").replaceWith(function(){return a(this).text()}),h&&(c=b.html(),c&&b.html(a.string.replaceAll(c,h,"<span class='datagrid-cell-hightlight'>"+h+"</span>")))})},ib=function(b,c){c=a.string.toBoolean(c),alert("导出"+(c?"全部":"当前页")+"数据")},jb=a.fn.datagrid.extensions.initColumnExtendProperty=function(c){(null==c.tooltip||c.tooltip==b)&&(c.tooltip=!1),null!=c.filterable&&c.filterable!=b&&a.util.isBoolean(c.filterable)||(c.filterable=!0),null!=c.hidable&&c.hidable!=b&&a.util.isBoolean(c.hidable)||(c.hidable=!0),null!=c.filter&&c.filter!=b&&a.util.isString(c.filter)||(c.filter="checkbox"),null!=c.precision&&c.precision!=b&&a.isNumeric(c.precision)||(c.precision=1),null!=c.step&&c.step!=b&&a.isNumeric(c.step)||(c.step=1)},kb=a.fn.datagrid.extensions.initColumnExtendProperties=function(b,c){if(!c._initializedExtendProperties){var d=b.datagrid("getColumns","all");a.each(d,function(){jb(this)}),c._initializedExtendProperties=!0}},lb=a.fn.datagrid.extensions.initRowDndExtensions=function(a,b){b=b||a.datagrid("options"),b.dndRow&&a.datagrid("enableRowDnd")},a.fn.datagrid.extensions.parseHeaderContextMenuMap=function(b,c,d,e,f){return a.array.map(e,function(e){if(!e||a.util.isString(e))return e;var h=a.extend({},e);return h.id=a.isFunction(e.id)?e.id.call(h,b,c,d,f):e.id,h.text=a.isFunction(e.text)?e.text.call(h,b,c,d,f):e.text,h.iconCls=a.isFunction(e.iconCls)?e.iconCls.call(h,b,c,d,f):e.iconCls,h.disabled=a.isFunction(e.disabled)?e.disabled.call(h,b,c,d,f):e.disabled,h.hideOnClick=a.isFunction(e.hideOnClick)?e.hideOnClick.call(h,b,c,d,f):e.hideOnClick,h.onclick=a.isFunction(e.onclick)?function(a,b,g){e.onclick.call(this,a,c,d,f,b,g)}:e.onclick,h.handler=a.isFunction(e.handler)?function(a,b,g){e.handler.call(this,a,c,d,f,b,g)}:e.handler,h.children&&h.children.length&&(h.children=a.fn.datagrid.extensions.parseHeaderContextMenuMap(b,c,d,h.children,f)),h})},a.fn.datagrid.extensions.parseRowContextMenuMap=function(b,c,d,e,f,g){return a.array.map(f,function(f){if(!f||a.util.isString(f))return f;var i=a.extend({},f);return i.id=a.isFunction(f.id)?f.id.call(i,b,c,d,e,g):f.id,i.text=a.isFunction(f.text)?f.text.call(i,b,c,d,e,g):f.text,i.iconCls=a.isFunction(f.iconCls)?f.iconCls.call(i,b,c,d,e,g):f.iconCls,i.disabled=a.isFunction(f.disabled)?f.disabled.call(i,b,c,d,e,g):f.disabled,i.hideOnClick=a.isFunction(f.hideOnClick)?f.hideOnClick.call(i,b,c,d,e,g):f.hideOnClick,i.onclick=a.isFunction(f.onclick)?function(a,b,h){f.onclick.call(this,a,c,d,e,g,b,h)}:f.onclick,i.handler=a.isFunction(f.handler)?function(a,b,h){f.handler.call(this,a,c,d,e,g,b,h)}:f.handler,i.children&&i.children.length&&(i.children=a.fn.datagrid.extensions.parseRowContextMenuMap(b,c,d,e,i.children,g)),i})},a.fn.datagrid.extensions.parseContextMenuEventData=function(b,c,d){var e=a.fn.datagrid.extensions.parseRemoteQueryParams(c),f=a.fn.datagrid.extensions.parsePaginationParams(b,c);return a.extend({},e,f,{e:d,grid:b})},a.fn.datagrid.extensions.parsePaginationParams=function(b,c){var e,f,g,h,d={};return c.pagination&&(e=b.datagrid("getPager"),f=e.pagination("options"),g=f.total,h=Math.ceil(parseFloat(g)/parseFloat(f.pageSize)),a.extend(d,{pager:e,total:g,pageCount:h})),d},a.fn.datagrid.extensions.parseRemoteQueryParams=function(b){var c=a.extend({},b.queryParams);return b.pagination&&a.extend(c,{page:b.pageNumber,rows:b.pageSize}),b.sortName&&a.extend(c,{sort:b.sortName,order:b.sortOrder}),c=a.fn.datagrid.extensions.parsePagingQueryParams(b,c)},Lb=function(b,c){var d=b.datagrid("getRows");b.datagrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").each(function(){var e=a(this),f=parseInt(e.attr("datagrid-row-index")),g=d[f];Mb(b,c,f,g,e)})},Mb=function(b,c,d,e,f){function h(){var e=b.datagrid("getColumns","all"),f=a("<table></table>").css({padding:"5px"});return a.each(e,function(a,c){if(c&&c.field&&c.title){var e=b.datagrid("getCellDisplay",{field:c.field,index:d});f.append("<tr><td style='text-align: right; width: 150px;'>"+c.title+":</td><td style='width: 250px;'>"+e+"</td></tr>")}}),f}if(f=f||b.datagrid("getRowDom",d),c.rowTooltip){var g=function(){var g=a(this),i=a.isFunction(c.rowTooltip)?c.rowTooltip.call(f,d,e):h(e);g.tooltip("update",i)};f.each(function(){a.easyui.tooltip.init(this,{onShow:g})})}else f.children("td[field]").each(function(){var h,i,c=a(this),f=c.attr("field"),g=b.datagrid("getColumnOption",f);g&&g.tooltip&&(h=c.find("div.datagrid-cell"),i=function(){var c=a(this),i=a.isFunction(g.tooltip)?g.tooltip.call(h,e[f],d,e):e[f];c.tooltip("update",i)},a.easyui.tooltip.init(h,{onShow:i}))})},Nb=function(b,c,d){var e,f,g,h,i,j,l,m,n,o,p;c.extEditing&&(e=b.datagrid("getRowDom",d),e.length&&(f=b.datagrid("getPanel").find("div.datagrid-view"),g=f.find("div.datagrid-view1"),h=f.find("div.datagrid-view2"),i=h.find("div.datagrid-body"),j=g.outerWidth(),f.position(),l=p>0?p:0,i.css("position","relative"),m=e.outerHeight(),n=e.position().top+m+i.scrollTop()-h.find("div.datagrid-header").outerHeight(),o=a("<div></div>").addClass("dialog-button datagrid-rowediting-panel").appendTo(i).css("top",n).attr("datagrid-row-index",d),a("<a></a>").linkbutton({plain:!1,iconCls:"icon-ok",text:"保存"}).appendTo(o).click(function(){b.datagrid("endEdit",d)}),a("<a></a>").linkbutton({plain:!1,iconCls:"icon-cancel",text:"取消"}).appendTo(o).click(function(){b.datagrid("cancelEdit",d)}),p=(c.width-o.outerWidth())/2-j,l=p>0?p:0,o.css("left",l)))},Ob=function(a,b,c){b=b||a.datagrid("getPanel").find("div.datagrid-view div.datagrid-view2 div.datagrid-body"),b.find("div.datagrid-rowediting-panel[datagrid-row-index="+c+"]").remove()},Pb=function(a,b,c){b.extEditing&&(body=a.datagrid("getPanel").find("div.datagrid-view div.datagrid-view2 div.datagrid-body"),Ob(a,body,c))},Qb=function(a,b,c){var d=b._extensionsDatagrid?b._extensionsDatagrid:b._extensionsDatagrid={};b.singleEditing&&a.datagrid("endEdit",d.lastEditingIndex),d.lastEditingIndex=c},Rb=a.fn.datagrid.extensions.initExtensions=function(b,c){function f(){kb(b,d)}function g(){b.datagrid("setOffset",c.offset)}function h(){Ab(b,c,d),Bb(b,c,d),Cb(b,c,d)}function i(){Eb(b,c,d)}var e,j,d=c._extensionsDatagrid?c._extensionsDatagrid:c._extensionsDatagrid={};d._initialized||(e=b.datagrid("getColumnFields",!1),d.fields=a.array.filter(e,function(a){return b.datagrid("getColumnOption",a).title?!0:!1}),d.fieldOptions=a.array.map(d.fields,function(a){return b.datagrid("getColumnOption",a)}),d.fieldOptionsBackup=a.array.map(d.fieldOptions,function(b){return a.extend({},b)}),d.filterData=[],f(),g(),h(),i(),j=b.datagrid("getRows"),j&&j.length||mb(b,c,d),d._initialized=!0)},a.fn.datagrid.extensions.parseOrderbyParams=function(b,c){return b=a.string.isNullOrWhiteSpace(b)?"":a.trim(b),c=a.string.isNullOrWhiteSpace(c)?"":a.trim(c),c=c.toLowerCase(),"asc"!=c&&"desc"!=c&&(c="asc"),a.trim(b+" "+c)},a.fn.datagrid.extensions.parsePagingQueryParams=function(b,c){var d=a.util.parseMapFunction(c);return b.pagination&&(d.pageNumber=d.page,d.pageSize=d.rows,d.pageIndex=d.pageNumber-1),d.orderby=a.fn.datagrid.extensions.parseOrderbyParams(d.sort,d.order),d},Sb=a.fn.datagrid.extensions.clearFilterData=function(a){var b=a._extensionsDatagrid?a._extensionsDatagrid:a._extensionsDatagrid={};b.filterData=[]},Tb=a.fn.datagrid.extensions.loader=function(b,c,d){var e=a.util.parseJquery(this),f=e.datagrid("options");return Rb(e,f),f.url?(b=a.fn.datagrid.extensions.parsePagingQueryParams(f,b),a.ajax({type:f.method,url:f.url,data:b,dataType:"json",success:function(a){Sb(f),c(a)},error:function(){d.apply(this,arguments)}}),void 0):!1},Ub=function(b){return b?a.isArray(b)?{total:b.length,rows:b}:b:{total:0,rows:[]}},Vb=a.fn.datagrid.defaults.onLoadSuccess,Wb=a.fn.datagrid.extensions.onLoadSuccess=function(){a.isFunction(Vb)&&Vb.apply(this,arguments);var c=a.util.parseJquery(this),d=c.datagrid("options"),e=d._extensionsDatagrid?d._extensionsDatagrid:d._extensionsDatagrid={};mb(c,d,e),lb(c,d),Lb(c,d)},Xb=a.fn.datagrid.defaults.onResizeColumn,Yb=a.fn.datagrid.extensions.onResizeColumn=function(b){var d,e,f,g,h;a.isFunction(Xb)&&Xb.apply(this,arguments),d=a.util.parseJquery(this),e=d.datagrid("options"),e.columnFilter&&(f=d.datagrid("getPanel"),g=d.datagrid("getColumnOption",b),h=f.find("div.datagrid-header-filter-container[field="+b+"]"),h.width(g.width))},Zb=a.fn.datagrid.defaults.onBeforeEdit,$b=a.fn.datagrid.extensions.onBeforeEdit=function(b){a.isFunction(Zb)&&Zb.apply(this,arguments);var d=a.util.parseJquery(this),e=d.datagrid("options");Nb(d,e,b),Qb(d,e,b),d.datagrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable("disable")},_b=a.fn.datagrid.defaults.onAfterEdit,ac=a.fn.datagrid.extensions.onAfterEdit=function(b,c){a.isFunction(_b)&&_b.apply(this,arguments);var e=a.util.parseJquery(this),f=e.datagrid("options"),g=f._extensionsDatagrid?f._extensionsDatagrid:f._extensionsDatagrid={};Pb(e,f,b),mb(e,f,g),lb(e,f),Mb(e,f,b,c)},bc=a.fn.datagrid.defaults.onCancelEdit,cc=a.fn.datagrid.extensions.onCancelEdit=function(b,c){a.isFunction(bc)&&bc.apply(this,arguments);var d=a.util.parseJquery(this),e=d.datagrid("options");Pb(d,e,b),lb(d,e),Mb(d,e,b,c)},dc=a.fn.datagrid.extensions.methods={updateRow:function(a,b){return a.each(function(){f(this,b)})},appendRow:function(a,b){return a.each(function(){g(this,b)})},insertRow:function(a,b){return a.each(function(){h(this,b)})},isChecked:function(a,b){return i(a[0],b)},isSelected:function(a,b){return j(a[0],b)},freezeColumn:function(a,b){return a.each(function(){k(this,b)})},unfreezeColumn:function(a,b){return a.each(function(){l(this,b)})},moveRow:function(a,b){return a.each(function(){m(this,b)})},shiftRow:function(a,b){return a.each(function(){n(this,b)})},nextRow:function(a,b){return o(a[0],b)},prevRow:function(a,b){return p(a[0],b)},popRow:function(a,b){return q(a[0],b)},enableRowDnd:function(a){return a.each(function(){r(this)})},disableRowDnd:function(a){return a.each(function(){s(this)})},moveColumn:function(a,b){return a.each(function(){v(this,b)})},shiftColumn:function(a,b){return a.each(function(){w(this,b)})},nextColumn:function(a,b){return t(a[0],b)},prevColumn:function(a,b){return u(a[0],b)},deleteColumn:function(a,b){return a.each(function(){x(this,b)})},popColumn:function(a){return y(a[0],param)},getColumnDom:function(a,b){return K(a[0],b)},getColumnData:function(a,b){return L(a[0],b)},getRowDom:function(a,b){return M(a[0],b)},getRowData:function(a,b){return N(a[0],b)},getCellDom:function(a,b){return O(a[0],b)},getCellData:function(a,b){return P(a[0],b)},getCellDisplay:function(a,b){return Q(a[0],b)},getColumnFields:function(a,b){return S(a[0],b)},getDistinctRows:function(a,b){return T(a[0],b)},getDistinctColumnData:function(a,b){return U(a[0],b)},getColumns:function(a,b){return V(a[0],b)},getHiddenColumns:function(a,b){return W(a[0],b)},getVisibleColumns:function(a,b){return X(a[0],b)},getHiddenColumnFields:function(a,b){return Y(a[0],b)},getVisibleColumnFields:function(a,b){return Z(a[0],b)},showRow:function(a,b){return a.each(function(){$(this,b)})},hideRow:function(a,b){return a.each(function(){_(this,b)})},showRows:function(a,b){return a.each(function(){ab(this,b)})},hideRows:function(a,b){return a.each(function(){bb(this,b)})},getHiddenRows:function(a){return cb(a[0])},getVisibleRows:function(a){return db(a[0])},highlightColumn:function(a,b){return a.each(function(){gb(this,b)})},livesearch:function(a,b){return a.each(function(){hb(this,b)})},hasMuliRowHeader:function(a){return A(a[0])},findRow:function(a,b){return C(a[0],b)},findRows:function(a,b){return B(a[0],b)},deleteRow:function(a,b){return a.each(function(){E(this,b)})},deleteRows:function(a,b){return a.each(function(){F(this,b)})},sort:function(a,b){return a.each(function(){I(this,b)})},setColumnTitle:function(a,b){return a.each(function(){G(this,b)})},setColumnWidth:function(a,b){return a.each(function(){H(this,b)})},setOffset:function(a,b){return a.each(function(){J(this,b)})},setColumnFilter:function(a,b){return a.each(function(){eb(this,b)})},columnFilterSelect:function(a,b){return a.each(function(){fb(this,b)})},exportExcel:function(a,b){return a.each(function(){ib(this,b)})}},ec=a.fn.datagrid.extensions.defaults={offset:null,loadFilter:Ub,autoBindDblClickRow:!0,dblClickRowMenuIndex:0,exportMenu:!1,selectOnRowContextMenu:!1,hideDisabledMenu:!1,headerContextMenu:null,rowContextMenu:null,enableHeaderClickMenu:!0,enableHeaderContextMenu:!0,enableRowContextMenu:!0,moveMenu:!1,pagingMenu:!1,refreshMenu:!0,dndRow:!1,rowTooltip:!1,extEditing:!0,autoEditing:!1,singleEditing:!0,columnFilter:null,loader:Tb,onLoadSuccess:Wb,onResizeColumn:Yb,onBeforeEdit:$b,onAfterEdit:ac,onCancelEdit:cc,onBeforeDeleteColumn:function(){},onDeleteColumn:function(){},onBeforeMoveColumn:function(){},onMoveColumn:function(){},onBeforeDrop:function(){},onDrop:function(){},onBeforeDrag:function(){},onStartDrag:function(){},onStopDrag:function(){},onDragEnter:function(){},onDragOver:function(){},onDragLeave:function(){},onBeforeUpdateRow:function(){},onUpdateRow:function(){},onBeforeAppendRow:function(){},onAppendRow:function(){},onBeforeInsertRow:function(){},onBeforeRow:function(){}},a.extend(a.fn.datagrid.defaults,ec),a.extend(a.fn.datagrid.methods,dc),fc=".datagrid-rowediting-panel { position: absolute; display: block; border: 1px solid #ddd; padding: 5px 5px; }.datagrid-body td.datagrid-header-cell-top { border-top-color: red; border-top-width: 2px; border-top-style: dotted; }.datagrid-body td.datagrid-header-cell-bottom { border-bottom-color: red; border-bottom-width: 2px; border-bottom-style: dotted; }.datagrid-cell-hightlight { font-weight: bold; background-color: Yellow; }.datagrid-header-cell-arrow { float: right; cursor: pointer; border-left-style: dotted; display: none; border-left-width: 0px; }.datagrid-header-cell-arrow-show { display: inline; border-left-width: 1px; }.datagrid-header-filter { text-align: center; overflow: auto; }.datagrid-header-filter-top { vertical-align: top; }.datagrid-header-filter-bottom { vertical-align: bottom; }.datagrid-header-filter-cell { white-space: nowrap; }.datagrid-header-filter-line { border-width: 0px; border-top-width: 1px; border-style: dotted; border-color: #ccc; margin-top: 3px; margin-bottom: 3px; }.datagrid-header-filter-container { padding-top: 5px; overflow: auto; font-size: 11px; text-align: left; }.datagrid-header-filter-livebox-text { margin-left: 10px; margin-top: 10px; overflow: auto; font-size: 11px; text-align: left; }.datagrid-header-filter-livebox { margin-left: 10px; width: 60px; height: 12px; font-size: 11px; }.datagrid-header-filter-item { overflow: hidden; padding: 0px; margin: 0px; cursor: pointer; white-space: nowrap; margin: 2px; }.datagrid-header-filter-item:hover { filter: alpha(opacity=60); opacity: 0.6; }.datagrid-header-filter-item-text { padding-left: 20px; float: left; }.datagrid-header-filter-item-icon { left: 2px; top: 50%; width: 16px; height: 16px; margin-top: -3px; }.datagrid-header-filter-itemwrap { overflow: hidden; padding-left: 5px; white-space: nowrap; height: 20px; }.datagrid-header-filter-slider { }.datagrid-header-filter-sliderwrap { overflow: hidden; padding-left: 30px; padding-top: 15px; }.datagrid-header-filter-sliderwrap .slider-rulelabel span { font-size: 11px; }.datagrid-header-filter-numeric { width: 60px; height: 12px; font-size: 11px; }",a.util.addCss(fc)}(jQuery);

//15,jeasyui.extensions.treegrid.js
!function(a,b){function kb(b,c,d){var e,f,g,h,i,j,k,n;d=d||(c._extensionsTreegrid?c._extensionsTreegrid:c._extensionsTreegrid={}),a.fn.datagrid.extensions.initColumnExtendProperties(b,d),e=b.treegrid("getData"),f=d.oldData,e!=f&&(d.filterData=[]),lb(b,c),c.columnFilter&&(d.oldData=e,g=b.treegrid("getPanel").find("div.datagrid-view div.datagrid-header"),h=g.find("table.datagrid-htable tr.datagrid-header-row"),i=h.find("td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),j=c.columnFilter=a.extend({panelHeight:100,position:"top"},c.columnFilter),k=a.array.contains(["top","bottom"],j.position)?j.position:"top",j.panelHeight=a.isNumeric(j.panelHeight)&&j.panelHeight>=60?j.panelHeight:60,g.height(),n=b.treegrid("getRows"),i.each(function(){var e=a(this).addClass("datagrid-header-filter").removeClass("datagrid-header-filter-top datagrid-header-filter-bottom"),g=(e.find("div.datagrid-cell").addClass("datagrid-header-filter-cell"),e.attr("field")),h=b.treegrid("getColumnOption",g),l=h.width,o=(a("<hr />").addClass("datagrid-header-filter-line")["top"==k?"prependTo":"appendTo"](this),a("<div></div>").attr("field",g).addClass("datagrid-header-filter-container").css({height:j.panelHeight,width:l})["top"==k?"prependTo":"appendTo"](this));e.addClass("top"==k?"datagrid-header-filter-top":"datagrid-header-filter-bottom"),g&&mb(b,c,d,o,h,n,i)}),d.filterData&&d.filterData.length?b.treegrid("hideRows",d.filterData):rb(b,c,d,n,i))}function lb(b,c){var d,e;c.columnFilter&&(d=b.treegrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),d.removeClass("datagrid-header-filter datagrid-header-filter-top datagrid-header-filter-bottom").find("div.datagrid-cell").removeClass("datagrid-header-filter-cell"),d.find("hr.datagrid-header-filter-line,div.datagrid-header-filter-container").remove(),e=b.treegrid("getColumnFields","all"),b.datagrid("fixColumnSize",e[e.length-1]))}function mb(b,c,d,e,f,g,h){if(f.filterable){var i=f.field,j=b.treegrid("getDistinctColumnData",i),k=a.array.contains(["checkbox","livebox","caps","lower","none"],f.filter)?f.filter:"checkbox",l=f.precision,m=f.step;switch(k){case"checkbox":nb(b,c,d,e,i,g,j);break;case"livebox":ob(b,c,e,i,g);break;case"caps":pb(b,c,e,i,m,l,g,j,"<=",c.columnFilter.panelHeight,h);break;case"lower":pb(b,c,e,i,m,l,g,j,">=",c.columnFilter.panelHeight,h);break;case"none":}}}function nb(b,c,d,e,f,g,h){a.each(h,function(d,h){var i=a("<div></div>").addClass("datagrid-header-filter-item").attr("text",h).appendTo(e),l=(a("<div></div>").addClass("datagrid-header-filter-item-text").text(h).appendTo(i),a("<div></div>").addClass("datagrid-header-filter-item-icon").appendTo(i),function(){var d=a.array.filter(g,function(a){return a[f]==h}),e=b.treegrid("getHiddenRows"),i=a.array.filter(e,function(a){return a[f]==h});b.treegrid(i.length?"showRows":"hideRows",a.array.map(d,function(a){return a[c.idField]}))});i.click(l)})}function ob(b,c,d,e,f){var g,h;a("<div></div>").addClass("datagrid-header-filter-livebox-text").text("模糊过滤：").appendTo(d),g=a("<input />").addClass("datagrid-header-filter-livebox").appendTo(d),h=a("<a />").linkbutton({plain:!0,iconCls:"icon-search"}).appendTo(d).click(function(){var d,h;return b.treegrid("showRows",!0),d=g.val(),a.string.isNullOrEmpty(d)?(g.focus(),void 0):(h=a.array.filter(f,function(a){return-1==String(a[e]).indexOf(d)}),b.treegrid("hideRows",a.array.map(h,function(a){return a[c.idField]})),g.focus(),void 0)}),a("<a />").linkbutton({plain:!0,iconCls:"icon-undo"}).appendTo(d).click(function(){var a=g.val();a?(g.val("").focus(),h.click()):g.focus()}),g.keypress(function(a){13==a.which&&h.click()})}function pb(b,c,d,e,f,g,h,i,j,k,l){var m=a.array.map(i,function(b){return b=parseFloat(b),a.isNumeric(b)?b:0}),n=m.length?a.array.min(m):0,o=m.length?a.array.max(m):0,p=m.length?a.array.max(m,function(b,c){return a.util.compare(a.number.precision(b),a.number.precision(c))}):0,q=m.length?a.number.precision(p):0,r=k-45,s=a("<div></div>").addClass("datagrid-header-filter-itemwrap").text(j).appendTo(d),t=a("<div></div>").addClass("datagrid-header-filter-sliderwrap").css({height:r+10})["<="==j?"appendTo":"prependTo"](d),u=a("<input />").addClass("datagrid-header-filter-numeric").appendTo(s),v=a("<input />").addClass("datagrid-header-filter-slider").appendTo(t),w=function(a){qb(b,c,e,h,a,j,u,v,l)};u.numberbox({value:"<="==j?o:n,min:n,max:o,precision:g,onChange:w}),u.keypress(function(b){if(13==b.which){var c=u.val();u.numberbox("setValue",a.isNumeric(c)?c:0)}}),v.slider({height:r,mode:"v",showTip:!0,value:"<="==j?o:n,min:n,max:o,rule:[n,"|",o],step:f,onSlideEnd:w,tipFormatter:function(b){return a.number.round(b||0,q)}})}function qb(b,c,d,e,f,g,h,i,j){var m,k=j||b.treegrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),l=k.filter(function(){return a(this).attr("field")==d});h=h?h:l.find(".datagrid-header-filter-numeric"),i=i?i:l.find(".datagrid-header-filter-slider"),m=a.array.filter(e,function(b){return b=parseFloat(b[d]),b=a.isNumeric(b)?b:0,">="==g?f>b:b>f}),b.treegrid("showRows",!0).treegrid("hideRows",a.array.map(m,function(a){return a[c.idField]})),h.numberbox("setValue",f),i.slider("setValue",f)}function rb(b,c,d,e,f){c.columnFilter&&(f=f||b.treegrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),f.each(function(){var c=a(this),f=c.attr("field");sb(b,d,e,c,f)}))}function sb(b,c,d,e,f){var g=b.treegrid("getColumnOption",f),i=(g.precision,a.array.contains(["checkbox","livebox","caps","lower","none"],g.filter)?g.filter:"checkbox");switch(i){case"checkbox":tb(b,c,d,e,f);break;case"livebox":vb(b,c,d,e,f);break;case"caps":wb(b,c,d,e,f);break;case"lower":xb(b,c,d,e,f);break;case"none":}}function tb(b,c,d,e,f){e.find("div.datagrid-header-filter-item").each(function(){var c=a(this),e=c.attr("text"),g=c.find("div.datagrid-header-filter-item-icon"),h=a.array.sum(d,function(a){return a[f]==e?1:0}),i=b.treegrid("getHiddenRows"),j=a.array.sum(i,function(a){return a[f]==e?1:0}),k=0==j?"tree-checkbox1":j>=h?"tree-checkbox0":"tree-checkbox2";a.easyui.tooltip.init(c,{content:(a.string.isNullOrEmpty(e)?"空白":e)+": 共"+h+"个元素"}),ub(g,k)})}function ub(a,b){a.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2").addClass(b)}function vb(){}function wb(){}function xb(){}function yb(b,c,d){var e=b.datagrid("options");d.onHeaderContextMenuBak=c.onHeaderContextMenu,c.onHeaderContextMenu=e.onHeaderContextMenu=function(e,f){if(a.isFunction(d.onHeaderContextMenuBak)&&d.onHeaderContextMenuBak.apply(this,arguments),c.enableHeaderContextMenu){var g=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),h=Cb(b,c,d,e,f,g);a.easyui.showMenu({items:h,left:e.pageX,top:e.pageY,hideDisabledMenu:c.hideDisabledMenu}),e.preventDefault()}}}function zb(b,c,d){d.onContextMenuBak=c.onContextMenu,c.onContextMenu=function(e,f){if(a.isFunction(d.onContextMenuBak)&&d.onContextMenuBak.apply(this,arguments),c.selectOnRowContextMenu&&b.treegrid("select",f[c.idField]),c.enableRowContextMenu){var g=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),h=Db(b,c,d,e,f,g);c.autoBindDblClickRow&&c.dblClickRowMenuIndex>=0&&a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)&&c.rowContextMenu.length>c.dblClickRowMenuIndex&&(h[c.dblClickRowMenuIndex].bold=!0),a.easyui.showMenu({items:h,left:e.pageX,top:e.pageY,hideDisabledMenu:c.hideDisabledMenu}),e.preventDefault()}}}function Ab(b,c,d){c.enableHeaderClickMenu&&b.treegrid("getPanel").find(".datagrid-view .datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}).find("div.datagrid-cell").each(function(){Bb(b,c,d,this)})}function Bb(b,c,d,e){e=a.util.parseJquery(e),e.off(".hoverArrow");var f=a("<span class='s-btn-downarrow datagrid-header-cell-arrow'>&nbsp;</span>").click(function(e){var g=a(this),h=g.offset(),i=g.outerHeight(),j=g.parent().parent().attr("field"),k=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),l=Cb(b,c,d,e,j,k),m=a.easyui.showMenu({items:l,left:h.left,top:h.top+i}),n=m.menu("options"),o=n.onHide;return f.hidable=!1,n.onHide=function(){f.hidable=!0,f.removeClass("datagrid-header-cell-arrow-show"),o.apply(this,arguments)},!1}).prependTo(e);e.on({"mouseenter.hoverArrow":function(){f.addClass("datagrid-header-cell-arrow-show")},"mouseleave.hoverArrow":function(){(!a.util.isBoolean(f.hidable)||f.hidable)&&f.removeClass("datagrid-header-cell-arrow-show")}})}function Cb(b,c,d,e,f,g){var j,h=[],i=a.util.likeArray(c.headerContextMenu)&&!a.util.isString(c.headerContextMenu)?c.headerContextMenu:[];return i.length&&a.array.merge(h,i),j=Eb(b,c,d,e,f,g),j.length&&a.array.merge(h,"-",j),h=a.fn.datagrid.extensions.parseHeaderContextMenuMap(e,f,g,h,b),"-"==h[0]&&a.array.removeAt(h,0),h}function Db(b,c,d,e,f,g){var j,h=[],i=a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)?c.rowContextMenu:[];return i.length&&a.array.merge(h,i),j=Hb(b,c,d,e,f,g),j.length&&a.array.merge(h,"-",j),h=a.fn.treegrid.extensions.parseRowContextMenuMap(e,f,g,h,b),"-"==h[0]&&a.array.removeAt(h,0),h}function Eb(b,c,d,e,f,g){var l,m,n,o,p,q,r,h=[],i=c.exportMenu,j=b.treegrid("getColumnOption",f),k=b.treegrid("getColumnOption",f).sortable;return"object"==typeof i&&(i=a.extend({current:!1,all:!1,submenu:!0},i)),l={text:"升序",iconCls:"icon-standard-hmenu-asc",disabled:1!=k,handler:function(){return b.treegrid("sort",{sortName:f,sortOrder:"asc"})}},m={text:"降序",iconCls:"icon-standard-hmenu-desc",disabled:1!=k,handler:function(){return b.treegrid("sort",{sortName:f,sortOrder:"desc"})}},n={text:"显示/隐藏列",iconCls:"icon-standard-application-view-columns",disabled:!1,children:[{text:"显示全部列",iconCls:function(){var b=d.fields?d.fields.length:0,c=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1});return c>=b?"tree-checkbox1":0==c?"tree-checkbox0":"tree-checkbox2"},hideOnClick:!1,handler:function(b,c,e,f,g,h){a.each(d.fields,function(){f.treegrid("showColumn",this)}),a(this).parent().children("div.menu-item:not(:eq(1))").each(function(){h.menu("setIcon",{target:this,iconCls:"tree-checkbox1"}),h.menu("enableItem",this)})}},{text:"还原默认",iconCls:"icon-standard-application-view-tile",hideOnClick:!1,handler:function(b,c,e,f,g,h){a.each(d.fieldOptionsBackup,function(){f.treegrid(1==this.hidden?"hideColumn":"showColumn",this.field)});var i=a(this).parent();i.children("div.menu-item:gt(1)").each(function(){var b=a(this).text(),c=a.array.first(d.fieldOptions,function(a){return a.title==b});c&&h.menu("setIcon",{target:this,iconCls:c.hidden?"tree-checkbox0":"tree-checkbox1"}),h.menu("enableItem",this)}),i.children("div.menu-item:first").each(function(){var b=d.fields?d.fields.length:0,c=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1});h.menu("setIcon",{target:this,iconCls:c>=b?"tree-checkbox1":0==c?"tree-checkbox0":"tree-checkbox2"})})}},"-"]},o={text:"过滤/显示",iconCls:"icon-standard-application-view-list",disabled:!j.filterable,children:[]},p={text:"导出当前页",iconCls:"icon-standard-page-white-put",disabled:!(1==i||1==i.current),handler:function(){return b.treegrid("exportExcel",!1)}},q={text:"导出全部",iconCls:"icon-standard-page-white-stack",disabled:!(1==i||1==i.all),handler:function(){return b.treegrid("exportExcel",!0)}},a.util.merge(n.children,Fb(b,c,d,e,f,g)),j.filterable&&a.util.merge(o.children,Gb(b,c,d,e,f,g)),a.util.merge(h,[l,m,"-",n,o]),r=[p,q],i&&a.array.merge(h,"-","object"!=typeof i||i.submenu?{text:"导出数据",iconCls:"icon-standard-page-save",children:r}:r),h}function Fb(b,c,d){return a.array.map(d.fieldOptions,function(b){var e=function(e,f,g,h,i,j){var k,l,m,n;return b.field==c.treeField?(a.messager.show("树节点列不能被隐藏。"),void 0):(k=a.util.parseJquery(this),l=k.parent().find(".menu-item:gt(1) .tree-checkbox1").length,(1!=l||b.hidden)&&b.hidable&&(h.treegrid(b.hidden?"showColumn":"hideColumn",b.field),j.menu("setIcon",{target:this,iconCls:b.hidden?"tree-checkbox0":"tree-checkbox1"}),l=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1}),m=d.fields?d.fields.length:0,j.menu("setIcon",{target:k.parent().children("div.menu-item:first"),iconCls:l>=m?"tree-checkbox1":0==l?"tree-checkbox0":"tree-checkbox2"}),n=k.parent().find(".menu-item:gt(1)").filter(function(){return a(".tree-checkbox1",this).length?!0:!1}),n.each(function(){j.menu(n.length>1?"enableItem":"disableItem",this)})),void 0)};return{text:b.title||b.field,iconCls:b.hidden?"tree-checkbox0":"tree-checkbox1",hideOnClick:!1,disabled:b.hidable&&b.field!=c.treeField?!1:!0,handler:e}})}function Gb(b,c,d,e,f){var n,o,p,h=b.treegrid("getRows"),i=b.treegrid("getDistinctColumnData",f),j=[{text:"全部",hideOnClick:!1,iconCls:d.filterData&&d.filterData.length?d.filterData.length>=h.length?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1",handler:function(b,c,e,f,g,h){d.filterData&&d.filterData.length?f.treegrid("showRows",!0):f.treegrid("hideRows",!0),a(this).parent().children("div.menu-item[hideOnClick=false]").each(function(){h.menu("setIcon",{target:this,iconCls:d.filterData&&d.filterData.length?"tree-checkbox0":"tree-checkbox1"})})}},"-"],k=i.length>=15,l=k?a.array.left(i,10):i,m=a.array.map(l,function(e){var g=a.array.filter(h,function(a){return a[f]==e}),i=g.length,j=b.treegrid("getHiddenRows"),k=a.array.sum(j,function(a){return a[f]==e?1:0}),l=k?k>=i?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1",m=function(b,f,i,j,k,l){var m=j.treegrid("getHiddenRows"),n=a.array.sum(m,function(a){return a[f]==e?1:0});j.treegrid(n?"showRows":"hideRows",a.array.map(g,function(a){return a[c.idField]})),l.menu("setIcon",{target:this,iconCls:n?"tree-checkbox1":"tree-checkbox0"}),a(this).parent().children("div.menu-item:first").each(function(){var a=j.treegrid("getHiddenRows");l.menu("setIcon",{target:this,iconCls:d.filterData.length?a.length>=h.length?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1"})})};return{text:e,iconCls:l,hideOnClick:!1,handler:m}});return a.array.merge(j,m),k&&(n=b.treegrid("getColumnOption",f),o=n.title?n.title:n.field,p=function(){var g=a("<input />").attr({type:"button",value:"全部选择"}).click(function(){b.treegrid("showRows",!0),a(this).parent().find(":checkbox").each(function(){this.checked=!0})}),j=a("<input />").attr({type:"button",value:"全部不选"}).click(function(){b.treegrid("hideRows",!0),a(this).parent().find(":checkbox").each(function(){this.checked=!1})});a("<div></div>").append("<div>列："+o+"，共"+i.length+"项</div><hr />").css({padding:"10px"}).append(g).append(j).append("<hr />").each(function(){var e=a(this),g=a("<ul></ul>").css({"list-style-type":"decimal","padding-left":"40px","line-height":"18px"}).appendTo(e);a.each(i,function(){var i="itemCheckbox_"+a.util.guid("N"),j=!a.array.some(d.filterData,function(a){return a[f]==text}),k=a("<li></li>").appendTo(g),l=a("<input />").attr({type:"checkbox",id:i,checked:j}).appendTo(k),n=(a("<label></label>").attr("for",i).text(text).appendTo(k),function(){var e=a.array.filter(h,function(a){return a[f]==text}),g=a.array.sum(d.filterData,function(a){return a[f]==text?1:0});b.treegrid(g?"showRows":"hideRows",a.array.map(e,function(a){return a[c.idField]}))});l.click(n)})}).dialog({title:"过滤/显示",iconCls:"icon-standard-application-view-detail",height:260,width:220,left:e.pageX,top:e.pageY,collapsible:!1,minimizable:!1,maximizable:!1,closable:!0,modal:!0,resizable:!0,onClose:function(){a.util.parseJquery(this).dialog("destroy")}}).dialog("open")},a.array.merge(j,["-",{text:"处理更多(共"+i.length+"项)...",iconCls:"icon-standard-application-view-detail",handler:p}])),j}function Hb(b,c,d,e,f,g){var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,h=[],i=c.pagingMenu,j=c.toggleMenu,k=c.moveMenu,l=c.exportMenu,m=f[c.idField];return"object"==typeof i&&(i=a.extend({disabled:!1,submenu:!0},i)),"object"==typeof j&&(j=a.extend({expand:!0,expandAll:!0,collapse:!0,collapseAll:!0,submenu:!1},j)),"object"==typeof k&&(k=a.extend({up:!1,upLevel:!1,down:!1,downLevel:!1,submenu:!1},k)),"object"==typeof l&&(l=a.extend({current:!1,all:!1,submenu:!0},l)),n={text:"刷新当前页",iconCls:"pagination-load",disabled:!c.refreshMenu,handler:function(){b.treegrid("reload")}},o={text:"首页",iconCls:"pagination-first",disabled:function(){return!c.pagination||g.page<=1},handler:function(){g.page>1&&g.pager.pagination("select",1)}},p={text:"上一页",iconCls:"pagination-prev",disabled:function(){return!c.pagination||g.page<=1},handler:function(){g.page>1&&g.pager.pagination("select",g.page-1)}},q={text:"下一页",iconCls:"pagination-next",disabled:function(){return!c.pagination||g.page>=g.pageCount},handler:function(){g.page<g.pageCount&&g.pager.pagination("select",g.page+1)}},r={text:"末页",iconCls:"pagination-last",disabled:function(){return!c.pagination||g.page>=g.pageCount},handler:function(){g.page<g.pageCount&&g.pager.pagination("select",g.pageCount)}},s={text:"展开当前所有",iconCls:"icon-metro-expand",disabled:!(1==j||1==j.expandAll),handler:function(){b.treegrid("expandAll",m)}},t={text:"展开当前",iconCls:"icon-metro-expand2",disabled:!(1==j||1==j.expand),handler:function(){b.treegrid("expand",m)}},u={text:"折叠当前",iconCls:"icon-metro-contract2",disabled:!(1==j||1==j.collapse),handler:function(){b.treegrid("collapse",m)}},v={text:"折叠当前所有",iconCls:"icon-metro-contract",disabled:!(1==j||1==j.collapseAll),handler:function(){b.treegrid("collapseAll",m)}},w={text:"上移一级",iconCls:"icon-standard-arrow-up",disabled:!(1==k||1==k.upLevel),handler:function(){b.treegrid("shiftRow",{point:"upLevel",id:m})}},x={text:"上移",iconCls:"icon-standard-up",disabled:!(1==k||1==k.up),handler:function(){b.treegrid("shiftRow",{point:"up",id:m})}},y={text:"下移",iconCls:"icon-standard-down",disabled:!(1==k||1==k.down),handler:function(){b.treegrid("shiftRow",{point:"down",id:m})}},z={text:"下移一级",iconCls:"icon-standard-arrow-down",disabled:!(1==k||1==k.downLevel),handler:function(){b.treegrid("shiftRow",{point:"downLevel",id:m})}},A={text:"导出当前页",iconCls:"icon-standard-page-white-put",disabled:!(1==l||1==l.current),handler:function(){return b.treegrid("exportExcel",!1)}},B={text:"导出全部",iconCls:"icon-standard-page-white-stack",disabled:!(1==l||1==l.all),handler:function(){return b.treegrid("exportExcel",!0)}},h.push(n),C=[o,p,q,r],D=[s,t,u,v],E=[w,x,y,z],F=[A,B],b.treegrid("isRoot",m)&&a.array.insertRange(D,0,[{text:"展开所有",iconCls:"icon-standard-arrow-out",handler:function(){b.treegrid("expandAll")}},{text:"折叠所有",iconCls:"icon-standard-arrow-in",handler:function(){b.treegrid("collapseAll")}},"-"]),i&&a.array.merge(h,"-","object"!=typeof i||i.submenu?{text:"翻页",iconCls:"",disabled:!(1==i||!i.disabled),children:C}:C),j&&a.array.merge(h,"-","object"!=typeof j||j.submenu?{text:"展开/折叠",iconCls:"",disabled:!j,children:D}:D),k&&a.array.merge(h,"-","object"!=typeof k||k.submenu?{text:"上/下移动",iconCls:"",disabled:!k,children:E}:E),l&&a.array.merge(h,"-","object"!=typeof l||l.submenu?{text:"导出数据",iconCls:"icon-standard-page-save",disabled:!l,children:F}:F),h}function Jb(b,c,d){d.onDblClickRowBak=c.onDblClickRow,c.onDblClickRow=function(e){var f,g,h;return a.isFunction(d.onDblClickRowBak)&&d.onDblClickRowBak.apply(this,arguments),f=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,null),items=Db(b,c,d,null,e,f),c.autoBindDblClickRow&&c.dblClickRowMenuIndex>=0&&a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)&&c.rowContextMenu.length>c.dblClickRowMenuIndex?(g=items[c.dblClickRowMenuIndex],h=g.handler||g.onclick,h(null,e,f,b,g,null)):(c.autoEditing&&b.treegrid("beginEdit",e[c.idField]),void 0)}}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,Ib,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc;a.fn.treegrid.extensions={},c=a.fn.treegrid.methods.update,d=a.fn.treegrid.methods.append,e=a.fn.treegrid.methods.insert,f=function(d,e){if(e&&e.id!=b&&e.row){var f=a.util.parseJquery(d),g=f.treegrid("options");a.isFunction(g.onBeforeUpdate)&&0==g.onBeforeUpdate.call(d,e.id,e.row)||(c.call(f,f,e),kb(f,g),jb(f,g),Mb(f,g,e.id,e.row),a.isFunction(g.onUpdate)&&g.onUpdate.call(d,e.id,e.row))}},g=function(b,c){if(c&&c.data){var e=a.util.parseJquery(b),f=e.treegrid("options");a.isFunction(f.onBeforeAppend)&&0==f.onBeforeAppend.call(b,c.parent,c.data)||(d.call(e,e,c),kb(e,f),jb(e,f),a.each(c.data,function(){Mb(e,f,this[f.idField],this)}),a.isFunction(f.onAppend)&&f.onAppend.call(b,c.parent,c.data))}},h=function(b,c){if(c&&c.data&&(c.before||c.after)){var d=a.util.parseJquery(b),f=d.treegrid("options");a.isFunction(f.onBeforeInsert)&&0==f.onBeforeInsert.call(b,c.before,c.after,c.data)||(e.call(d,d,c),kb(d,f),jb(d,f),Mb(d,f,c.data[f.idField],c.data),i(d,f,c.data[f.idField],f.treeField),a.isFunction(f.onInsert)&&f.onInsert.call(b,c.before,c.after,c.data))}},i=function(b,c,d,e){for(var f=b.treegrid("getCellDom",{field:e,id:d}),g=b.treegrid("getLevel",d),h=b.treegrid("getChildren",d);f.find("span.tree-indent,span.tree-hit").length<g;)a("<span></span>").addClass("tree-indent").prependTo(f);a.each(h,function(){i(b,c,this[c.idField],e)})},j=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getRowDom",c);return e&&e.length?e.eq(0).parentsUntil("div.datagrid-body","tr.treegrid-tr-tree").length+1:0},k=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getColumnFields"),f=d.treegrid("getColumnFields",!0);f&&f.length&&a.array.contains(e,c)&&!a.array.contains(f,c)&&d.treegrid("moveColumn",{source:c,target:f[f.length-1],point:"after"})},l=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getColumnFields"),f=d.treegrid("getColumnFields",!0);e&&e.length&&!a.array.contains(e,c)&&a.array.contains(f,c)&&d.treegrid("moveColumn",{source:c,target:e[0],point:"before"})},m=function(c,d){var e,g,h,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;d&&d.source&&d.target&&d.source!=d.target&&d.point&&(a.array.contains(["before","after"],d.point)||(d.point="before"),e=a.util.parseJquery(c),e.treegrid("hasMuliRowHeader")||(f=e.treegrid("options"),i=e.treegrid("getColumnFields"),j=e.treegrid("getColumnFields",!0),a.array.contains(i,d.source)&&(g=!1),g==b&&a.array.contains(j,d.source)&&(g=!0),a.array.contains(i,d.target)&&(h=!1),h==b&&a.array.contains(j,d.target)&&(h=!0),g!=b&&h!=b&&(a.isFunction(f.onBeforeMoveColumn)&&0==f.onBeforeMoveColumn.call(c,d.source,d.target,d.point)||(k=e.treegrid("getPanel"),l=k.find("div.datagrid-view"),m=l.find("div.datagrid-view1"),n=l.find("div.datagrid-view2"),o=m.find("table.datagrid-htable tr.datagrid-header-row"),p=n.find("table.datagrid-htable tr.datagrid-header-row"),q=m.find("table.datagrid-btable tr.datagrid-row"),r=n.find("table.datagrid-btable tr.datagrid-row"),s=g?o.find("td[field="+d.source+"]"):p.find("td[field="+d.source+"]"),t=h?o.find("td[field="+d.target+"]"):p.find("td[field="+d.target+"]"),u=g?q:r,v=h?q:r,u.length==v.length&&(t[d.point](s),v.each(function(b){var g,h,e=a.util.parseJquery(this);e.attr("node-id"),g=e.find("td[field="+d.target+"]"),h=a(u[b]).find("td[field="+d.source+"]"),g[d.point](h)}),w=e.treegrid("getColumnOption",d.source),x=e.treegrid("getColumnOption",d.target),y=g?f.frozenColumns[0]:f.columns[0],z=h?f.frozenColumns[0]:f.columns[0],A=f._extensionsTreegrid?f._extensionsTreegrid:f._extensionsTreegrid={},a.array.remove(y,w),B=a.array.indexOf(z,x),B>-1&&a.array.insert(z,"before"==d.point?B:B+1,w),C=f,f=e.datagrid("options"),w=e.datagrid("getColumnOption",d.source),x=e.datagrid("getColumnOption",d.target),y=g?f.frozenColumns[0]:f.columns[0],z=h?f.frozenColumns[0]:f.columns[0],a.array.remove(y,w),B=a.array.indexOf(z,x),B>-1&&a.array.insert(z,"before"==d.point?B:B+1,w),f=C,g||h&&g!=h?(D=e.treegrid("getData"),e.treegrid("loadData",D)):e.treegrid("fixColumnSize"),g&&(h||(B=a.array.indexOf(A.fields,d.target),a.array.insert(A.fields,"before"==d.point?B:B+1,d.source),a.array.insert(A.fieldOptions,"before"==d.point?B:B+1,w),a.array.insert(A.fieldOptionsBackup,"before"==d.point?B:B+1,a.extend({},w)))),g||(B=a.array.indexOf(A.fields,d.source),h?(a.array.removeAt(A.fields,B),a.array.removeAt(A.fieldOptions,B),a.array.removeAt(A.fieldOptionsBackup,B)):(E=A.fieldOptions[B],F=A.fieldOptionsBackup[B],a.array.removeAt(A.fields,B),a.array.removeAt(A.fieldOptions,B),a.array.removeAt(A.fieldOptionsBackup,B),B=a.array.indexOf(A.fields,d.target),a.array.insert(A.fields,"before"==d.point?B:B+1,d.source),a.array.insert(A.fieldOptions,"before"==d.point?B:B+1,E),a.array.insert(A.fieldOptionsBackup,"before"==d.point?B:B+1,F))),a.isFunction(f.onMoveColumn)&&f.onMoveColumn.call(c,d.source,d.target,d.point))))))},n=function(b,c){var d,e,f;c&&c.field&&c.point&&(a.array.contains(["before","after"],c.point)||(c.point="before"),d=a.util.parseJquery(b),e=d.treegrid("getColumnFields","all"),f=a.array.indexOf(e,c.field),-1==f||"before"==c.point&&0==f||"after"==c.point&&f==e.length-1||(b=e["before"==c.point?f-1:f+1],d.treegrid("moveColumn",{source:c.field,target:b,point:c.point})))},o=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("options"),f=e._extensionsTreegrid?e._extensionsTreegrid:e._extensionsTreegrid={};a.isFunction(e.onBeforeDeleteColumn)&&0==e.onBeforeDeleteColumn.call(b,c)||(a.fn.datagrid.extensions.removeField(e,c,f),d.treegrid("getColumnDom",{field:c,header:!0}).remove(),a.isFunction(e.onDeleteColumn)&&e.onDeleteColumn.call(b,c))},p=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getColumnOption",c);return e&&d.treegrid("deleteColumn",c),e},q=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("options"),f=d.treegrid("getChecked");return a.array.contains(f,c,function(a){return a[e.idField]==c})},r=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("options"),f=d.treegrid("getSelections");return a.array.contains(f,c,function(a){return a[e.idField]==c})},s=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getRoots"),f=d.treegrid("find",c);return f&&a.array.contains(e,f)},t=function(b,c){var d,e,f,g,h;if(c&&c.source&&c.target&&c.point&&(a.array.contains(["append","top","bottom"],c.point)||(c.point="append"),d=a.util.parseJquery(b),e=d.treegrid("options"),f=d.treegrid("find",c.source),g=d.treegrid("find",c.target),f&&g&&f!=g&&!(a.isFunction(e.onBeforeDrop)&&0==e.onBeforeDrop.call(b,g,f,c.point)||d.treegrid("isParent",{id1:c.source,id2:c.target})))){switch(h=d.treegrid("pop",c.source),c.point){case"append":d.treegrid("append",{parent:c.target,data:[h]});break;case"top":d.treegrid("insert",{before:c.target,data:h});break;case"bottom":d.treegrid("insert",{after:c.target,data:h});break;default:d.treegrid("append",{parent:c.target,data:[h]})}h&&a.isFunction(e.onDrop)&&e.onDrop.call(b,g,f,c.point)}},u=function(b,c){if(c&&c.id&&c.point&&a.array.contains(["up","upLevel","down","downLevel"],c.point)){var f,d=a.util.parseJquery(b),e=d.treegrid("options");switch(c.point){case"up":f=d.treegrid("prevRow",c.id);break;case"upLevel":f=d.treegrid("getParent",c.id);break;case"down":f=d.treegrid("nextRow",c.id);break;case"downLevel":f=d.treegrid("prevRow",c.id)}f&&d.treegrid("moveRow",{target:f[e.idField],source:c.id,point:"up"==c.point?"top":"downLevel"==c.point?"append":"bottom"})}},v=function(a,b){return x(a,b)?"child":w(a,b)?"parent":y(a,b)?"sibling":"normal"},w=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("find",c.id2),f=d.treegrid("getChildren",c.id1);return a.array.contains(f,e)},x=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("find",c.id1),f=d.treegrid("getChildren",c.id2);return a.array.contains(f,e)},y=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getParent",c.id1),f=d.treegrid("getParent",c.id2);return e&&f&&e==f},z=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getRowDom",c).nextAll("tr.datagrid-row:first"),f=e.attr("node-id");return e.length&&f?d.treegrid("find",f):null},A=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getRowDom",c).prevAll("tr.datagrid-row:first"),f=e.attr("node-id");return e.length&&f?d.treegrid("find",f):null},B=function(b,c){var f,d=a.util.parseJquery(b),e=d.treegrid("options");return d.treegrid("isRoot",c)?d.treegrid("getRoots"):(f=d.treegrid("getParent",c),f?d.treegrid("getNearChildren",f[e.idField]):d.treegrid("getRoots"))},C=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("options"),f=d.treegrid("getChildren",c);return a.array.filter(f,function(a){return d.treegrid("getParent",a[e.idField])[e.idField]==c})},D=function(b){function e(a,b){var c=a.draggable("proxy").find("span.tree-dnd-icon");c.removeClass("tree-dnd-yes tree-dnd-no").addClass(b?"tree-dnd-yes":"tree-dnd-no")}var c=a.util.parseJquery(b),d=c.treegrid("options");c.treegrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable({disabled:!1,revert:!0,cursor:"default",deltaX:10,deltaY:5,proxy:function(b){var h,d=a.util.parseJquery(b),e=d.attr("node-id"),f=c.treegrid("getRowDom",e).clone(),g=a("<tr></tr>").addClass("datagrid-row datagrid-row-selected");return a("<td><span class='tree-dnd-icon tree-dnd-no' ></span></td>").appendTo(g),h=f.find("td").each(function(a){6>a&&g.append(this)}),h.length>6&&a("<td>...</td>").css("width","40px").appendTo(g),a("<table></table>").addClass("tree-node-proxy").appendTo("body").append(g).hide()},onBeforeDrag:function(e){var f=a.util.parseJquery(this),g=f.attr("node-id"),h=c.treegrid("find",g);return a.isFunction(d.onBeforeDrag)&&0==d.onBeforeDrag.call(b,h)?!1:1!=e.which?!1:"checkbox"==e.target.type?!1:(c.treegrid("getRowDom",{id:g,cascade:!0}).droppable({accept:"no-accept"}),void 0)},onStartDrag:function(){var e=a.util.parseJquery(this),f=e.attr("node-id"),g=c.treegrid("find",f);e.draggable("proxy").css({left:-1e4,top:-1e4}),a.isFunction(d.onBeforeDrag)&&d.onStartDrag.call(b,g)},onStopDrag:function(){var e=a.util.parseJquery(this),f=e.attr("node-id"),g=c.treegrid("find",f);c.treegrid("getRowDom",{id:f,cascade:!0}).droppable({accept:"tr.datagrid-row"}),a.isFunction(d.onStopDrag)&&d.onStopDrag.call(b,g)},onDrag:function(b){var c=b.pageX,d=b.pageY,e=b.data.startX,f=b.data.startY,g=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f));g>15&&a(this).draggable("proxy").show(),this.pageY=b.pageY}}).droppable({accept:"tr.datagrid-row",onDragEnter:function(f,g){var h=a.util.parseJquery(this),i=a.util.parseJquery(g),j=h.attr("node-id"),k=i.attr("node-id"),l=c.treegrid("find",j),m=c.treegrid("find",k),n=c.treegrid("getRowDom",j),o=n.find("td"),p=n.find("td[field="+d.treeField+"]"),q=h.data("dnd"),r={droper:h,drager:i,droperId:j,dragerId:k,droperRow:l,dragerRow:m,droperRowDom:n,mark:o,treeFieldDom:p};q?a.extend(q,r):h.data("dnd",r),a.isFunction(d.onDragEnter)&&0==d.onDragEnter.call(b,l,m)&&(e(i,!1),o.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),p.removeClass("datagrid-header-cell-append"))},onDragOver:function(f,g){var q,r,s,h=a.util.parseJquery(this),i=h.data("dnd"),j=i.drager,k=i.droperId,l=i.dragerId,m=i.droperRow,n=i.dragerRow,o=i.mark,p=i.treeFieldDom;h.droppable("options").disabled||(q=g.pageY,r=h.offset().top,s=r+h.outerHeight(),e(j,!c.treegrid("isParent",{id1:l,id2:k})),o.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),p.removeClass("datagrid-header-cell-append"),q>r+(s-r)/2?5>s-q?o.addClass("datagrid-header-cell-bottom"):p.addClass("datagrid-header-cell-append"):5>q-r?o.addClass("datagrid-header-cell-top"):p.addClass("datagrid-header-cell-append"),0==d.onDragOver.call(b,m,n)&&(e(j,!1),o.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),p.removeClass("datagrid-header-cell-append"),h.droppable("disable")))},onDragLeave:function(){var g=a.util.parseJquery(this),h=g.data("dnd"),i=h.drager,j=h.droperRow,k=h.dragerRow,l=h.mark,m=h.treeFieldDom;e(i,!1),l.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),m.removeClass("datagrid-header-cell-append"),a.isFunction(d.onDragLeave)&&d.onDragLeave.call(b,j,k)},onDrop:function(){var e=a.util.parseJquery(this),f=e.data("dnd"),g=f.droperId,h=f.dragerId,i=f.mark,j=f.treeFieldDom,k=j.hasClass("datagrid-header-cell-append")?"append":i.hasClass("datagrid-header-cell-top")?"top":"bottom";c.treegrid("moveRow",{target:g,source:h,point:k}),i.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),j.removeClass("datagrid-header-cell-append")}}),d.dndRow=!0},E=function(b){var c=a.util.parseJquery(b),d=c.treegrid("options");c.treegrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable("disable"),d.dndRow=!1},F=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("getRoots"),f=d.treegrid("options");return e=e&&e.length?e:[],c?a.array.reduce(e,function(b,c){b.push(c);var g=d.treegrid("getChildren",c[f.idField]);return g&&g.length&&a.array.merge(b,g),b},[]):e},G=function(b,c){c=a.isPlainObject(c)?c:{field:c,cascade:!1};var d=c.field,e=c.cascade,f=a.util.parseJquery(b),g=f.treegrid("getRows",e);return a.array.map(g,function(a){return a[d]})},H=function(b,c){var d,e,f,g,h,i,j;return c=a.isPlainObject(c)?c:{id:c,cascade:!1},d=c.id,e=c.cascade?!0:!1,f=a.util.parseJquery(b),g=f.treegrid("options"),h=f.treegrid("getPanel"),i=h.find(".datagrid-view .datagrid-body tr.datagrid-row[node-id="+d+"]"),e&&(j=f.treegrid("getChildren",d),a.each(j,function(a,c){var d=H(b,c[g.idField]);i=i.add(d)})),i},I=function(b,c){return a.util.parseJquery(b).treegrid("find",c)},J=function(c,d){if(!d||!d.field||null==d.id||d.id==b)return a();var e=a.util.parseJquery(c),f=e.treegrid("getRowDom",d.id);return f.find("td[field="+d.field+"] .datagrid-cell")},K=function(c,d){if(!d||!d.field||null==d.id||d.id==b)return b;var e=a.util.parseJquery(c),f=e.treegrid("find",d.id);return f[d.field]},L=function(c,d){var e=a.util.parseJquery(c),f=e.treegrid("getCellDom",d);return f&&f.length?f.text():b},M=function(b,c){var d,e,f,g,h,i;return c=a.isPlainObject(c)?c:{field:c,cascade:!1},d=c.field,e=c.cascade,f=a.util.parseJquery(b),g=f.treegrid("getColumnFields","all"),a.array.contains(g,d)?(h=f.treegrid("getRows",e),i=a.array.clone(h),a.array.distinct(i,function(a,b){return a[d]==b[d]}),i):[]},N=function(b,c){var d,e,f,g,h;return c=a.isPlainObject(c)?c:{field:c,cascade:!1},d=c.field,e=c.cascade,f=a.util.parseJquery(b),g=f.treegrid("getColumnFields","all"),a.array.contains(g,d)?(h=f.treegrid("getColumnData",{field:d,cascade:e}),a.array.distinct(h,function(a,b){return a==b}),h):[]},O=a.fn.treegrid.methods.find,P=function(b,c,d){var f,e=d||a.util.parseJquery(b);return a.isFunction(c)?(f=e.treegrid("getRows",!0),a.array.first(f,c)):O.call(e,e,c)},Q=function(c,d){var f,e=a.util.parseJquery(c);return a.isFunction(d)?f=a.array.filter(e.treegrid("getRows",!0),d):a.array.likeArray(d)&&!a.util.isString(d)?(f=a.array.map(d,function(a){return P(c,a,e)}),f=a.array.filter(f,function(a){return a!=b&&null!=a})):f=[P(c,d,e)],f},R=function(c,d,e,f,g,h){var n,o,p,q,i=e||a.util.parseJquery(c),j=f||i.treegrid("options"),k=a.isFunction(d),l=k?P(c,d,i):null,m=k?l?l[j.idField]:null:a.isPlainObject(d)&&j.idField in d?d[j.idField]:d;null!=m&&m!=b&&(n=i.treegrid("getRowDom",{id:m,cascade:!0}),h=null==h||h==b||1==h?!0:!1,n.length&&(o=k?l:i.treegrid("find",m),p=g||(j._extensionsTreegrid?j._extensionsTreegrid:j._extensionsTreegrid={}),p.filterData=a.isArray(p.filterData)?p.filterData:p.filterData=[],n.show(),a.array.remove(p.filterData,o),q=i.treegrid("getChildren",m),a.each(q,function(){a.array.remove(p.filterData,this)}),h&&rb(i,j,p,rows)))},S=function(c,d,e,f,g,h){var n,o,p,i=e||a.util.parseJquery(c),j=f||i.treegrid("options"),k=a.isFunction(d),l=k?P(c,d,i):null,m=k?l?l[j.idField]:null:a.isPlainObject(d)&&j.idField in d?d[j.idField]:d;null!=m&&m!=b&&(n=i.treegrid("getRowDom",{id:m,cascade:!0}),h=null==h||h==b||1==h?!0:!1,n.length&&(o=k?l:i.treegrid("find",m),p=g||(j._extensionsTreegrid?j._extensionsTreegrid:j._extensionsTreegrid={}),p.filterData=a.isArray(p.filterData)?p.filterData:p.filterData=[],i.treegrid("unselectRow",{id:m,cascade:!0}).treegrid("uncheckRow",{id:m,cascade:!0}),n.hide(),a.array.unique(p.filterData,o,i.treegrid("getChildren",m)),h&&rb(i,j,p,rows)))},T=function(b,c){var g,i,j,d=a.util.parseJquery(b),e=d.treegrid("options"),f=d.treegrid("getRows",!0),h=e._extensionsTreegrid?e._extensionsTreegrid:e._extensionsTreegrid={};c===!0?(h.filterData=[],i=d.treegrid("getPanel"),j=i.find("div.datagrid-header-filter-item-icon"),i.find(".datagrid-view .datagrid-body tr.datagrid-row").show(),ub(j,"tree-checkbox1")):a.isFunction(c)?(g=a.array.filter(f,c),g=a.array.map(g,function(a){return a[e.idField]})):g=a.array.likeArray(c)&&!a.util.isString(c)?c:[c],g&&(a.each(g,function(a,c){R(b,c,d,e,h,!1)}),rb(d,e,h,d.treegrid("getRows")))},U=function(b,c){var g,i,j,d=a.util.parseJquery(b),e=d.treegrid("options"),f=d.treegrid("getRows",!0),h=e._extensionsTreegrid?e._extensionsTreegrid:e._extensionsTreegrid={};c===!0?(d.treegrid("unselectAll").treegrid("uncheckAll"),h.filterData=a.array.clone(f),i=d.treegrid("getPanel"),j=i.find("div.datagrid-header-filter-item-icon"),i.find(".datagrid-view .datagrid-body tr.datagrid-row").hide(),ub(j,"tree-checkbox0")):a.isFunction(c)?(g=a.array.filter(f,c),g=a.array.map(g,function(a){return a[e.idField]})):g=a.array.likeArray(c)&&!a.util.isString(c)?c:[c],g&&(a.each(g,function(a,c){S(b,c,d,e,h,!1)}),rb(d,e,h,d.treegrid("getRows")))},V=function(b,c){var g,d=a.util.parseJquery(b),e=d.treegrid("options"),f=e._extensionsTreegrid?e._extensionsTreegrid:e._extensionsTreegrid={};return c?f.filterData:(g=d.treegrid("getRoots"),a.array.filter(f.filterData,function(b){return a.array.contains(g,b)}))},W=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("options"),f=d.treegrid("getRows",c),g=e._extensionsTreegrid?e._extensionsTreegrid:e._extensionsTreegrid={};return a.array.filter(f,function(b){return a.array.contains(g.filterData,b)?!1:!0})},X=function(b,c){var e,f,g,h,d=a.util.parseJquery(b);a.isFunction(c)||d.treegrid("remove",c),e=d.treegrid("getRows",!0),f=d.treegrid("options"),g=a.array.first(e,c),h=g?g[f.idField]:null,d.treegrid("remove",h)},Y=function(c,d){var f,g,h,e=a.array.likeArray(d)&&!a.util.isString(d);return e?(a.each(d,function(a,b){X(c,b)}),void 0):(a.isFunction(d)&&(f=a.util.parseJquery(c),g=f.treegrid("options"),h=f.treegrid("getRows",!0),a.array.filter(h,d),a.each(function(){var a=P(c,this[g.idField],f);null!=a&&a!=b&&f.treegrid("remove",this[g.idField])})),void 0)},Z=function(b,c){if(c&&c.field&&c.title){var d=a.util.parseJquery(b),e=d.treegrid("getColumnOption",c.field);e.title=c.title,d.datagrid("setColumnTitle",c)}},$=a.fn.treegrid.methods.select,_=a.fn.treegrid.methods.unselect,ab=function(b,c){var d,e,f,g;c=a.isPlainObject(c)?c:{id:c,cascade:!1},d=c.id,e=c.cascade?!0:!1,f=a.util.parseJquery(b),$.call(f,f,d),e&&(g=f.treegrid("options"),a.each(f.treegrid("getChildren",d),function(){$.call(f,f,this[g.idField])}))},bb=function(b,c){var d,e,f,g;c=a.isPlainObject(c)?c:{id:c,cascade:!1},d=c.id,e=c.cascade?!0:!1,f=a.util.parseJquery(b),_.call(f,f,d),e&&(g=f.treegrid("options"),a.each(f.treegrid("getChildren",d),function(){_.call(f,f,this[g.idField])}))},cb=function(b,c){var d,e,f,g;c=a.isPlainObject(c)?c:{id:c,cascade:!1},d=c.id,e=c.cascade?!0:!1,f=a.util.parseJquery(b),f.datagrid("checkRow",d),e&&(g=f.treegrid("options"),a.each(f.treegrid("getChildren",d),function(){f.datagrid("checkRow",this[g.idField])}))},db=function(b,c){var d,e,f,g;c=a.isPlainObject(c)?c:{id:c,cascade:!1},d=c.id,e=c.cascade?!0:!1,f=a.util.parseJquery(b),f.datagrid("uncheckRow",d),e&&(g=f.treegrid("options"),a.each(f.treegrid("getChildren",d),function(){f.datagrid("uncheckRow",this[g.idField])}))},eb=function(b,c){var i,j,k,d=a.util.parseJquery(b),e=d.treegrid("options"),f=e._extensionsTreegrid?e._extensionsTreegrid:e._extensionsTreegrid={},g=d.treegrid("getPanel"),h="div.datagrid-view div.datagrid-header tr.datagrid-header-row div.datagrid-header-filter-container";c?(e.columnFilter=c,kb(d,e,f),a.util.exec(function(){g.find(h).hide().slideDown("slow")})):(i=g.find(h),j=i.length,k=0,i.slideUp("slow",function(){++k==j&&(lb(d,e),e.columnFilter=c)}))},fb=function(b,c){var e,f,g,h,i,d=a.util.parseJquery(b);return a.util.isBoolean(c)?(d.treegrid(c?"showRows":"hideRows",!0),void 0):(c&&c.field&&(e=c.field,f=c.value,g=a.array.likeArray(f)&&!a.util.isString(f),h=g?function(b){return a.array.contains(f,b[e])}:function(a){return f==a[e]},i=d.treegrid("findRows",h),d.treegrid(c.selected?"showRows":"hideRows",i)),void 0)},gb=function(b,c){var d=a.util.parseJquery(b),e=d.treegrid("options"),f=e._extensionsTreegrid?e._extensionsTreegrid:e._extensionsTreegrid={};e.offset=f.offset=a.fn.datagrid.extensions.parseOffset(c),d.datagrid("setOffset",e.offset)},hb=function(b,c){var h,i,m,d=a.util.parseJquery(b),e=d.treegrid("getPanel"),f=d.treegrid("options"),g=f.treeField,j=c,k=!1,l=!0;a.isPlainObject(c)?(j=c.value,i=c.field,k=c.regular,l=c.ignoreCase,h=e.find("div.datagrid-body tr.datagrid-row td["+(i?"field="+i:"field")+"] div.datagrid-cell")):h=e.find("div.datagrid-body tr.datagrid-row td[field] div.datagrid-cell"),m=k?new RegExp(j,l?"gm":"igm"):j,h.each(function(){var e,b=a(this),c=b.parent(),d=c.attr("field");d==g&&(b=b.find("span.tree-title")),b.find("span.datagrid-cell-hightlight").replaceWith(function(){return a(this).text()}),j&&(e=b.html(),e&&b.html(a.string.replaceAll(e,j,"<span class='datagrid-cell-hightlight'>"+j+"</span>")))})},ib=function(b,c){c=a.string.toBoolean(c),alert("导出"+(c?"全部":"当前页")+"数据")},jb=a.fn.treegrid.extensions.initRowDndExtensions=function(a,b){b=b||a.treegrid("options"),b.dndRow&&a.treegrid("enableRowDnd")},Ib=a.fn.treegrid.extensions.parseRowContextMenuMap=function(b,c,d,e,f){return a.array.map(e,function(e){if(!e||a.util.isString(e))return e;var h=a.extend({},e);return h.id=a.isFunction(e.id)?e.id.call(h,b,c,d,f):e.id,h.text=a.isFunction(e.text)?e.text.call(h,b,c,d,f):e.text,h.iconCls=a.isFunction(e.iconCls)?e.iconCls.call(h,b,c,d,f):e.iconCls,h.disabled=a.isFunction(e.disabled)?e.disabled.call(h,b,c,d,f):e.disabled,h.hideOnClick=a.isFunction(e.hideOnClick)?e.hideOnClick.call(h,b,c,d,f):e.hideOnClick,h.onclick=a.isFunction(e.onclick)?function(a,b,g){e.onclick.call(this,a,c,d,f,b,g)}:e.onclick,h.handler=a.isFunction(e.handler)?function(a,b,g){e.handler.call(this,a,c,d,f,b,g)}:e.handler,h.children&&h.children.length&&(h.children=Ib(b,c,d,h.children,f)),h})},Kb=a.fn.treegrid.extensions.initTreeGridExtensions=function(b,c,d){c=c||b.treegrid("options"),d=d||(c._extensionsTreegrid?c._extensionsTreegrid:c._extensionsTreegrid={}),d.onClickRowBak=c.onClickRow,c.onClickRow=function(e){a.isFunction(d.onClickRowBak)&&d.onClickRowBak.apply(this,arguments),c.toggleOnClick&&b.treegrid("toggle",e[c.idField])},d.onCheckBak=c.onCheck,c.onCheck=function(e){if(a.isFunction(d.onCheckBak)&&d.onCheckBak.apply(this,arguments),c.cascadeCheck){if(c.checkOnSelect&&c.singleSelect)return;for(var h,i,f=c.idField,g=e[f],j=b.treegrid("getParent",g);j;)h=b.treegrid("getChildren",j[f]),i=b.treegrid("getChecked"),a.array.some(h,function(b){return!a.array.contains(i,b)})||b.treegrid("isChecked",j[f])||b.treegrid("check",j[f]),j=b.treegrid("getParent",j[f]);a.each(b.treegrid("getChildren",g),function(a,c){b.treegrid("isChecked",c[f])||b.treegrid("check",c[f])})}},d.onUncheckBak=c.onUncheck,c.onUncheck=function(e){if(a.isFunction(d.onUncheckBak)&&d.onUncheckBak.apply(this,arguments),c.cascadeCheck){if(c.checkOnSelect&&c.singleSelect)return;for(var h,i,f=c.idField,g=e[f],j=b.treegrid("getParent",g);j;)h=b.treegrid("getChildren",j[f]),i=b.treegrid("getChecked"),a.array.some(h,function(b){return a.array.contains(i,b)})||b.treegrid("isChecked",j[f])&&b.treegrid("uncheck",j[f]),j=b.treegrid("getParent",j[f]);a.each(b.treegrid("getChildren",g),function(a,c){b.treegrid("uncheck",c[f])})}}},Lb=function(b,c){b.treegrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").each(function(){var d=a(this),e=d.attr("node-id"),f=b.treegrid("find",e);Mb(b,c,e,f,d)})},Mb=function(b,c,d,e,f){function h(){var e=b.treegrid("getColumns","all"),f=a("<table></table>").css({padding:"5px"});return a.each(e,function(a,c){if(c&&c.field&&c.title){var e=b.treegrid("getCellDisplay",{field:c.field,id:d});f.append("<tr><td style='text-align: right; width: 150px;'>"+c.title+":</td><td style='width: 250px;'>"+e+"</td></tr>")}}),f}if(f=f||b.treegrid("getRowDom",d),c.rowTooltip){var g=function(){var d=a(this),f=a.isFunction(c.rowTooltip)?c.rowTooltip.call(d,e):h(e);d.tooltip("update",f)};f.each(function(){a.easyui.tooltip.init(this,{onShow:g})})}else f.children("td[field]").each(function(){var h,i,c=a(this),f=c.attr("field"),g=b.treegrid("getColumnOption",f);g&&g.tooltip&&(h=c.find("div.datagrid-cell"),i=function(){var c=a(this),i=a.isFunction(g.tooltip)?g.tooltip.call(h,e[f],d,e):e[f];c.tooltip("update",i)},a.easyui.tooltip.init(h,{onShow:i}))})},Nb=function(b,c,d){var e,f,g,h,i,j,l,m,n,o,p;c.extEditing&&(e=b.treegrid("getRowDom",d),e.length&&(f=b.treegrid("getPanel").find("div.datagrid-view"),g=f.find("div.datagrid-view1"),h=f.find("div.datagrid-view2"),i=h.find("div.datagrid-body"),j=g.outerWidth(),f.position(),l=p>0?p:0,i.css("position","relative"),m=e.outerHeight(),n=e.position().top+m+i.scrollTop()-h.find("div.datagrid-header").outerHeight(),o=a("<div></div>").addClass("dialog-button datagrid-rowediting-panel").appendTo(i).css({position:"absolute",display:"block",border:"1px solid #ddd",top:n,padding:"5px 5px"}).attr("node-id",d),a("<a></a>").linkbutton({plain:!1,iconCls:"icon-ok",text:"保存"}).appendTo(o).click(function(){b.treegrid("endEdit",d)}),a("<a></a>").linkbutton({plain:!1,iconCls:"icon-cancel",text:"取消"}).appendTo(o).click(function(){b.treegrid("cancelEdit",d)}),p=(c.width-o.outerWidth())/2-j,l=p>0?p:0,o.css("left",l)))},Ob=function(a,b,c){b=b||a.treegrid("getPanel").find("div.datagrid-view div.datagrid-view2 div.datagrid-body"),b.find("div.datagrid-rowediting-panel[node-id="+c+"]").remove()},Pb=function(a,b,c){b.extEditing&&(body=a.treegrid("getPanel").find("div.datagrid-view div.datagrid-view2 div.datagrid-body"),Ob(a,body,c))},Qb=function(a,b,c){var d=b._extensionsTreegrid?b._extensionsTreegrid:b._extensionsTreegrid={};b.singleEditing&&a.treegrid("endEdit",d.lastEditingId),d.lastEditingId=c},Rb=a.fn.treegrid.extensions.initExtensions=function(b,c){function f(){a.fn.datagrid.extensions.initColumnExtendProperties(b,d)}function g(){b.treegrid("setOffset",c.offset)}function h(){yb(b,c,d),zb(b,c,d),Ab(b,c,d)}function i(){Jb(b,c,d)}function j(){Kb(b,c,d)}var e,k,d=c._extensionsTreegrid?c._extensionsTreegrid:c._extensionsTreegrid={};d._initialized||(e=b.treegrid("getColumnFields",!1),d.fields=a.array.filter(e,function(a){return b.treegrid("getColumnOption",a).title?!0:!1}),d.fieldOptions=a.array.map(d.fields,function(a){return b.treegrid("getColumnOption",a)}),d.fieldOptionsBackup=a.array.map(d.fieldOptions,function(b){return a.extend({},b)}),d.filterData=[],f(),g(),h(),i(),j(),k=b.datagrid("getRows"),k&&k.length||kb(b,c,d),d._initialized=!0)},a.fn.treegrid.extensions.clearFilterData=function(a){var b=a._extensionsTreegrid?a._extensionsTreegrid:a._extensionsTreegrid={};b.filterData=[]},Tb=a.fn.treegrid.extensions.loader=function(b,c,d){var e=a.util.parseJquery(this),f=e.treegrid("options");return Rb(e,f),f.url?(b=a.fn.datagrid.extensions.parsePagingQueryParams(f,b),a.ajax({type:f.method,url:f.url,data:b,dataType:"json",success:function(b){a.fn.treegrid.extensions.clearFilterData(f),c(b)},error:function(){d.apply(this,arguments)}}),void 0):!1},Ub=a.fn.treegrid.defaults.onLoadSuccess,Vb=a.fn.treegrid.extensions.onLoadSuccess=function(){a.isFunction(Ub)&&Ub.apply(this,arguments);var c=a.util.parseJquery(this),d=c.treegrid("options"),e=d._extensionsTreegrid?d._extensionsTreegrid:d._extensionsTreegrid={};kb(c,d,e),jb(c,d),Lb(c,d)},Wb=a.fn.treegrid.defaults.onResizeColumn,Xb=a.fn.treegrid.extensions.onResizeColumn=function(b){var d,e,f,g,h;a.isFunction(Wb)&&Wb.apply(this,arguments),d=a.util.parseJquery(this),e=d.treegrid("options"),e.columnFilter&&(f=d.treegrid("getPanel"),g=d.treegrid("getColumnOption",b),h=f.find("div.datagrid-header-filter-container[field="+b+"]"),h.width(g.width))},Yb=a.fn.treegrid.defaults.onBeforeEdit,Zb=a.fn.treegrid.extensions.onBeforeEdit=function(b){a.isFunction(Yb)&&Yb.apply(this,arguments);var c=a.util.parseJquery(this),d=c.datagrid("options");Nb(c,d,b[d.idField]),Qb(c,d,b[d.idField]),c.treegrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable("disable")},$b=a.fn.treegrid.defaults.onAfterEdit,_b=a.fn.treegrid.extensions.onAfterEdit=function(b){a.isFunction($b)&&$b.apply(this,arguments);var d=a.util.parseJquery(this),e=d.treegrid("options"),f=e._extensionsTreegrid?e._extensionsTreegrid:e._extensionsTreegrid={};Pb(d,e,b[e.idField]),kb(d,e,f),jb(d,e),Mb(d,e,b[e.idField],b)},ac=a.fn.treegrid.defaults.onCancelEdit,bc=a.fn.treegrid.extensions.onCancelEdit=function(b){a.isFunction(ac)&&ac.apply(this,arguments);var c=a.util.parseJquery(this),d=c.treegrid("options");Pb(c,d,b[d.idField]),jb(c,d),Mb(c,d,b[d.idField],b)},cc=a.fn.treegrid.defaults.loadFilter,dc=a.fn.treegrid.extensions.loadFilter=function(c,d){var e,f,g,h;return a.isFunction(cc)&&(c=cc.apply(this,arguments)),e=a.array.likeArray(c)&&!a.util.isString(c),f=e?c:c.rows,f.length?(g=a.util.parseJquery(this),h=g.treegrid("options"),f=h.smooth?a.fn.tree.extensions.smoothConverter(f,h):f,null!=d&&d!=b?e?f:{total:f.length,rows:f}:e?f:{total:c.length||f.length,rows:f}):c},ec=a.fn.treegrid.defaults.onExpand,fc=a.fn.treegrid.extensions.onExpand=function(b){var c,d,e,f;a.isFunction(ec)&&ec.apply(this,arguments),c=a.util.parseJquery(this),d=c.treegrid("options"),d.onlyNodeExpand&&(e=c.treegrid("getNears",b[d.idField]),f=d.animate,d.animate=!1,a.each(a.array.filter(e,function(a){return a[d.idField]!=b[d.idField]&&"open"==a.state}),function(){c.treegrid("collapse",this[d.idField])}),d.animate=f)},gc=a.fn.treegrid.extensions.methods={update:function(a,b){return a.each(function(){f(this,b)})},append:function(a,b){return a.each(function(){g(this,b)})},insert:function(a,b){return a.each(function(){h(this,b)})},isChecked:function(a,b){return q(a[0],b)},isSelected:function(a,b){return r(a[0],b)},isRoot:function(a,b){return s(a[0],b)},getLevel:function(a,b){return j(a[0],b)},freezeColumn:function(a,b){return a.each(function(){k(this,b)})},unfreezeColumn:function(a,b){return a.each(function(){l(this,b)})},moveColumn:function(a,b){return a.each(function(){m(this,b)})},shiftColumn:function(a,b){return a.each(function(){n(this,b)})},deleteColumn:function(a,b){return a.each(function(){o(this,b)})},popColumn:function(a){return p(a[0],param)},moveRow:function(a,b){return a.each(function(){t(this,b)})},shiftRow:function(a,b){return a.each(function(){u(this,b)})},compare:function(a,b){return v(a[0],b)},isChild:function(a,b){return x(a[0],b)},isParent:function(a,b){return w(a[0],b)},isSibling:function(a,b){return y(a[0],b)},nextRow:function(a,b){return z(a[0],b)},prevRow:function(a,b){return A(a[0],b)},getNears:function(a,b){return B(a[0],b)},getNearChildren:function(a,b){return C(a[0],b)},enableRowDnd:function(a){return a.each(function(){D(this)})},disableRowDnd:function(a){return a.each(function(){E(this)})},getRows:function(a,b){return F(a[0],b)},getColumnData:function(a,b){return G(a[0],b)},getRowDom:function(a,b){return H(a[0],b)},getRowData:function(a,b){return I(a[0],b)},getNode:function(a,b){return I(a[0],b)},getNodes:function(a,b){return Q(a[0],b)},getCellDom:function(a,b){return J(a[0],b)},getCellData:function(a,b){return K(a[0],b)},getCellDisplay:function(a,b){return L(a[0],b)},getDistinctRows:function(a,b){return M(a[0],b)},getDistinctColumnData:function(a,b){return N(a[0],b)},showRow:function(a,b){return a.each(function(){R(this,b)})},hideRow:function(a,b){return a.each(function(){S(this,b)})},showRows:function(a,b){return a.each(function(){T(this,b)})},hideRows:function(a,b){return a.each(function(){U(this,b)})},getHiddenRows:function(a,b){return V(a[0],b)},getVisibleRows:function(a,b){return W(a[0],b)},livesearch:function(a,b){return a.each(function(){hb(this,b)})},find:function(a,b){return P(a[0],b)},findRow:function(a,b){return P(a[0],b)},findRows:function(a,b){return Q(a[0],b)},deleteRow:function(a,b){return a.each(function(){X(this,b)})},deleteRows:function(a,b){return a.each(function(){Y(this,b)})},setColumnTitle:function(a,b){return a.each(function(){Z(this,b)})},select:function(a,b){return a.each(function(){ab(this,b)})},unselect:function(a,b){return a.each(function(){bb(this,b)})},selectRow:function(a,b){return a.each(function(){ab(this,b)})},unselectRow:function(a,b){return a.each(function(){bb(this,b)})},check:function(a,b){return a.each(function(){cb(this,b)})},uncheck:function(a,b){return a.each(function(){db(this,b)})},checkRow:function(a,b){return a.each(function(){cb(this,b)})},uncheckRow:function(a,b){return a.each(function(){db(this,b)})},setColumnFilter:function(a,b){return a.each(function(){eb(this,b)})},columnFilterSelect:function(a,b){return a.each(function(){fb(this,b)})},setOffset:function(a,b){return a.each(function(){gb(this,b)})},exportExcel:function(a,b){return a.each(function(){ib(this,b)})}},hc=a.fn.treegrid.extensions.defaults={offset:null,smooth:!1,parentField:"pid",toggleOnClick:!1,onlyNodeExpand:!1,cascadeCheck:!1,loadFilter:dc,onExpand:fc,autoBindDblClickRow:!0,dblClickRowMenuIndex:0,exportMenu:!1,selectOnRowContextMenu:!1,hideDisabledMenu:!1,headerContextMenu:null,rowContextMenu:null,enableHeaderClickMenu:!0,enableHeaderContextMenu:!0,enableRowContextMenu:!0,toggleMenu:!0,moveMenu:!1,pagingMenu:!1,refreshMenu:!0,dndRow:!1,rowTooltip:!1,extEditing:!0,autoEditing:!1,singleEditing:!0,columnFilter:null,loader:Tb,onLoadSuccess:Vb,onResizeColumn:Xb,onBeforeEdit:Zb,onAfterEdit:_b,onCancelEdit:bc,onBeforeDeleteColumn:function(){},onDeleteColumn:function(){},onBeforeMoveColumn:function(){},onMoveColumn:function(){},onBeforeDrop:function(){},onDrop:function(){},onBeforeDrag:function(){},onStartDrag:function(){},onStopDrag:function(){},onDragEnter:function(){},onDragOver:function(){},onDragLeave:function(){},onBeforeUpdate:function(){},onUpdate:function(){},onBeforeAppend:function(){},onAppend:function(){},onBeforeInsert:function(){},onInsert:function(){}},a.extend(a.fn.treegrid.defaults,hc),a.extend(a.fn.treegrid.methods,gc),ic={onBeforeRender:function(c,d,e){function i(a,b){var c,d;for(c=0;c<a.length;c++)d=a[c],d._parentId=b,d.children&&d.children.length&&i(d.children,d[g.idField])}var f,g,h;return a.isArray(d)&&(e={total:d.length,rows:d},d=null),e?(f=a.data(c,"treegrid"),g=f.options,e.length==b&&(e.footer&&(f.footer=e.footer),e.total&&(f.total=e.total),e=this.transfer(c,d,e.rows)),i(e.length==b?e.rows:e,d),h=P(c,d),h?h.children=h.children?h.children.concat(e):e:f.data=f.data.concat(e),g.remoteSort||this.sort(c,e),this.treeNodes=e,this.treeLevel=a(c).treegrid("getLevel",d),void 0):!1}},a.extend(a.fn.treegrid.defaults.view,ic),jc=".datagrid-body td.datagrid-header-cell-append { border-color: red; border-width: 2px; border-style: dotted; }",a.util.addCss(jc)}(jQuery);

//16,jeasyui.extensions.combogrid.js
!function(a){var c,d;a.fn.combogrid.extensions={},c=a.fn.combogrid.extensions.methods={},d=a.fn.combogrid.extensions.defaults=a.extend({},a.fn.datagrid.extensions.defaults,{onLoadSuccess:function(b){var c=a.util.parseJquery(this),d=c.combogrid("grid");a.fn.datagrid.extensions.defaults.onLoadSuccess.call(d,b)},onResizeColumn:function(b,c){var d=a.util.parseJquery(this),e=d.combogrid("grid");a.fn.datagrid.extensions.defaults.onResizeColumn.call(e,b,c)}}),a.extend(a.fn.combogrid.defaults,d),a.extend(a.fn.combogrid.methods,c),a.fn.datagrid&&a.extend(a.fn.datagrid.defaults.editors,{combogrid:{init:function(b,c){return a("<select class='datagrid-editable-input' ></select>").appendTo(b).combogrid(c)},destroy:function(b){a.util.parseJquery(b).combogrid("destroy")},getValue:function(b){var c=a.util.parseJquery(b),d=c.combogrid("options");return c.combogrid(d.multiple?"getValues":"getValue")},setValue:function(b,c){a.util.parseJquery(b).combogrid(a.isArray(c)?"setValues":"setValue",c)},resize:function(b){a(b).combogrid("resize")}}})}(jQuery);

//17,jeasyui.extensions.combotree.js
!function(a){var c,d;a.fn.combotree.extensions={},c=a.fn.combotree.extensions.methods={},d=a.fn.combotree.extensions.defaults=a.extend({},a.fn.tree.extensions.defaults,{toggleOnClick:!1,autoBindDblClick:!1}),a.extend(a.fn.combotree.defaults,d),a.extend(a.fn.combotree.methods,c)}(jQuery);

//18,jeasyui.extensions.tabs.js
!function(a,b){function c(b){var c=a.util.parseJquery(b),d=c.tabs("options"),e=d.tabPosition;a.isNumeric(d.lineHeight)&&d.lineHeight>0&&(a.array.contains(["top","bottom","left","right"],e)||(e="top"),c.children("div.tabs-panels").css("padding-"+e,d.lineHeight.toString()+"px").children().children().css("border-"+e+"-width","1px"))}function f(b,c,d,e,g){return a.array.map(e,function(e){if(!e||a.util.isString(e))return e;var h=a.extend({},e);return h.id=a.isFunction(e.id)?e.id.call(h,b,c,d,g):e.id,h.text=a.isFunction(e.text)?e.text.call(h,b,c,d,g):e.text,h.iconCls=a.isFunction(e.iconCls)?e.iconCls.call(h,b,c,d,g):e.iconCls,h.disabled=a.isFunction(e.disabled)?e.disabled.call(h,b,c,d,g):e.disabled,h.hideOnClick=a.isFunction(e.hideOnClick)?e.hideOnClick.call(h,b,c,d,g):e.hideOnClick,h.onclick=a.isFunction(e.onclick)?function(a,b,f){e.onclick.call(this,a,c,d,g,b,f)}:e.onclick,h.handler=a.isFunction(e.handler)?function(a,b,f){e.handler.call(this,a,c,d,g,b,f)}:e.handler,h.children&&h.children.length&&(h.children=f(b,c,d,h.children,g)),h})}function h(b,d){var e,f,h,i,j,k,l,m,n,o,p,q,r;return d=a.extend({tab:null,options:null},d),e=a.util.parseJquery(b),f=e.tabs("options"),h=e.tabs("getTabIndex",d.tab),i=a.union({},d.options,a.fn.tabs.extensions.panelOptions),j=i.tools,k=i.onLoad,l=a.array.contains(["mask","progress","none"],f.updateProgress)?f.updateProgress:"mask",m=function(){"mask"==l?a.easyui.loaded({topMost:!0}):"progress"==l&&a.easyui.messager.progress("close")},n=function(){"mask"==l?a.easyui.loading({topMost:!0}):"progress"==l&&a.easyui.messager.progress({title:"操作提醒",msg:"正在加载...",interval:100})},o={iconCls:"icon-mini-refresh",handler:function(){var b=a(this).parent().prev().find("span.tabs-title").text();b&&a.util.exec(function(){e.tabs("refresh",b)})}},i.refreshable&&(i.tools=a.array.likeArray(i.tools)?a.array.merge([],i.tools,o):[o]),"none"==l||a.string.isNullOrWhiteSpace(i.href)&&a.string.isNullOrWhiteSpace(i.content)||!i.selected&&e.tabs("getSelected")!=d.tab||(n(),i.iniframe||(i.onLoad=function(){a.isFunction(k)&&k.apply(this,arguments),a.util.exec(m),a.util.parseJquery(this).panel("options").onLoad=k})),p=g.call(e,e,{tab:d.tab,options:i}),q=e.tabs("getTab",h),i=q.panel("options"),i.tools=j,c(b),r=e.find(">div.tabs-header>div.tabs-wrap>ul.tabs>li").eq(h).off("dblclick.closeOnDblClick").on("dblclick.closeOnDblClick",function(){i.closeOnDblClick&&i.closable&&e.tabs("close",i.title)}),i.closeOnDblClick&&i.closable&&r.attr("title","双击此选项卡标题可以将其关闭"),"none"!=l&&i.iniframe&&a.util.exec(function(){q.panel("iframe").bind("load",m)}),p}function i(b,c){var d=a.util.parseJquery(b),e=d.tabs("options"),f=d.tabs("getTab",c),g=f.panel("options"),h=d.tabs("getTabIndex",f);a.string.isNullOrWhiteSpace(g.href)&&a.string.isNullOrWhiteSpace(g.content)||(d.tabs("update",{tab:f,options:g}),a.isFunction(e.onRefresh)&&e.onRefresh.call(b,e.title,h))}function j(b,c){var d=a.util.parseJquery(b),e=d.tabs("getSelected"),f=d.tabs("getTabIndex",e),g=d.tabs("getTab",c),h=d.tabs("getTabIndex",g);return h==f}function k(b,c){var d=a.util.parseJquery(b),e=d.tabs("getTab",c),f=e.panel("options");return f.closable}function l(b,c){var n,o,p,q,r,s,t,d=a("<table></table>").css({width:"95%",height:"100%"}),e=a("<input type='text' style='width: 98%;'/>"),f=a("<input type='text' style='width: 98%;'/>"),g=a("<input id='refreshable' type='checkbox' checked='true' />"),h=a("<input id='iniframe' type='checkbox' />"),i=a("<label>是否可刷新</label>"),j=a("<label>是否嵌至 IFRAME(浏览器内部窗体) 中</label>"),k=a("<tr></tr>").append("<td width='24%' align='right'>选项卡标题：</td>").appendTo(d),l=a("<tr></tr>").append("<td width='24%' align='right'>路径(href)：</td>").appendTo(d),m=a("<tr></tr>").appendTo(d);a("<td></td>").append(e).appendTo(k),a("<td></td>").append(f).appendTo(l),a("<td width='24%' align='right'></td>").append(g).append(i).appendTo(m),a("<td align='right'></td>").append(h).append(j).appendTo(m),c=c||0,n=a.util.parseJquery(b),o=a.isNumeric(c)?c:n.tabs("getTabIndex",n.tabs("getTab",c)),p=n.find(">div.tabs-header>div.tabs-wrap>ul.tabs>li:eq("+o+")"),q=p.offset(),r=a.extend({},{left:q.left+10,top:q.top+10}),s=a.extend({iconCls:"icon-standard-application-form",title:"新建选项卡 - 设置参数",width:400,height:165,maximizable:!1,resizable:!1,autoVCenter:!1,autoHCenter:!1,enableSaveButton:!1,topMost:!1,applyButtonText:"打开",onApply:function(b){var i,j,k,c=e.val(),d=f.val();for(d=d||a.fn.tabs.extensions.panelOptions.href,a.string.isNullOrWhiteSpace(c)&&(c="新建选项卡"),i=0;n.tabs("getTab",c+=i?i:"");)i++;return a.string.isNullOrWhiteSpace(d)?(a.easyui.messager.show("操作提醒","请输入要创建的选项卡的路径！","info"),f.focus(),void 0):(j=h.prop("checked"),k=g.prop("checked"),n.tabs("add",{title:c,href:d,refreshable:k,closable:!0,iniframe:j}),b.dialog("close"),void 0)},content:d},r),t=a.easyui.showDialog(s),a.util.exec(function(){var a=t.find(">div.dialog-button>a:first");e.keydown(function(a){13==a.which&&f.focus()}),f.keydown(function(a){13==a.which&&g.focus()}),g.keydown(function(a){13==a.which&&h.focus()}),h.keydown(function(b){13==b.which&&a.focus()}),i.click(function(){g.click()}),j.click(function(){h.click()}),a.focus(),e.focus()})}function m(b,c){for(var d=a.util.parseJquery(b),e=d.tabs("getTab",c),f=e.panel("options"),g=a.extend({},f,{selected:!0,closable:!0}),h=2,i=g.title;d.tabs("getTab",g.title=i+"-"+h.toString());)h++;d.tabs("add",g)}function n(b,c){var e=(a.util.parseJquery(b),tabs.tabs("getTab",c)),f=e.panel("options");return f}function o(b){var c=a.util.parseJquery(b),d=c.tabs("getSelected"),e=d.panel("options");return e}function p(b){var c=a.util.parseJquery(b),d=c.tabs("getSelected"),e=c.tabs("getTabIndex",d);return e}function q(b){var c=a.util.parseJquery(b),d=c.tabs("getSelectedOption"),e=d.title;return e}function r(b,c){var d=a.util.parseJquery(b),e=a.isNumeric(c)?c:d.tabs("getTabIndex",d.tabs("getTab",c)),f=d.tabs("tabs");return a.array.range(f,0,e)}function s(b,c){var d=a.util.parseJquery(b),e=a.isNumeric(c)?c:d.tabs("getTabIndex",d.tabs("getTab",c)),f=d.tabs("tabs");return a.array.range(f,e+1)}function t(b,c){var d=a.util.parseJquery(b),e=a.isNumeric(c)?c:d.tabs("getTabIndex",d.tabs("getTab",c)),f=d.tabs("tabs");return a.array.merge(a.array.range(f,0,e),a.array.range(f,e+1))}function u(b){if(a.util.isJqueryObject(b)&&b.length){var c=a.data(b[0],"panel");return c&&c.options&&c.options.closable}return!1}function v(b){var c=a.util.parseJquery(b),d=c.tabs("tabs");return a.array.filter(d,u)}function w(b,c){var d=a.util.parseJquery(b),e=d.tabs("leftTabs",c);return a.array.filter(e,u)}function x(b,c){var d=a.util.parseJquery(b),e=d.tabs("rightTabs",c);return a.array.filter(e,u)}function y(b,c){var d=a.util.parseJquery(b),e=d.tabs("otherTabs",c);return a.array.filter(e,u)}function z(b,c){var d=a.util.parseJquery(b),e=d.tabs("leftTabs",c);a.each(e,function(){d.tabs("close",d.tabs("getTabIndex",this))})}function A(b,c){var d=a.util.parseJquery(b),e=d.tabs("rightTabs",c);a.each(e,function(){d.tabs("close",d.tabs("getTabIndex",this))})}function B(b,c){var d=a.util.parseJquery(b),e=d.tabs("otherTabs",c);a.each(e,function(){d.tabs("close",d.tabs("getTabIndex",this))})}function C(b){var c=a.util.parseJquery(b),d=c.tabs("tabs");a.each(a.array.clone(d),function(){c.tabs("close",c.tabs("getTabIndex",this))})}function D(b,c){var f,d=a.util.parseJquery(b),e=d.tabs("getTab",c);e&&e.panel("options").closable&&(f=a.isNumeric(c)?c:d.tabs("getTabIndex",e),d.tabs("close",f))}function E(b,c){var d=a.util.parseJquery(b),e=d.tabs("leftClosableTabs",c);a.each(a.array.clone(e),function(){d.tabs("close",d.tabs("getTabIndex",this))})}function F(b,c){var d=a.util.parseJquery(b),e=d.tabs("rightClosableTabs",c);a.each(a.array.clone(e),function(){d.tabs("close",d.tabs("getTabIndex",this))})}function G(b,c){var d=a.util.parseJquery(b),e=d.tabs("otherClosableTabs",c);a.each(a.array.clone(e),function(){d.tabs("close",d.tabs("getTabIndex",this))})}function H(b,c){var d=a.util.parseJquery(b),e=d.tabs("closableTabs",c);a.each(a.array.clone(e),function(){d.tabs("close",d.tabs("getTabIndex",this))})}function I(c,d){var f,g,h,e=a.util.parseJquery(c);null!=d&&d!=b?(h=e.tabs("getTab",d),f=h.panel("options"),g=h.panel("header").offset()):(f=e.tabs("options"),g=e.offset()),a.extend(g,{left:g.left+25,top:g.top+15}),a.easyui.showOption(f,g)}function J(c,d){var e,f,g,h,i,j,k,l,m,n,o;d&&d.source!=b&&d.target!=b&&d.point&&(e=d.source,f=d.target,g=a.array.contains(["before","after"],d.point)?d.point:"before",h=a.util.parseJquery(c),i=h.tabs("tabs"),j=h.tabs("getTab",e),k=h.tabs("getTab",f),l=h.tabs("getTabIndex",j),m=j.panel("header"),n=k.panel("header"),j&&k&&(a.array.removeAt(i,l),o=a.array.indexOf(i,k),a.array.insert(i,"before"==g?o:o+1,j),j=j.panel("panel"),k=k.panel("panel"),k[g](j),n[g](m)))}function K(c,d){var g,e=d.target,f=a.util.parseJquery(c);d.target=b,f.tabs("add",d),g=f.tabs("tabs"),f.tabs("move",{source:g.length-1,target:e,point:"before"})}function L(b,c){if(c&&(c.which||a.isNumeric(c.which))&&c.title){var d=a.util.parseJquery(b),e=d.tabs("getTab",c.which);e.panel("setTitle",c.title)}}function M(c,d){var e=a.util.parseJquery(c),f=null==d||d==b?e.tabs("getSelected"):e.tabs("getTab",d),g=f.panel("options");g.href&&g.iniframe?window.open(g.href,"_blank"):a.easyui.messager.show('"'+g.title+'" 选项卡不可在新页面中打开。')}function Q(b,c){var f,d,e,g;c=c&&!a.util.isTopMost?!0:!1,d=a.util.parseJquery(b),e=d.currentTabs(),!c&&e.length?(f=d.currentTabIndex(),f>-1&&e.tabs("close",f)):(g=a.util.parent.$,d=g.util.parseJquery(a.util.currentFrame),e=d.currentTabs(),e.length&&(f=d.currentTabIndex(),f>-1&&e.tabs("close",f)))}var d,e,g,O,P;a.fn.tabs.extensions={},d=a.fn.tabs.defaults.onContextMenu,e=function(b,c,e){var g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,z,A;a.isFunction(d)&&d.apply(this,arguments),g=a.util.parseJquery(this),h=g.tabs("options"),h.enableConextMenu&&(b.preventDefault(),i=g.tabs("getTab",e),j=i.panel("options"),k=g.tabs("leftClosableTabs",e),l=g.tabs("rightClosableTabs",e),m=g.tabs("otherClosableTabs",e),n=g.tabs("closableTabs"),g.tabs("isSelected",e),p={text:"在新页面中打开",iconCls:"icon-standard-shape-move-forwards",disabled:j.href&&j.iniframe?!1:!0,handler:function(){g.tabs("jumpTab",e)}},q={text:"显示 Option",iconCls:"icon-standard-application-form",disabled:h.showOption?!1:!0,children:[{text:"选项卡组 Option",iconCls:"icon-standard-tab-go",handler:function(){g.tabs("showOption")}},{text:"该选项卡 Option",iconCls:"icon-standard-tab",handler:function(){g.tabs("showOption",e)}}]},r={text:"关闭选项卡",iconCls:"icon-standard-application-form-delete",disabled:j.closable?!1:!0,handler:function(){g.tabs("closeClosable",e)}},s={text:"关闭其他选项卡",iconCls:"icon-standard-cancel",disabled:m.length?!1:!0,handler:function(){g.tabs("closeOtherClosable",e)}},t={text:"刷新选项卡",iconCls:"icon-standard-table-refresh",disabled:j.refreshable&&j.href?!1:!0,handler:function(){g.tabs("refresh",e)}},u={text:"关闭左侧选项卡",iconCls:"icon-standard-tab-close-left",disabled:k.length?!1:!0,handler:function(){g.tabs("closeLeftClosable",e)}},v={text:"关闭右侧选项卡",iconCls:"icon-standard-tab-close-right",disabled:l.length?!1:!0,handler:function(){g.tabs("closeRightClosable",e)}},w={text:"关闭所有选项卡",iconCls:"icon-standard-cross",disabled:n.length?!1:!0,handler:function(){g.tabs("closeAllClosable")}},x={text:"新建选项卡",iconCls:"icon-standard-tab-add",disabled:h.enableNewTabMenu?!1:!0,handler:function(){g.tabs("newTab",e)}},y={text:"重复选项卡",iconCls:"icon-standard-control-repeat",disabled:j.repeatable?!1:!0,handler:function(){g.tabs("repeat",e)}},z=[],a.array.likeArray(h.contextMenu)&&!a.util.isString(h.contextMenu)&&a.array.merge(z,h.contextMenu),h.enableJumpTabMenu&&a.array.merge(z,"-",p),h.showOption&&a.array.merge(z,"-",q),a.array.merge(z,j.closable?["-",r,s]:["-",s]),j.refreshable&&a.array.merge(z,"-",t),a.array.merge(z,"-",u,v,w),(j.repeatable||h.enableNewTabMenu)&&(A=[],h.enableNewTabMenu&&A.push(x),j.repeatable&&A.push(y),a.array.merge(z,"-",A)),z=f(b,c,e,z,g),"-"==z[0]&&a.array.removeAt(z,0),a.easyui.showMenu({left:b.pageX,top:b.pageY,items:z}))},g=a.fn.tabs.methods.update,a.fn.tabs.extensions.panelOptions={iniframe:!1,repeatable:!1,refreshable:!0,closeOnDblClick:!0,href:null,iconCls:"icon-standard-application-form"},O=a.fn.tabs.extensions.methods={update:function(a,b){return a.each(function(){h(this,b)})},refresh:function(a,b){return a.each(function(){i(this,b)})},isSelected:function(a,b){return j(a[0],b)},isClosable:function(a,b){return k(a[0],b)},newTab:function(a,b){return a.each(function(){l(this,b)})},repeat:function(a,b){return a.each(function(){m(this,b)})},getTabOption:function(a,b){return n(a[0],b)},getSelectedOption:function(a){return o(a[0])},getSelectedIndex:function(a){return p(a[0])},getSelectedTitle:function(a){return q(a[0])},leftTabs:function(a,b){return r(a[0],b)},rightTabs:function(a,b){return s(a[0],b)},otherTabs:function(a,b){return t(a[0],b)},closableTabs:function(a){return v(a[0])},leftClosableTabs:function(a,b){return w(a[0],b)},rightClosableTabs:function(a,b){return x(a[0],b)},otherClosableTabs:function(a,b){return y(a[0],b)},closeLeft:function(a,b){return a.each(function(){z(this,b)})},closeRight:function(a,b){return a.each(function(){A(this,b)})},closeOther:function(a,b){return a.each(function(){B(this,b)})},closeAll:function(a){return a.each(function(){C(this)})},closeClosable:function(a,b){return a.each(function(){D(this,b)})},closeLeftClosable:function(a,b){return a.each(function(){E(this,b)})},closeRightClosable:function(a,b){return a.each(function(){F(this,b)})},closeOtherClosable:function(a,b){return a.each(function(){G(this,b)})},closeAllClosable:function(a){return a.each(function(){H(this)})},showOption:function(a,b){return a.each(function(){I(this,b)})},move:function(a,b){return a.each(function(){J(this,b)})},insert:function(a,b){return a.each(function(){K(this,b)})},setTitle:function(a,b){return a.each(function(){L(this,b)})},jumpTab:function(a,b){return a.each(function(){M(this,b)})}},P=a.fn.tabs.extensions.defaults={lineHeight:2,enableConextMenu:!0,enableNewTabMenu:!1,enableJumpTabMenu:!1,onRefresh:function(){},contextMenu:null,onContextMenu:e,showOption:!1,updateProgress:"mask"},a.extend(a.fn.tabs.defaults,P),a.extend(a.fn.tabs.methods,O),a.fn.extend({closeCurrentTab:function(a){return this.each(function(){Q(this,a)})}})}(jQuery);